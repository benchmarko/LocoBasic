{"version":3,"file":"locobasic.js","sources":["../src/Parser.ts","../src/arithmetic.ts","../src/Semantics.ts","../src/Core.ts","../src/NodeParts.ts","../src/BasicVmCore.ts","../src/BasicVmBrowser.ts","../src/BasicVmNode.ts","../src/main.ts"],"sourcesContent":["// Parser.ts\n\nimport { type ActionDict, type Grammar, type Namespace, type Semantics, grammar } from \"ohm-js\";\n\nexport class Parser {\n\tprivate readonly ohmGrammar: Grammar;\n\tprivate readonly ohmSemantics: Semantics;\n\n\tconstructor(grammarString: string, semanticsMap: ActionDict<string | string[]>, superParser?: Parser) {\n\t\tif (superParser) {\n\t\t\tconst superGrammar = superParser.getOhmGrammar();\n\t\t\t\n\t\t\tconst namespace: Namespace = {\n\t\t\t\tbasicGrammar: superGrammar\n\t\t\t}\n\t\t\tthis.ohmGrammar = grammar(grammarString, namespace);\n\t\t} else {\n\t\t\tthis.ohmGrammar = grammar(grammarString);\n\t\t}\n\n\t\tthis.ohmSemantics = this.ohmGrammar\n\t\t\t.createSemantics()\n\t\t\t.addOperation<string | string[]>(\"eval\", semanticsMap);\n\t}\n\n\tpublic getOhmGrammar() {\n\t\treturn this.ohmGrammar;\n\t}\n\n\t// Function to parse and evaluate an expression\n\tparseAndEval(input: string) {\n\t\ttry {\n\t\t\tconst matchResult = this.ohmGrammar.match(input);\n\t\t\tif (matchResult.succeeded()) {\n\t\t\t\treturn this.ohmSemantics(matchResult).eval();\n\t\t\t} else {\n\t\t\t\treturn 'ERROR: Parsing failed: ' + matchResult.message;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn 'ERROR: Parsing evaluator failed: ' + (error instanceof Error ? error.message : \"unknown\");\n\t\t}\n\t}\n}\n","// arithmetics.ts\n//\nexport const arithmetic = {\n  basicGrammar:\n    `\n    Arithmetic {\n    Program\n      = Line*\n\n    Line\n      = Label? Statements Comment? (eol | end)\n\n    Label\n      = label\n\n    Statements\n      = Statement (\":\" Statement)*\n\n    Statement\n      = Comment\n      | Cls\n      | Data\n      | Def\n      | Deg\n      | Dim\n      | Draw\n      | Drawr\n      | End\n      | Erase\n      | Error\n      | For\n      | Frame\n      | Gosub\n      | GraphicsPen\n      | If\n      | Input\n      | MidSAssign\n      | Mode\n      | Move\n      | Mover\n      | Next\n      | On\n      | Paper\n      | Pen\n      | Plot\n      | Plotr\n      | Print\n      | Rad\n      | Read\n      | Rem\n      | Restore\n      | Return\n      | Stop\n      | While\n      | Wend\n      | ArrayAssign\n      | Assign\n\n    ArrayAssign\n      = ArrayIdent \"=\" NumExp\n      | StrArrayIdent \"=\" StrExp\n\n    Abs\n      = abs \"(\" NumExp \")\"\n\n    Asc\n      = asc \"(\" StrExp \")\"\n\n    Atn\n      = atn \"(\" NumExp \")\"\n\n    Assign\n      = ident \"=\" NumExp\n      | strIdent \"=\" StrExp\n\n    BinS\n      = binS \"(\" NumExp (\",\" NumExp)? \")\"\n\n    ChrS\n      = chrS \"(\" NumExp \")\"\n\n    Cint\n      = cint \"(\" NumExp \")\"\n\n    Cls\n      = cls\n\n    Comment\n      = \"\\\\'\" partToEol\n\n    Cos\n      = cos \"(\" NumExp \")\"\n\n    DataItem\n      = string | number | signedDecimal\n\n    Data\n      = data NonemptyListOf<DataItem, \",\">\n\n    DecS\n      = decS \"(\" NumExp \",\" StrExp \")\"\n\n    Def\n      = def fn DefAssign\n    \n    DefArgs\n      = \"(\" ListOf<SimpleIdent, \",\"> \")\"\n\n    DefAssign\n      = ident DefArgs? \"=\" NumExp\n      | strIdent DefArgs? \"=\" StrExp\n\n    Deg\n      = deg\n\n    Dim\n      = dim NonemptyListOf<DimArrayIdent, \",\">\n\n    Draw\n      = draw NumExp \",\" NumExp (\",\" NumExp)?\n\n    Drawr\n      = drawr NumExp \",\" NumExp (\",\" NumExp)?\n\n    End\n      = endLit\n\n    Erase\n      = erase NonemptyListOf<SimpleIdent, \",\">\n\n    Error\n      = error NumExp\n\n    Exp\n      = exp \"(\" NumExp \")\"\n\n    Fix\n      = fix \"(\" NumExp \")\"\n\n    For\n      = for variable \"=\" NumExp to NumExp (step NumExp)?\n\n    Frame\n      = frame\n\n    Gosub\n      = gosub label\n\n    GraphicsPen\n      = graphics pen NumExp\n\n    HexS\n      = hexS \"(\" NumExp (\",\" NumExp)? \")\"\n\n    Input\n      = input (string (\";\" | \",\"))? AnyIdent  // or NonemptyListOf?\n\n    Instr\n      = instr \"(\" StrExp \",\" StrExp \")\" -- noLen\n      | instr \"(\" NumExp \",\" StrExp \",\" StrExp \")\" -- len\n\n    Int\n      = int \"(\" NumExp \")\"\n\n    LeftS\n      = leftS \"(\" StrExp \",\" NumExp \")\"\n\n    Len\n      = len \"(\" StrExp \")\"\n\n    Log\n      = log \"(\" NumExp \")\"\n\n    Log10\n      = log10 \"(\" NumExp \")\"\n\n    LowerS\n      = lowerS \"(\" StrExp \")\"\n\n    Max\n      = max \"(\" NonemptyListOf<NumExp, \",\"> \")\"\n\n    MidS\n      = midS \"(\" StrExp \",\" NumExp (\",\" NumExp)? \")\"\n\n    MidSAssign\n      = midS \"(\" strIdent \",\" NumExp (\",\" NumExp)? \")\" \"=\" StrExp\n\n    Min\n      = min \"(\" NonemptyListOf<NumExp, \",\"> \")\"\n\n    Mode\n      = mode NumExp\n\n    Move\n      = move NumExp \",\" NumExp (\",\" NumExp)?\n    \n    Mover\n      = mover NumExp \",\" NumExp (\",\" NumExp)?\n\n    Pi\n      = pi\n\n    Next\n      = next ListOf<variable, \",\">\n\n    On\n      = on NumExp gosub NonemptyListOf<label, \",\">\n\n    Paper\n      = paper NumExp\n\n    Pen\n      = pen NumExp\n\n    Plot\n      = plot NumExp \",\" NumExp (\",\" NumExp)?\n\n    Plotr\n      = plotr NumExp \",\" NumExp (\",\" NumExp)?\n\n    PrintArg\n      = &StrCmpExp NumExp -- strCmp\n      | StrExp\n      | NumExp\n      | using StrExp \";\" NonemptyListOf<NumExp, \";\"> -- usingNum\n\n    Print\n      = (print | \"?\") ListOf<PrintArg, \";\"> (\";\")?\n\n    Rad\n      = rad\n\n    Read\n      = read NonemptyListOf<AnyIdent, \",\">\n\n    Rem\n      = rem partToEol\n\n    Restore\n      = restore label?\n\n    Return\n      = return\n\n    RightS\n      = rightS \"(\" StrExp \",\" NumExp \")\"\n\n    Rnd\n      = rnd (\"(\" NumExp \")\")?\n    \n    Round\n      = round \"(\" NumExp (\",\" NumExp)? \")\"\n\n    Sgn\n      = sgn \"(\" NumExp \")\"\n\n    Sin\n      = sin \"(\" NumExp \")\"\n\n    SpaceS\n      = spaceS \"(\" NumExp \")\"\n\n    Sqr\n      = sqr \"(\" NumExp \")\"\n\n    Stop\n      = stop\n\n    StrS\n      = strS \"(\" NumExp \")\"\n\n    StringS\n      = stringS \"(\" NumExp \",\" StrExp \")\" -- str\n      | stringS \"(\" NumExp \",\" NumExp \")\" -- num\n\n    Tan\n      = tan \"(\" NumExp \")\"\n\n    Time\n      = time\n\n    UpperS\n      = upperS \"(\" StrExp \")\"\n\n    Val\n      = val \"(\" StrExp \")\"\n\n    Wend\n      = wend\n\n    While\n      = while NumExp\n\n    If\n      = if NumExp then Statements (else Statements)?\n\n    StrExp\n      = StrAddExp\n\n    StrAddExp\n      = StrAddExp \"+\" StrPriExp  -- plus\n      | StrPriExp\n\n    StrPriExp\n      = \"(\" StrExp \")\"  -- paren\n      | BinS\n      | ChrS\n      | DecS\n      | HexS\n      | LeftS\n      | LowerS\n      | MidS\n      | RightS\n      | SpaceS\n      | StrS\n      | StringS\n      | UpperS\n      | StrFnIdent\n      | StrArrayIdent\n      | strIdent\n      | string\n\n\n    NumExp\n      = XorExp\n\n    XorExp\n      = OrExp xor XorExp  -- xor\n      | OrExp\n\n    OrExp\n      = AndExp or OrExp  -- or\n      | AndExp\n\n    AndExp\n      = NotExp and AndExp  -- and\n      | NotExp\n\n    NotExp\n      = not NotExp  -- not\n      | StrCmpExp\n      | CmpExp\n\n    StrCmpExp\n      = StrAddExp \"=\" StrAddExp  -- eq\n      | StrAddExp \"<>\" StrAddExp  -- ne\n      | StrAddExp \"<\" StrAddExp  -- lt\n      | StrAddExp \"<=\" StrAddExp  -- le\n      | StrAddExp \">\" StrAddExp  -- gt\n      | StrAddExp \">=\" StrAddExp  -- ge\n\n    CmpExp\n      = CmpExp \"=\" AddExp  -- eq\n      | CmpExp \"<>\" AddExp  -- ne\n      | CmpExp \"<\" AddExp  -- lt\n      | CmpExp \"<=\" AddExp  -- le\n      | CmpExp \">\" AddExp  -- gt\n      | CmpExp \">=\" AddExp  -- ge\n      | AddExp\n\n    AddExp\n      = AddExp \"+\" ModExp  -- plus\n      | AddExp \"-\" ModExp  -- minus\n      | ModExp\n\n    ModExp\n      = ModExp mod DivExp -- mod\n      | DivExp\n\n    DivExp\n      = DivExp \"\\\\\\\\\" MulExp -- div\n      | MulExp\n\n    MulExp\n      = MulExp \"*\" ExpExp  -- times\n      | MulExp \"/\" ExpExp  -- divide\n      | ExpExp\n\n    ExpExp\n      = PriExp \"^\" ExpExp  -- power\n      | PriExp\n\n    PriExp\n      = \"(\" NumExp \")\"  -- paren\n      | \"+\" PriExp   -- pos\n      | \"-\" PriExp   -- neg\n      | FnIdent\n      | ArrayIdent\n      | ident\n      | number\n      | Abs\n      | Asc\n      | Atn\n      | Cint\n      | Cos\n      | Exp\n      | Fix\n      | Instr\n      | Int\n      | Len\n      | Log\n      | Log10\n      | Max\n      | Min\n      | Pi\n      | Rnd\n      | Round\n      | Sgn\n      | Sin\n      | Sqr\n      | Tan\n      | Time\n      | Val\n\n    ArrayArgs\n      = NonemptyListOf<NumExp, \",\">\n\n    ArrayIdent\n      = ident \"(\" ArrayArgs \")\"\n\n    StrArrayIdent\n      = strIdent \"(\" ArrayArgs \")\"\n\n    DimArrayIdent\n      = ident \"(\" ArrayArgs \")\"\n      | strIdent \"(\" ArrayArgs \")\"\n\n    SimpleIdent\n      = strIdent\n      | ident\n\n    AnyIdent\n      = StrArrayIdent\n      | ArrayIdent\n      | strIdent\n      | ident\n\n    FnIdent\n      = fnIdent AnyFnArgs?\n\n    StrFnIdent\n      = strFnIdent AnyFnArgs?\n\n    AnyFnArg\n      = StrExp\n      | NumExp\n\n    AnyFnArgs\n      = \"(\" ListOf<AnyFnArg, \",\"> \")\"\n\n\n    keyword\n      = abs | after | and | asc | atn | auto | binS | border | break\n      | call | cat | chain | chrS | cint | clear | clg | closein | closeout | cls | cont | copychrS | cos | creal | cursor\n      | data | decS | def | defint | defreal | defstr | deg | delete | derr | di | dim | draw | drawr\n      | edit | ei | else | endLit | ent | env | eof | erase | erl | err | error | every | exp | fill | fix | fn | for | frame | fre | gosub | goto | graphics\n      | hexS | himem | if | ink | inkey | inkeyS|  inp | input | instr | int | joy | key | leftS | len | let | line | list | load | locate | log | log10 | lowerS\n      | mask | max | memory | merge | midS | min | mod | mode | move | mover | new | next | not | on | openin | openout | or | origin | out\n      | paper | peek | pen | pi | plot | plotr | poke | pos | print\n      | rad | randomize | read | release | rem | remain | renum | restore | resume | return | rightS | rnd | round | run\n      | save | sgn | sin | sound | spaceS | spc | speed | sq | sqr | step | stop | strS | stringS | swap | symbol\n      | tab | tag | tagoff | tan | test | testr | then | time | to | troff | tron | unt | upperS | using\n      | val | vpos | wait | wend | while | width | window | write | xor | xpos | ypos | zone\n\n    abs\n      = (\"abs\" | \"ABS\") ~identPart\n    after\n      = (\"after\" | \"AFTER\") ~identPart\n    and\n      = (\"and\" | \"AND\") ~identPart\n    asc\n      = (\"asc\" | \"ASC\") ~identPart\n    atn\n      = (\"atn\" | \"ATN\") ~identPart\n    auto\n      = (\"auto\" | \"AUTO\") ~identPart\n    binS\n      = (\"bin$\" | \"BIN$\") ~identPart\n    border\n      = (\"border\" | \"BORDER\") ~identPart\n    break\n      = (\"break\" | \"BREAK\") ~identPart\n    call\n      = (\"call\" | \"CALL\") ~identPart\n    cat\n      = (\"cat\" | \"CAT\") ~identPart\n    chain\n      = (\"chain\" | \"CHAIN\") ~identPart\n    chrS\n      = (\"chr$\" | \"CHR$\") ~identPart\n    cint\n      = (\"cint\" | \"CINT\") ~identPart\n    clear\n      = (\"clear\" | \"CLEAR\") ~identPart\n    clg\n      = (\"clg\" | \"CLG\") ~identPart\n    closein\n      = (\"closein\" | \"CLOSEIN\") ~identPart\n    closeout\n      = (\"closeout\" | \"CLOSEOUT\") ~identPart\n    cls\n      = (\"cls\" | \"CLS\") ~identPart\n    cont\n      = (\"cont\" | \"CONT\") ~identPart\n    copychrS\n      = (\"copychr$\" | \"COPYCHR$\") ~identPart\n    cos\n      = (\"cos\" | \"COS\") ~identPart\n    creal\n      = (\"creal\" | \"CREAL\") ~identPart\n    cursor\n      = (\"cursor\" | \"CURSOR\") ~identPart\n    data\n      = (\"data\" | \"DATA\") ~identPart\n    decS\n      = (\"dec$\" | \"DEC$\") ~identPart\n    def\n      = (\"def\" | \"DEF\") ~identPart\n    defint\n      = (\"defint\" | \"DEFINT\") ~identPart\n    defreal\n      = (\"defreal\" | \"DEFREAL\") ~identPart\n    defstr\n      = (\"defstr\" | \"DEFSTR\") ~identPart\n    deg\n      = (\"deg\" | \"DEG\") ~identPart\n    delete\n      = (\"delete\" | \"DELETE\") ~identPart\n    derr\n      = (\"derr\" | \"DERR\") ~identPart\n    di\n      = (\"di\" | \"DI\") ~identPart\n    dim\n      = (\"dim\" | \"DIM\") ~identPart\n    draw\n      = (\"draw\" | \"DRAW\") ~identPart\n    drawr\n      = (\"drawr\" | \"DRAWR\") ~identPart\n    edit\n      = (\"edit\" | \"EDIT\") ~identPart\n    ei\n      = (\"ei\" | \"EI\") ~identPart\n    else\n      = (\"else\" | \"ELSE\") ~identPart\n    endLit\n      = (\"end\" | \"END\") ~identPart\n    ent\n      = (\"ent\" | \"ENT\") ~identPart\n    env\n      = (\"env\" | \"ENV\") ~identPart\n    eof\n      = (\"eof\" | \"EOF\") ~identPart\n    erase\n      = (\"erase\" | \"ERASE\") ~identPart\n    erl\n      = (\"erl\" | \"ERL\") ~identPart\n    err\n      = (\"err\" | \"ERR\") ~identPart\n    error\n      = (\"error\" | \"ERROR\") ~identPart\n    every\n      = (\"every\" | \"EVERY\") ~identPart\n    exp\n      = (\"exp\" | \"EXP\") ~identPart\n    fill\n      = (\"fill\" | \"FILL\") ~identPart\n    fix\n      = (\"fix\" | \"FIX\") ~identPart\n    fn\n      = (\"fn\" | \"FN\")  //~identPart\n    for\n      = (\"for\" | \"FOR\") ~identPart\n    frame\n      = (\"frame\" | \"FRAME\") ~identPart\n    fre\n      = (\"fre\" | \"FRE\") ~identPart\n    gosub\n      = (\"gosub\" | \"GOSUB\") ~identPart\n    goto\n      = (\"goto\" | \"GOTO\") ~identPart\n    graphics\n      = (\"graphics\" | \"GRAPHICS\") ~identPart\n    hexS\n      = (\"hex$\" | \"HEX$\") ~identPart\n    himem\n      = (\"himem\" | \"HIMEM\") ~identPart\n    if\n      = (\"if\" | \"IF\") ~identPart\n    ink\n      = (\"ink\" | \"INK\") ~identPart\n    inkey\n      = (\"inkey\" | \"INKEY\") ~identPart\n    inkeyS\n      = (\"inkey$\" | \"INKEY$\") ~identPart\n    inp\n      = (\"inp\" | \"INP\") ~identPart\n    input\n      = (\"input\" | \"INPUT\") ~identPart\n    instr\n      = (\"instr\" | \"INSTR\") ~identPart\n    int\n      = (\"int\" | \"INT\") ~identPart\n    joy\n      = (\"joy\" | \"JOY\") ~identPart\n    key\n      = (\"key\" | \"KEY\") ~identPart\n    leftS\n      = (\"left$\" | \"LEFT$\") ~identPart\n    len\n      = (\"len\" | \"LEN\") ~identPart\n    let\n      = (\"let\" | \"LET\") ~identPart\n    line\n      = (\"line\" | \"LINE\") ~identPart\n    list\n      = (\"list\" | \"LIST\") ~identPart\n    load\n      = (\"load\" | \"LOAD\") ~identPart\n    locate\n      = (\"locate\" | \"LOCATE\") ~identPart\n    log\n      = (\"log\" | \"LOG\") ~identPart\n    log10\n      = (\"log10\" | \"LOG10\") ~identPart\n    lowerS\n      = (\"lower$\" | \"LOWER$\") ~identPart\n    mask\n      = (\"mask\" | \"MASK\") ~identPart\n    max\n      = (\"max\" | \"MAX\") ~identPart\n    memory\n      = (\"memory\" | \"MEMORY\") ~identPart\n    merge\n      = (\"merge\" | \"MERGE\") ~identPart\n    midS\n      = (\"mid$\" | \"MID$\") ~identPart\n    min\n      = (\"min\" | \"MIN\") ~identPart\n    mod\n      = (\"mod\" | \"MOD\") ~identPart\n    mode\n      = (\"mode\" | \"MODE\") ~identPart\n    move\n      = (\"move\" | \"MOVE\") ~identPart\n    mover\n      = (\"mover\" | \"MOVER\") ~identPart\n    new\n      = (\"new\" | \"NEW\") ~identPart\n    next\n      = (\"next\" | \"NEXT\") ~identPart\n    not\n      = (\"not\" | \"NOT\") ~identPart\n    on\n      = (\"on\" | \"ON\") ~identPart\n    openin\n      = (\"openin\" | \"OPENIN\") ~identPart\n    openout\n      = (\"openout\" | \"OPENOUT\") ~identPart\n    or\n      = (\"or\" | \"OR\") ~identPart\n    origin\n      = (\"origin\" | \"ORIGIN\") ~identPart\n    out\n      = (\"out\" | \"OUT\") ~identPart\n    paper\n      = (\"paper\" | \"PAPER\") ~identPart\n    peek\n      = (\"peek\" | \"PEEK\") ~identPart\n    pen\n      = (\"pen\" | \"PEN\") ~identPart\n    pi\n      = (\"pi\" | \"PI\") ~identPart\n    plot\n      = (\"plot\" | \"PLOT\") ~identPart\n    plotr\n      = (\"plotr\" | \"PLOTR\") ~identPart\n    poke\n      = (\"poke\" | \"POKE\") ~identPart\n    pos\n      = (\"pos\" | \"POS\") ~identPart\n    print\n      = (\"print\" | \"PRINT\") ~identPart\n    rad\n      = (\"rad\" | \"RAD\") ~identPart\n    randomize\n      = (\"randomize\" | \"RANDOMIZE\") ~identPart\n    read\n      = (\"read\" | \"READ\") ~identPart\n    release\n      = (\"release\" | \"RELEASE\") ~identPart\n    rem\n      = (\"rem\" | \"REM\") ~identPart\n    remain\n      = (\"remain\" | \"REMAIN\") ~identPart\n    renum\n      = (\"renum\" | \"RENUM\") ~identPart\n    restore\n      = (\"restore\" | \"RESTORE\") ~identPart\n    resume\n      = (\"resume\" | \"RESUME\") ~identPart\n    return\n      = (\"return\" | \"RETURN\") ~identPart\n    rightS\n      = (\"right$\" | \"RIGHT$\") ~identPart\n    rnd\n      = (\"rnd\" | \"RND\") ~identPart\n    round\n      = (\"round\" | \"ROUND\") ~identPart\n    run\n      = (\"run\" | \"RUN\") ~identPart\n    save\n      = (\"save\" | \"SAVE\") ~identPart\n    sgn\n      = (\"sgn\" | \"SGN\") ~identPart\n    sin\n      = (\"sin\" | \"SIN\") ~identPart\n    sound\n      = (\"sound\" | \"SOUND\") ~identPart\n    spaceS\n      = (\"space$\" | \"SPACE$\") ~identPart\n    spc\n      = (\"spc\" | \"SPC\") ~identPart\n    speed\n      = (\"speed\" | \"SPEED\") ~identPart\n    sq\n      = (\"sq\" | \"SQ\") ~identPart\n    sqr\n      = (\"sqr\" | \"SQR\") ~identPart\n    step\n      = (\"step\" | \"STEP\") ~identPart\n    stop\n      = (\"stop\" | \"STOP\") ~identPart\n    strS\n      = (\"str$\" | \"STR$\") ~identPart\n    stringS\n      = (\"string$\" | \"STRING$\") ~identPart\n    swap\n      = (\"swap\" | \"SWAP\") ~identPart\n    symbol\n      = (\"symbol\" | \"SYMBOL\") ~identPart\n    tab\n      = (\"tab\" | \"TAB\") ~identPart\n    tag\n      = (\"tag\" | \"TAG\") ~identPart\n    tagoff\n      = (\"tagoff\" | \"TAGOFF\") ~identPart\n    tan\n      = (\"tan\" | \"TAN\") ~identPart\n    test\n      = (\"test\" | \"TEST\") ~identPart\n    testr\n      = (\"testr\" | \"TESTR\") ~identPart\n    then\n      = (\"then\" | \"THEN\") ~identPart\n    time\n      = (\"time\" | \"TIME\") ~identPart\n    to\n      = (\"to\" | \"TO\") ~identPart\n    troff\n      = (\"troff\" | \"TROFF\") ~identPart\n    tron\n      = (\"tron\" | \"TRON\") ~identPart\n    unt\n      = (\"unt\" | \"UNT\") ~identPart\n    upperS\n      = (\"upper$\" | \"UPPER$\") ~identPart\n    using\n      = (\"using\" | \"USING\") ~identPart\n    val\n      = (\"val\" | \"VAL\") ~identPart\n    vpos\n      = (\"vpos\" | \"VPOS\") ~identPart\n    wait\n      = (\"wait\" | \"WAIT\") ~identPart\n    wend\n      = (\"wend\" | \"WEND\") ~identPart\n    while\n      = (\"while\" | \"WHILE\") ~identPart\n    width\n      = (\"width\" | \"WIDTH\") ~identPart\n    window\n      = (\"window\" | \"WINDOW\") ~identPart\n    write\n      = (\"write\" | \"WRITE\") ~identPart\n    xor\n      = (\"xor\" | \"XOR\") ~identPart\n    xpos\n      = (\"xpos\" | \"XPOS\") ~identPart\n    ypos\n      = (\"ypos\" | \"YPOS\") ~identPart\n    zone\n      = (\"zone\" | \"ZONE\") ~identPart\n\n    ident (an identifier)\n      = ~keyword identName\n\n    fnIdent\n      = fn ~keyword identName\n\n    identName = identStart identPart*\n\n    identStart = letter\n\n    identPart = letter | digit\n\n    variable = ident\n\n    strIdent\n      = ~keyword identName \"$\"\n\n    strFnIdent\n      = fn ~keyword identName \"$\"\n\n    binaryDigit = \"0\"..\"1\"\n\n    exponentPart = (\"e\" | \"E\") signedDecimal\n\n    decimalValue  (decimal number)\n      = digit* \".\" digit+ exponentPart* -- fract\n      | digit+            exponentPart* -- whole\n\n    hexValue\n      = \"&\" hexDigit+\n\n    binaryValue\n      = caseInsensitive<\"&x\"> binaryDigit+\n\n    number  (a number)\n      = decimalValue\n      | hexValue\n      | binaryValue\n\n    signedDecimal\n      = (\"+\" | \"-\")? decimalValue\n\n    partToEol\n      = (~eol any)*\n\n    string = \"\\\\\"\" (\"\\\\\\\\\\\\\"\" | (~\"\\\\\"\" any))* \"\\\\\"\"\n\n    label = digit+\n\n    space := \" \" | \"\\t\"\n\n    eol (end of line)\n      = \"\\\\n\"\n    }\n  `,\n\n  strictGrammar:\n  `strictGrammar <: basicGrammar {\n    abs\n      := \"ABS\" ~identPart\n    after\n      := \"AFTER\" ~identPart\n    and\n      := \"AND\" ~identPart\n    asc\n      := \"ASC\" ~identPart\n    atn\n      := \"ATN\" ~identPart\n    auto\n      := \"AUTO\" ~identPart\n    binS\n      := \"BIN$\" ~identPart\n    border\n      := \"BORDER\" ~identPart\n    break\n      := \"BREAK\" ~identPart\n    call\n      := \"CALL\" ~identPart\n    cat\n      := \"CAT\" ~identPart\n    chain\n      := \"CHAIN\" ~identPart\n    chrS\n      := \"CHR$\" ~identPart\n    cint\n      := \"CINT\" ~identPart\n    clear\n      := \"CLEAR\" ~identPart\n    clg\n      := \"CLG\" ~identPart\n    closein\n      := \"CLOSEIN\" ~identPart\n    closeout\n      := \"CLOSEOUT\" ~identPart\n    cls\n      := \"CLS\" ~identPart\n    cont\n      := \"CONT\" ~identPart\n    copychrS\n      := \"COPYCHR$\" ~identPart\n    cos\n      := \"COS\" ~identPart\n    creal\n      := \"CREAL\" ~identPart\n    cursor\n      := \"CURSOR\" ~identPart\n    data\n      := \"DATA\" ~identPart\n    decS\n      := \"DEC$\" ~identPart\n    def\n      := \"DEF\" ~identPart\n    defint\n      := \"DEFINT\" ~identPart\n    defreal\n      := \"DEFREAL\" ~identPart\n    defstr\n      := \"DEFSTR\" ~identPart\n    deg\n      := \"DEG\" ~identPart\n    delete\n      := \"DELETE\" ~identPart\n    derr\n      := \"DERR\" ~identPart\n    di\n      := \"DI\" ~identPart\n    dim\n      := \"DIM\" ~identPart\n    draw\n      := \"DRAW\" ~identPart\n    drawr\n      := \"DRAWR\" ~identPart\n    edit\n      := \"EDIT\" ~identPart\n    ei\n      := \"EI\" ~identPart\n    else\n      := \"ELSE\" ~identPart\n    endLit\n      := \"END\" ~identPart\n    ent\n      := \"ENT\" ~identPart\n    env\n      := \"ENV\" ~identPart\n    eof\n      := \"EOF\" ~identPart\n    erase\n      := \"ERASE\" ~identPart\n    erl\n      := \"ERL\" ~identPart\n    err\n      := \"ERR\" ~identPart\n    error\n      := \"ERROR\" ~identPart\n    every\n      := \"EVERY\" ~identPart\n    exp\n      := \"EXP\" ~identPart\n    fill\n      := \"FILL\" ~identPart\n    fix\n      := \"FIX\" ~identPart\n    fn\n      := \"FN\"  //~identPart\n    for\n      := \"FOR\" ~identPart\n    frame\n      := \"FRAME\" ~identPart\n    fre\n      := \"FRE\" ~identPart\n    gosub\n      := \"GOSUB\" ~identPart\n    goto\n      := \"GOTO\" ~identPart\n    graphics\n      := \"GRAPHICS\" ~identPart\n    hexS\n      := \"HEX$\" ~identPart\n    himem\n      := \"HIMEM\" ~identPart\n    if\n      := \"IF\" ~identPart\n    ink\n      := \"INK\" ~identPart\n    inkey\n      := \"INKEY\" ~identPart\n    inkeyS\n      := \"INKEY$\" ~identPart\n    inp\n      := \"INP\" ~identPart\n    input\n      := \"INPUT\" ~identPart\n    instr\n      := \"INSTR\" ~identPart\n    int\n      := \"INT\" ~identPart\n    joy\n      := \"JOY\" ~identPart\n    key\n      := \"KEY\" ~identPart\n    leftS\n      := \"LEFT$\" ~identPart\n    len\n      := \"LEN\" ~identPart\n    let\n      := \"LET\" ~identPart\n    line\n      := \"LINE\" ~identPart\n    list\n      := \"LIST\" ~identPart\n    load\n      := \"LOAD\" ~identPart\n    locate\n      := \"LOCATE\" ~identPart\n    log\n      := \"LOG\" ~identPart\n    log10\n      := \"LOG10\" ~identPart\n    lowerS\n      := \"LOWER$\" ~identPart\n    mask\n      := \"MASK\" ~identPart\n    max\n      := \"MAX\" ~identPart\n    memory\n      := \"MEMORY\" ~identPart\n    merge\n      := \"MERGE\" ~identPart\n    midS\n      := \"MID$\" ~identPart\n    min\n      := \"MIN\" ~identPart\n    mod\n      := \"MOD\" ~identPart\n    mode\n      := \"MODE\" ~identPart\n    move\n      := \"MOVE\" ~identPart\n    mover\n      := \"MOVER\" ~identPart\n    new\n      := \"NEW\" ~identPart\n    next\n      := \"NEXT\" ~identPart\n    not\n      := \"NOT\" ~identPart\n    on\n      := \"ON\" ~identPart\n    openin\n      := \"OPENIN\" ~identPart\n    openout\n      := \"OPENOUT\" ~identPart\n    or\n      := \"OR\" ~identPart\n    origin\n      := \"ORIGIN\" ~identPart\n    out\n      := \"OUT\" ~identPart\n    paper\n      := \"PAPER\" ~identPart\n    peek\n      := \"PEEK\" ~identPart\n    pen\n      := \"PEN\" ~identPart\n    pi\n      := \"PI\" ~identPart\n    plot\n      := \"PLOT\" ~identPart\n    plotr\n      := \"PLOTR\" ~identPart\n    poke\n      := \"POKE\" ~identPart\n    pos\n      := \"POS\" ~identPart\n    print\n      := \"PRINT\" ~identPart\n    rad\n      := \"RAD\" ~identPart\n    randomize\n      := \"RANDOMIZE\" ~identPart\n    read\n      := \"READ\" ~identPart\n    release\n      := \"RELEASE\" ~identPart\n    rem\n      := \"REM\" ~identPart\n    remain\n      := \"REMAIN\" ~identPart\n    renum\n      := \"RENUM\" ~identPart\n    restore\n      := \"RESTORE\" ~identPart\n    resume\n      := \"RESUME\" ~identPart\n    return\n      := \"RETURN\" ~identPart\n    rightS\n      := \"RIGHT$\" ~identPart\n    rnd\n      := \"RND\" ~identPart\n    round\n      := \"ROUND\" ~identPart\n    run\n      := \"RUN\" ~identPart\n    save\n      := \"SAVE\" ~identPart\n    sgn\n      := \"SGN\" ~identPart\n    sin\n      := \"SIN\" ~identPart\n    sound\n      := \"SOUND\" ~identPart\n    spaceS\n      := \"SPACE$\" ~identPart\n    spc\n      := \"SPC\" ~identPart\n    speed\n      := \"SPEED\" ~identPart\n    sq\n      := \"SQ\" ~identPart\n    sqr\n      := \"SQR\" ~identPart\n    step\n      := \"STEP\" ~identPart\n    stop\n      := \"STOP\" ~identPart\n    strS\n      := \"STR$\" ~identPart\n    stringS\n      := \"STRING$\" ~identPart\n    swap\n      := \"SWAP\" ~identPart\n    symbol\n      := \"SYMBOL\" ~identPart\n    tab\n      := \"TAB\" ~identPart\n    tag\n      := \"TAG\" ~identPart\n    tagoff\n      := \"TAGOFF\" ~identPart\n    tan\n      := \"TAN\" ~identPart\n    test\n      := \"TEST\" ~identPart\n    testr\n      := \"TESTR\" ~identPart\n    then\n      := \"THEN\" ~identPart\n    time\n      := \"TIME\" ~identPart\n    to\n      := \"TO\" ~identPart\n    troff\n      := \"TROFF\" ~identPart\n    tron\n      := \"TRON\" ~identPart\n    unt\n      := \"UNT\" ~identPart\n    upperS\n      := \"UPPER$\" ~identPart\n    using\n      := \"USING\" ~identPart\n    val\n      := \"VAL\" ~identPart\n    vpos\n      := \"VPOS\" ~identPart\n    wait\n      := \"WAIT\" ~identPart\n    wend\n      := \"WEND\" ~identPart\n    while\n      := \"WHILE\" ~identPart\n    width\n      := \"WIDTH\" ~identPart\n    window\n      := \"WINDOW\" ~identPart\n    write\n      := \"WRITE\" ~identPart\n    xor\n      := \"XOR\" ~identPart\n    xpos\n      := \"XPOS\" ~identPart\n    ypos\n      := \"YPOS\" ~identPart\n    zone\n      := \"ZONE\" ~identPart\n\n    identStart := lower\n}\n  `\n};\n","// Semantics.ts\n\nimport type { ActionDict, Node } from \"ohm-js\";\nimport type { IVm } from \"./Interfaces\";\n\n// Type definition for a defined label entry\ntype DefinedLabelEntryType = {\n    label: string,\n    first: number,\n    last: number,\n    dataIndex: number\n}\n\n// Type definition for a GOSUB label entry\ntype GosubLabelEntryType = {\n    count: number\n}\n\ntype RecursiveArray<T> = T | RecursiveArray<T>[];\n\n// Interface for Semantics Helper\ninterface SemanticsHelper {\n    addDataIndex(count: number): void,\n    addDefinedLabel(label: string, line: number): void,\n    addGosubLabel(label: string): void,\n    addIndent(num: number): number,\n    addInstr(name: string): number,\n    addRestoreLabel(label: string): void,\n    applyNextIndent(): void,\n    getDataIndex(): number,\n    getDataList(): (string | number)[],\n    getDefinedLabels(): DefinedLabelEntryType[],\n    getGosubLabels(): Record<string, GosubLabelEntryType>,\n    getIndent(): number,\n    getIndentStr(): string,\n    getInstrMap(): Record<string, number>,\n    getRestoreMap(): Record<string, number>,\n    getVariable(name: string): string,\n    getVariables(): string[],\n    incrementLineIndex(): number,\n    nextIndentAdd(num: number): void,\n    setIndent(indent: number): void,\n\tsetDeg(deg: boolean): void,\n\tgetDeg(): boolean,\n\tsetDefContext(defContext: boolean): void\n}\n\nfunction getCodeSnippets() {\n\tconst _o = {} as IVm;\n\tlet _data: (string | number)[] = [];\n\tlet _dataPtr = 0;\n\tlet _restoreMap: Record<string, number> = {};\n\n\tconst codeSnippets: Record<string, (...args: any[]) => unknown> = {\n\t\t_setDataDummy: function _setDataDummy() { // not really used\n\t\t\t_data = [ ];\n\t\t\t_dataPtr = 0;\n\t\t\t_restoreMap = {};\n\t\t\t//Object.assign(_o, vm);\n\t\t},\n\t\tbin$: function bin$(num: number, pad: number = 0) {\n\t\t\treturn num.toString(2).toUpperCase().padStart(pad, \"0\");\n\t\t},\n\t\tcls: function cls() {\n\t\t\t_o.cls();\n\t\t},\n\t\tdec$: function dec$(num: number, format: string) {\n\t\t\tconst decimals = (format.split(\".\")[1] || \"\").length;\n\t\t\tconst str = num.toFixed(decimals);\n\t\t\tconst pad = \" \".repeat(Math.max(0, format.length - str.length));\n\t\t\treturn pad + str;\n\t\t},\n\t\tdim: function dim(dims: number[], initVal: string | number = 0) {\n\t\t\tconst createRecursiveArray = (depth: number): RecursiveArray<string | number> => {\n\t\t\t\tconst length = dims[depth] + 1; // +1 because of 0-based index\n\t\t\t\tconst array = Array.from({ length }, () =>\n\t\t\t\t\tdepth + 1 < dims.length ? createRecursiveArray(depth + 1) : initVal\n\t\t\t\t);\n\t\t\t\treturn array;\n\t\t\t};\n\t\t\treturn createRecursiveArray(0);\n\t\t},\n\t\tdraw: function draw(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"L\", x, y);\n\t\t},\n\t\tdrawr: function drawr(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"l\", x, y);\n\t\t},\n\t\tend: function end() {\n\t\t\t_o.flush();\n\t\t\treturn \"end\";\n\t\t},\n\t\tframe: function frame() { // async\n\t\t\t_o.flush();\n\t\t\treturn new Promise<void>(resolve => setTimeout(() => resolve(), Date.now() % 50));\n\t\t},\n\t\tgraphicsPen: function graphicsPen(num: number) {\n\t\t\t_o.graphicsPen(num);\n\t\t},\n\t\thex$: function hex$(num: number, pad?: number) {\n\t\t\treturn num.toString(16).toUpperCase().padStart(pad || 0, \"0\");\n\t\t},\n\t\tinput: function input(msg: string, isNum: boolean) { // async\n\t\t\t_o.flush();\n\t\t\treturn new Promise(resolve => setTimeout(() => {\n\t\t\t\tconst input = _o.prompt(msg);\n\t\t\t\tresolve(isNum ? Number(input) : input);\n\t\t\t}, 5));\n\t\t},\n\t\tmid$Assign: function mid$Assign(s: string, start: number, newString: string, len?: number) {\n\t\t\tstart -= 1;\n\t\t\tlen = Math.min(len ?? newString.length, newString.length, s.length - start);\n\t\t\treturn s.substring(0, start) + newString.substring(0, len) + s.substring(start + len);\n\t\t},\n\t\tmode: function mode(num: number) {\n\t\t\t_o.mode(num);\n\t\t},\n\t\tmove: function move(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"M\", x, y);\n\t\t},\n\t\tmover: function mover(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"m\", x, y);\n\t\t},\n\t\tpaper: function paper(n : number) {\n\t\t\t_o.paper(n);\n\t\t},\n\t\tpen: function pen(n : number) {\n\t\t\t_o.pen(n);\n\t\t},\n\t\tplot: function plot(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"P\", x, y);\n\t\t},\n\t\tplotr: function plotr(x: number, y: number) {\n\t\t\t_o.drawMovePlot(\"p\", x, y);\n\t\t},\n\t\tprint: function print(...args: (string | number)[]) {\n\t\t\tconst _printNumber = (arg: number) => (arg >= 0 ? ` ${arg} ` : `${arg} `);\n\t\t\tconst output = args.map((arg) => (typeof arg === \"number\") ? _printNumber(arg) : arg).join(\"\");\n\t\t\t_o.print(output);\n\t\t},\n\t\tread: function read() {\n\t\t\treturn _data[_dataPtr++];\n\t\t},\n\t\trestore: function restore(label: string) {\n\t\t\t_dataPtr = _restoreMap[label];\n\t\t},\n\t\tround: function round(num: number, dec: number) {\n\t\t\treturn Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);\n\t\t},\n\t\tstop: function stop() {\n\t\t\t _o.flush();\n\t\t\t return \"stop\";\n\t\t},\n\t\tstr$: function str$(num: number) {\n\t\t\treturn num >= 0 ? ` ${num}`: String(num);\n\t\t},\n\t\ttime: function time() {\n\t\t\treturn (Date.now() * 3 / 10) | 0;\n\t\t},\n\t\tval: function val(str: string) {\n\t\t\treturn Number(str.replace(\"&x\", \"0b\").replace(\"&\", \"0x\"));\n\t\t}\n\t};\n\treturn codeSnippets;\n}\n\n/*\n// round with higher precision: https://www.jacklmoore.com/notes/rounding-in-javascript\nround: function round(num: number, dec: number) {\n\tconst maxDecimals = 20 - Math.floor(Math.log10(Math.abs(num))); // limit for JS\n\tif (dec >= 0 && dec > maxDecimals) {\n\t\tdec = maxDecimals;\n\t}\n\treturn Math.sign(num) * Number(Math.round(Number(Math.abs(num) + \"e\" + dec)) + \"e\" + (dec >= 0 ? -dec : -dec));\n}\n*/\n\nfunction trimIndent(code: string) {\n\tconst lines = code.split(\"\\n\");\n\tconst lastLine = lines[lines.length - 1];\n\n\tconst match = lastLine.match(/^(\\s+)}$/);\n\tif (match) {\n\t\tconst indent = match[1];\n\t\tconst trimmedLines = lines.map((line) => line.startsWith(indent) ? line.slice(indent.length) : line);\n\t\treturn trimmedLines.join(\"\\n\");\n\t}\n\treturn code;\n}\n\n\nfunction evalChildren(children: Node[]) {\n\treturn children.map(c => c.eval());\n}\n\nfunction getSemantics(semanticsHelper: SemanticsHelper) {\n\n\tconst drawMovePlot = (lit: Node, x: Node, _comma1: Node, y: Node, _comma2: Node, e3: Node) => {\n\t\tconst command = lit.sourceString.toLowerCase();\n\t\tsemanticsHelper.addInstr(command);\n\t\tconst pen = e3.child(0)?.eval();\n\t\tlet penStr = \"\";\n\t\tif (pen !== undefined) {\n\t\t\tsemanticsHelper.addInstr(\"graphicsPen\");\n\t\t\tpenStr = `graphicsPen(${pen}); `;\n\t\t}\n\t\treturn penStr + `${command}(${x.eval()}, ${y.eval()})`;\n\t};\n\n\tconst cosSinTan = (lit: Node, _open: Node, e: Node, _close: Node) => { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\tconst func = lit.sourceString.toLowerCase();\n\t\treturn semanticsHelper.getDeg() ? `Math.${func}((${e.eval()}) * Math.PI / 180)` : `Math.${func}(${e.eval()})`;\n\t}\n\n\t// Semantics to evaluate an arithmetic expression\n\tconst semantics: ActionDict<string | string[]> = {\n\t\tProgram(lines: Node) {\n\t\t\tconst lineList = evalChildren(lines.children);\n\n\t\t\tconst variableList = semanticsHelper.getVariables();\n\t\t\tconst variableDeclarations = variableList.length ? \"let \" + variableList.map((v) => v.endsWith(\"$\") ? `${v} = \"\"` : `${v} = 0`).join(\", \") + \";\" : \"\";\n\n\t\t\t// find subroutines\n\t\t\tconst definedLabels = semanticsHelper.getDefinedLabels();\n\t\t\tconst gosubLabels = semanticsHelper.getGosubLabels();\n\t\t\tconst restoreMap = semanticsHelper.getRestoreMap();\n\n\t\t\tconst awaitLabels: string[] = [];\n\t\t\tlet subroutineStart: DefinedLabelEntryType | undefined;\n\t\t\tfor (const label of definedLabels) {\n\t\t\t\tif (gosubLabels[label.label]) {\n\t\t\t\t\tsubroutineStart = label;\n\t\t\t\t}\n\n\t\t\t\tif (subroutineStart && label.last >= 0) {\n\t\t\t\t\tconst first = subroutineStart.first;\n\t\t\t\t\tconst indent = lineList[first].search(/\\S|$/);\n\t\t\t\t\tconst indentStr = \" \".repeat(indent);\n\n\t\t\t\t\tlet hasAwait = false;\n\t\t\t\t\tfor (let i = first; i <= label.last; i += 1) {\n\t\t\t\t\t\tif (lineList[i].includes(\"await \")) {\n\t\t\t\t\t\t\thasAwait = true; // quick check\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlineList[i] = \"  \" + lineList[i]; // indent\n\t\t\t\t\t}\n\n\t\t\t\t\tconst asyncStr = hasAwait ? \"async \" : \"\";\n\t\t\t\t\tlineList[first] = `${indentStr}${asyncStr}function _${subroutineStart.label}() {${indentStr}\\n` + lineList[first];\n\t\t\t\t\tlineList[label.last] += `\\n${indentStr}` + \"}\"; //TS issue when using the following? `\\n${indentStr}};`\n\t\t\t\t\tif (hasAwait) {\n\t\t\t\t\t\tawaitLabels.push(subroutineStart.label);\n\t\t\t\t\t}\n\t\t\t\t\tsubroutineStart = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (restoreMap[label.label] === -1) {\n\t\t\t\t\trestoreMap[label.label] = label.dataIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst dataList = semanticsHelper.getDataList();\n\t\t\tif (dataList.length) {\n\t\t\t\tfor (const key of Object.keys(restoreMap)) {\n\t\t\t\t\tlet index = restoreMap[key];\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\trestoreMap[key] = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlineList.unshift(`const {_data, _restoreMap} = _defineData();\\nlet _dataPtr = 0;`);\n\t\t\t\tlineList.push(`function _defineData() {\\n  const _data = [\\n${dataList.join(\",\\n\")}\\n  ];\\n  const _restoreMap = ${JSON.stringify(restoreMap)};\\n  return {_data, _restoreMap};\\n}`);\n\t\t\t}\n\n\t\t\tlineList.push(\"// library\");\n\n\t\t\tconst instrMap = semanticsHelper.getInstrMap();\n\t\t\tconst codeSnippets = getCodeSnippets();\n\n\t\t\tlet needsAsync = false;\n\t\t\tfor (const key of Object.keys(codeSnippets)) {\n\t\t\t\tif (instrMap[key]) {\n\t\t\t\t\tconst code = String(codeSnippets[key]);\n\t\t\t\t\tconst adaptedCode = trimIndent(code);\n\t\t\t\t\tif (adaptedCode.includes(\"Promise\") || adaptedCode.includes(\"await\")) {\n\t\t\t\t\t\tlineList.push(\"async \" + adaptedCode);\n\t\t\t\t\t\tneedsAsync = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineList.push(adaptedCode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (variableDeclarations) {\n\t\t\t\tlineList.unshift(variableDeclarations);\n\t\t\t}\n\n\t\t\tif (needsAsync) {\n\t\t\t\tlineList.unshift(`return async function() {`);\n\t\t\t\tlineList.push('}();');\n\t\t\t}\n\n\t\t\tlineList.unshift(`\"use strict\"`);\n\n\t\t\tlet lineStr = lineList.filter((line) => line.trimEnd() !== \"\").join('\\n');\n\t\t\tif (awaitLabels.length) {\n\t\t\t\tfor (const label of awaitLabels) {\n\t\t\t\t\tconst regEx = new RegExp(`_${label}\\\\(\\\\);`, \"g\");\n\t\t\t\t\tlineStr = lineStr.replace(regEx, `await _${label}();`);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lineStr;\n\t\t},\n\n\t\tLine(label: Node, stmts: Node, comment: Node, _eol: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst labelString = label.sourceString;\n\n\t\t\tconst currentLineIndex = semanticsHelper.incrementLineIndex() - 1;\n\n\t\t\tif (labelString) {\n\t\t\t\tsemanticsHelper.addDefinedLabel(labelString, currentLineIndex);\n\t\t\t}\n\n\t\t\tconst lineStr = stmts.eval();\n\n\t\t\tif (lineStr === \"return\") {\n\t\t\t\tconst definedLabels = semanticsHelper.getDefinedLabels();\n\t\t\t\tif (definedLabels.length) {\n\t\t\t\t\tconst lastLabelItem = definedLabels[definedLabels.length - 1];\n\t\t\t\t\tlastLabelItem.last = currentLineIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst commentStr = comment.sourceString ? `; //${comment.sourceString.substring(1)}` : \"\";\n\t\t\tconst semi = lineStr === \"\" || lineStr.endsWith(\"{\") || lineStr.endsWith(\"}\") || lineStr.startsWith(\"//\") || commentStr ? \"\" : \";\";\n\n\t\t\tconst indentStr = semanticsHelper.getIndentStr();\n\t\t\tsemanticsHelper.applyNextIndent();\n\n\t\t\treturn indentStr + lineStr + commentStr + semi;\n\t\t},\n\n\t\tStatements(stmt: Node, _stmtSep: Node, stmts: Node) {\n\t\t\t// separate statements, use \";\", if the last stmt does not end with \"{\"\n\t\t\tconst statements = [stmt.eval(), ...evalChildren(stmts.children)];\n\t\t\treturn statements.reduce((acc, current) => acc.endsWith(\"{\") ? `${acc} ${current}` : `${acc}; ${current}`);\n\t\t},\n\n\t\tArrayAssign(ident: Node, _op: Node, e: Node): string {\n\t\t\treturn `${ident.eval()} = ${e.eval()}`;\n\t\t},\n\n\t\tAssign(ident: Node, _op: Node, e: Node): string {\n\t\t\tconst variableName = ident.sourceString;\n\t\t\tconst resolvedVariableName = semanticsHelper.getVariable(variableName);\n\t\t\tconst value = e.eval();\n\t\t\treturn `${resolvedVariableName} = ${value}`;\n\t\t},\n\n\t\tAbs(_absLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.abs(${e.eval()})`;\n\t\t},\n\n\t\tAsc(_ascLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()}).charCodeAt(0)`;\n\t\t},\n\n\t\tAtn(_atnLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn semanticsHelper.getDeg() ? `(Math.atan(${e.eval()}) * 180 / Math.PI)` : `Math.atan(${e.eval()})`;\n\t\t},\n\n\t\tBinS(_binLit: Node, _open: Node, e: Node, _comma: Node, n: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"bin$\");\n\t\t\tconst pad = n.child(0)?.eval();\n\t\t\treturn pad !== undefined ? `bin$(${e.eval()}, ${pad})` : `bin$(${e.eval()})`\n\t\t},\n\n\t\tChrS(_chrLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `String.fromCharCode(${e.eval()})`;\n\t\t},\n\n\t\tComment(_commentLit: Node, remain: Node) {\n\t\t\treturn `//${remain.sourceString}`;\n\t\t},\n\n\t\tCos: cosSinTan,\n\n\t\tCint(_cintLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.round(${e.eval()})`;\n\t\t},\n\n\t\tCls(_clsLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"cls\");\n\t\t\treturn `cls()`;\n\t\t},\n\n\t\tData(_datalit: Node, args: Node) {\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval());\n\n\t\t\tconst definedLabels = semanticsHelper.getDefinedLabels();\n\n\t\t\tif (definedLabels.length) {\n\t\t\t\tconst currentLabel = definedLabels[definedLabels.length - 1];\n\t\t\t\tif (currentLabel.dataIndex === -1) {\n\t\t\t\t\tconst dataIndex = semanticsHelper.getDataIndex();\n\t\t\t\t\tcurrentLabel.dataIndex = dataIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst dataList = semanticsHelper.getDataList();\n\t\t\tdataList.push(argList.join(\", \"));\n\t\t\tsemanticsHelper.addDataIndex(argList.length);\n\t\t\treturn \"\";\n\t\t},\n\n\t\tDecS(_decLit: Node, _open: Node, num: Node, _comma: Node, format: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"dec$\");\n\t\t\treturn `dec$(${num.eval()}, ${format.eval()})`;\n\t\t},\n\n\t\tDef(_defLit: Node, _fnLit: Node, assign: Node) {\n\t\t\treturn `${assign.eval()}`;\n\t\t},\n\n\t\tDefArgs(_open: Node, arrayIdents: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst argList = arrayIdents.asIteration().children.map(c => c.eval());\n\n\t\t\treturn `(${argList.join(\", \")})`;\n\t\t},\n\n\t\tDefAssign(ident: Node, args: Node, _equal: Node, e: Node) {\n\t\t\tconst fnIdent = semanticsHelper.getVariable(`fn${ident.sourceString}`);\n\n\t\t\tsemanticsHelper.setDefContext(true); // do not create global variables in this context\n\t\t\tconst argStr = args.children.map(c => c.eval()).join(\", \") || \"()\";\n\t\t\tconst defBody = e.eval();\n\t\t\tsemanticsHelper.setDefContext(false);\n\n\t\t\treturn `${fnIdent} = ${argStr} => ${defBody}`;\n\t\t},\n\n\t\tDeg(_degLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.setDeg(true);\n\t\t\treturn `/* deg active */`;\n\t\t},\n\n\t\tDim(_dimLit: Node, arrayIdents: Node) {\n\t\t\tconst argList = arrayIdents.asIteration().children.map(c => c.eval());\n\t\t\tconst results: string[] = [];\n\n\t\t\tfor (const arg of argList) {\n\t\t\t\tconst [ident, ...indices] = arg;\n\t\t\t\tlet createArrStr: string;\n\t\t\t\tif (indices.length > 1) { // multi-dimensional?\n\t\t\t\t\tconst initValStr = ident.endsWith(\"$\") ? ', \"\"' : '';\n\t\t\t\t\tcreateArrStr = `dim([${indices}]${initValStr})`; // indices are automatically joined with comma\n\t\t\t\t\tsemanticsHelper.addInstr(\"dim\");\n\t\t\t\t} else {\n\t\t\t\t\tconst fillStr = ident.endsWith(\"$\") ? `\"\"` : \"0\";\n\t\t\t\t\tcreateArrStr = `new Array(${indices[0]} + 1).fill(${fillStr})`; // +1 because of 0-based index\n\t\t\t\t}\n\t\t\t\tresults.push(`${ident} = ${createArrStr}`);\n\t\t\t}\n\n\t\t\treturn results.join(\"; \");\n\t\t},\n\n\t\tDraw: drawMovePlot,\n\n\t\tDrawr: drawMovePlot,\n\n\t\tEnd(_endLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"end\");\n\t\t\treturn `return end()`;\n\t\t},\n\n\t\tErase(_eraseLit: Node, arrayIdents: Node) { // erase not really needed\n\t\t\tconst argList = arrayIdents.asIteration().children.map(c => c.eval());\n\t\t\tconst results: string[] = [];\n\n\t\t\tfor (const ident of argList) {\n\t\t\t\tconst initValStr = ident.endsWith(\"$\") ? '\"\"' : '0';\n\t\t\t\tresults.push(`${ident} = ${initValStr}`);\n\t\t\t}\n\n\t\t\treturn results.join(\"; \");\n\t\t},\n\n\t\tError(_errorLit: Node, e: Node) {\n\t\t\treturn `throw new Error(${e.eval()})`;\n\t\t},\n\n\t\tExp(_expLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.exp(${e.eval()})`;\n\t\t},\n\n\t\tFix(_fixLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.trunc(${e.eval()})`;\n\t\t},\n\n\t\tAnyFnArgs(_open: Node, args: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval());\n\n\t\t\treturn `(${argList.join(\", \")})`;\n\t\t},\n\n\n\t\tFnIdent(fnIdent: Node, args: Node) {\n\t\t\tconst argStr = args.child(0)?.eval() || \"()\";\n\t\t\treturn `${fnIdent.eval()}${argStr}`;\n\t\t},\n\n\t\tStrFnIdent(fnIdent: Node, args: Node) {\n\t\t\tconst argStr = args.child(0)?.eval() || \"()\";\n\t\t\treturn `${fnIdent.eval()}${argStr}`;\n\t\t},\n\n\t\tFor(_forLit: Node, variable: Node, _eqSign: Node, start: Node, _dirLit: Node, end: Node, _stepLit: Node, step: Node) {\n\t\t\tconst varExp = variable.eval();\n\t\t\tconst startExp = start.eval();\n\t\t\tconst endExp = end.eval();\n\t\t\tconst stepExp = step.child(0)?.eval() || \"1\";\n\n\t\t\tconst stepAsNum = Number(stepExp);\n\n\t\t\tlet cmpSt = \"\";\n\t\t\tif (isNaN(stepAsNum)) {\n\t\t\t\tcmpSt = `${stepExp} >= 0 ? ${varExp} <= ${endExp} : ${varExp} >= ${endExp}`\n\t\t\t} else {\n\t\t\t\tcmpSt = stepExp >= 0 ? `${varExp} <= ${endExp}` : `${varExp} >= ${endExp}`;\n\t\t\t}\n\n\t\t\tsemanticsHelper.nextIndentAdd(2);\n\t\t\tconst result = `for (${varExp} = ${startExp}; ${cmpSt}; ${varExp} += ${stepExp}) {`;\n\n\t\t\treturn result;\n\t\t},\n\n\t\tFrame(_frameLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"frame\");\n\t\t\treturn `await frame()`;\n\t\t},\n\n\t\tGosub(_gosubLit: Node, e: Node) {\n\t\t\tconst labelStr = e.sourceString;\n\t\t\tsemanticsHelper.addGosubLabel(labelStr);\n\n\t\t\treturn `_${labelStr}()`;\n\t\t},\n\n\t\tGraphicsPen(_graphicsLit: Node, _penLit: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"graphicsPen\");\n\t\t\treturn `graphicsPen(${e.eval()})`;\n\t\t},\n\n\t\tHexS(_hexLit: Node, _open: Node, e: Node, _comma: Node, n: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"hex$\");\n\t\t\tconst pad = n.child(0)?.eval();\n\t\t\treturn pad !== undefined ? `hex$(${e.eval()}, ${pad})` : `hex$(${e.eval()})`\n\t\t},\n\n\t\tIf(_iflit: Node, condExp: Node, _thenLit: Node, thenStat: Node, elseLit: Node, elseStat: Node) {\n\t\t\tconst initialIndent = semanticsHelper.getIndentStr();\n\t\t\tsemanticsHelper.addIndent(2);\n\t\t\tconst increasedIndent = semanticsHelper.getIndentStr();\n\n\t\t\tconst cond = condExp.eval();\n\t\t\tconst thSt = thenStat.eval();\n\n\t\t\tlet result = `if (${cond}) {\\n${increasedIndent}${thSt}\\n${initialIndent}}`; // put in newlines to also allow line comments\n\t\t\tif (elseLit.sourceString) {\n\t\t\t\tconst elseSt = evalChildren(elseStat.children).join('; ');\n\t\t\t\tresult += ` else {\\n${increasedIndent}${elseSt}\\n${initialIndent}}`;\n\t\t\t}\n\n\t\t\tsemanticsHelper.addIndent(-2);\n\t\t\treturn result;\n\t\t},\n\n\t\tInput(_inputLit: Node, message: Node, _semi: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"input\");\n\n\t\t\tconst msgStr = message.sourceString.replace(/\\s*[;,]$/, \"\");\n\t\t\tconst ident = e.eval();\n\t\t\tconst isNumStr = ident.includes(\"$\") ? \"\" : \", true\";\n\n\t\t\treturn `${ident} = await input(${msgStr}${isNumStr})`;\n\t\t},\n\n\t\tInstr_noLen(_instrLit: Node, _open: Node, e1: Node, _comma: Node, e2: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `((${e1.eval()}).indexOf(${e2.eval()}) + 1)`;\n\t\t},\n\n\t\tInstr_len(_instrLit: Node, _open: Node, len: Node, _comma1: Node, e1: Node, _comma2: Node, e2: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `((${e1.eval()}).indexOf(${e2.eval()}, ${len.eval()} - 1) + 1)`;\n\t\t},\n\n\t\tInt(_intLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.floor(${e.eval()})`;\n\t\t},\n\n\t\tLeftS(_leftLit: Node, _open: Node, e1: Node, _comma: Node, e2: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e1.eval()}).slice(0, ${e2.eval()})`;\n\t\t},\n\n\t\tLen(_lenLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()}).length`;\n\t\t},\n\n\t\tLog(_logLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.log(${e.eval()})`;\n\t\t},\n\n\t\tLog10(_log10Lit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.log10(${e.eval()})`;\n\t\t},\n\n\t\tLowerS(_lowerLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()}).toLowerCase()`;\n\t\t},\n\n\t\tMax(_maxLit: Node, _open: Node, args: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval()); // see also: ArrayArgs\n\t\t\treturn `Math.max(${argList})`;\n\t\t},\n\n\t\tMidS(_midLit: Node, _open: Node, e1: Node, _comma1: Node, e2: Node, _comma2: Node, e3: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst length = e3.child(0)?.eval();\n\t\t\tconst lengthStr = length === undefined ? \"\" : `, ${length}`;\n\t\t\treturn `(${e1.eval()}).substr(${e2.eval()} - 1${lengthStr})`;\n\t\t},\n\n\t\tMidSAssign(_midLit: Node, _open: Node, ident: Node, _comma1: Node, e2: Node, _comma2: Node, e3: Node, _close: Node, _op: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"mid$Assign\");\n\n\t\t\tconst variableName = ident.sourceString;\n\t\t\tconst resolvedVariableName = semanticsHelper.getVariable(variableName);\n\t\t\tconst start = e2.eval();\n\t\t\tconst newString = e.eval();\n\t\t\tconst length = e3.child(0)?.eval(); // also undefined possible\n\n\t\t\treturn `${resolvedVariableName} = mid$Assign(${resolvedVariableName}, ${start}, ${newString}, ${length})`;\n\t\t},\n\n\t\tMin(_minLit: Node, _open: Node, args: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval()); // see also: ArrayArgs\n\t\t\treturn `Math.min(${argList})`;\n\t\t},\n\n\t\tMode(_modeLit: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"mode\");\n\t\t\treturn `mode(${e.eval()})`;\n\t\t},\n\n\t\tMove: drawMovePlot,\n\n\t\tMover: drawMovePlot,\n\n\t\tNext(_nextLit: Node, variables: Node) {\n\t\t\tconst argList = variables.asIteration().children.map(c => c.eval());\n\t\t\tif (!argList.length) {\n\t\t\t\targList.push(\"_any\");\n\t\t\t}\n\t\t\tsemanticsHelper.addIndent(-2 * argList.length);\n\t\t\treturn '} '.repeat(argList.length).slice(0, -1);\n\t\t},\n\n\t\tOn(_nLit: Node, e1: Node, _gosubLit: Node, args: Node) {\n\t\t\tconst index = e1.eval();\n\t\t\tconst argList = args.asIteration().children.map(c => c.sourceString);\n\n\t\t\tfor (let i = 0; i < argList.length; i += 1) {\n\t\t\t\tsemanticsHelper.addGosubLabel(argList[i]);\n\t\t\t}\n\n\t\t\treturn `[${argList.map((label) => `_${label}`).join(\",\")}]?.[${index} - 1]()`; // 1-based index\n\t\t},\n\n\t\tPaper(_paperLit: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"paper\");\n\t\t\treturn `paper(${e.eval()})`;\n\t\t},\n\n\t\tPen(_penLit: Node, e: Node) {\n\t\t\tsemanticsHelper.addInstr(\"pen\");\n\t\t\treturn `pen(${e.eval()})`;\n\t\t},\n\n\t\tPi(_piLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn \"Math.PI\";\n\t\t},\n\n\t\tPlot: drawMovePlot,\n\n\t\tPlotr: drawMovePlot,\n\n\t\tPrintArg_strCmp(_cmp: Node, args: Node) {\n\t\t\tconst paramStr = args.children[0].eval();\n\t\t\treturn paramStr;\n\t\t},\n\n\t\tPrintArg_usingNum(_printLit: Node, format: Node, _semi: Node, numArgs: Node) {\n\t\t\tsemanticsHelper.addInstr(\"dec$\");\n\t\t\tconst formatStr = format.eval();\n\t\t\tconst argList = numArgs.asIteration().children.map(c => c.eval());\n\t\t\tconst paramStr = argList.map((arg) => `dec$(${arg}, ${formatStr})`).join(', ');\n\t\t\treturn paramStr;\n\t\t},\n\n\t\tPrint(_printLit: Node, args: Node, semi: Node) {\n\t\t\tsemanticsHelper.addInstr(\"print\");\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval());\n\t\t\tconst paramStr = argList.join(', ') || \"\";\n\n\t\t\tlet newlineStr = \"\";\n\t\t\tif (!semi.sourceString) {\n\t\t\t\tnewlineStr = paramStr ? `, \"\\\\n\"` : `\"\\\\n\"`;\n\t\t\t}\n\t\t\treturn `print(${paramStr}${newlineStr})`;\n\t\t},\n\n\t\tRad(_radLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.setDeg(false);\n\t\t\treturn `/* rad active */`;\n\t\t},\n\n\t\tRead(_readlit: Node, args: Node) {\n\t\t\tsemanticsHelper.addInstr(\"read\");\n\t\t\tconst argList = args.asIteration().children.map(c => c.eval());\n\t\t\tconst results = argList.map(identifier => `${identifier} = read()`);\n\t\t\treturn results.join(\"; \");\n\t\t},\n\n\t\tRem(_remLit: Node, remain: Node) {\n\t\t\treturn `// ${remain.sourceString}`;\n\t\t},\n\n\t\tRestore(_restoreLit: Node, e: Node) {\n\t\t\tconst labelStr = e.sourceString || \"0\";\n\t\t\tsemanticsHelper.addRestoreLabel(labelStr);\n\n\t\t\tsemanticsHelper.addInstr(\"restore\");\n\t\t\treturn `restore(${labelStr})`;\n\t\t},\n\n\t\tReturn(_returnLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn \"return\";\n\t\t},\n\n\t\tRightS(_rightLit: Node, _open: Node, e1: Node, _comma: Node, e2: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst str = e1.eval();\n\t\t\tconst len = e2.eval();\n\t\t\treturn `(${str}).substring((${str}).length - (${len}))`;\n\t\t},\n\n\t\tRnd(_rndLit: Node, _open: Node, _e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\t// args are ignored\n\t\t\treturn `Math.random()`;\n\t\t},\n\n\t\tRound(_roundLit: Node, _open: Node, value: Node, _comma: Node, decimals: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst decimalPlaces = decimals.child(0)?.eval();\n\t\t\tif (decimalPlaces) {\n\t\t\t\tsemanticsHelper.addInstr(\"round\");\n\t\t\t\treturn `round(${value.eval()}, ${decimalPlaces})`;\n\t\t\t}\n\t\t\treturn `Math.round(${value.eval()})`; // common round without decimals places\n\t\t\t// A better way to avoid rounding errors: https://www.jacklmoore.com/notes/rounding-in-javascript\n\t\t},\n\n\t\tSgn(_sgnLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.sign(${e.eval()})`;\n\t\t},\n\n\t\tSin: cosSinTan,\n\n\t\tSpaceS(_stringLit: Node, _open: Node, len: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `\" \".repeat(${len.eval()})`;\n\t\t},\n\n\t\tSqr(_sqrLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `Math.sqrt(${e.eval()})`;\n\t\t},\n\n\t\tStop(_stopLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"stop\");\n\t\t\treturn `return stop()`;\n\t\t},\n\n\t\tStrS(_strLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst arg = e.eval();\n\n\t\t\tif (isNaN(Number(arg))) {\n\t\t\t\tsemanticsHelper.addInstr(\"str$\");\n\t\t\t\treturn `str$(${arg})`;\n\t\t\t}\n\t\t\t// simplify if we know at compile time that arg is a positive number\n\t\t\treturn arg >= 0 ? `(\" \" + String(${arg}))` : `String(${arg})`;\n\t\t},\n\n\t\tStringS_str(_stringLit: Node, _open: Node, len: Node, _commaLit: Node, chr: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\t// Note: we do not use charAt(0) to get just one char\n\t\t\treturn `(${chr.eval()}).repeat(${len.eval()})`;\n\t\t},\n\n\t\tStringS_num(_stringLit: Node, _open: Node, len: Node, _commaLit: Node, num: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `String.fromCharCode(${num.eval()}).repeat(${len.eval()})`;\n\t\t},\n\n\t\tTan: cosSinTan,\n\n\t\tTime(_timeLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addInstr(\"time\");\n\t\t\treturn `time()`;\n\t\t},\n\n\t\tUpperS(_upperLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()}).toUpperCase()`;\n\t\t},\n\n\t\tVal(_upperLit: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tconst numPattern = /^\"[\\\\+\\\\-]?\\d*\\.?\\d+(?:[Ee][\\\\+\\\\-]?\\d+)?\"$/;\n\t\t\tconst numStr = String(e.eval());\n\n\t\t\tif (numPattern.test(numStr)) {\n\t\t\t\treturn `Number(${numStr})`; // for non-hex/bin number strings we can use this simple version\n\t\t\t}\n\t\t\tsemanticsHelper.addInstr(\"val\");\n\t\t\treturn `val(${numStr})`;\n\t\t},\n\n\t\tWend(_wendLit: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\tsemanticsHelper.addIndent(-2);\n\t\t\treturn '}';\n\t\t},\n\n\t\tWhile(_whileLit: Node, e: Node) {\n\t\t\tconst cond = e.eval();\n\t\t\tsemanticsHelper.nextIndentAdd(2);\n\t\t\treturn `while (${cond}) {`;\n\t\t},\n\n\t\tXorExp_xor(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} ^ ${b.eval()}`;\n\t\t},\n\n\t\tOrExp_or(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} | ${b.eval()}`;\n\t\t},\n\n\t\tAndExp_and(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} & ${b.eval()}`;\n\t\t},\n\n\t\tNotExp_not(_op: Node, e: Node) {\n\t\t\treturn `~(${e.eval()})`;\n\t\t},\n\n\t\tCmpExp_eq(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} === ${b.eval()})`; // or -Number(...), or -(...), or: ? -1 : 0\n\t\t},\n\t\tCmpExp_ne(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} !== ${b.eval()})`;\n\t\t},\n\t\tCmpExp_lt(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} < ${b.eval()})`;\n\t\t},\n\t\tCmpExp_le(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} <= ${b.eval()})`;\n\t\t},\n\t\tCmpExp_gt(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} > ${b.eval()})`;\n\t\t},\n\t\tCmpExp_ge(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} >= ${b.eval()})`;\n\t\t},\n\n\t\tAddExp_plus(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} + ${b.eval()}`;\n\t\t},\n\t\tAddExp_minus(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} - ${b.eval()}`;\n\t\t},\n\n\t\tModExp_mod(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} % ${b.eval()}`;\n\t\t},\n\n\t\tDivExp_div(a: Node, _op: Node, b: Node) {\n\t\t\treturn `((${a.eval()} / ${b.eval()}) | 0)`;\n\t\t},\n\n\t\tMulExp_times(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} * ${b.eval()}`;\n\t\t},\n\t\tMulExp_divide(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} / ${b.eval()}`;\n\t\t},\n\n\t\tExpExp_power(a: Node, _: Node, b: Node) {\n\t\t\treturn `Math.pow(${a.eval()}, ${b.eval()})`;\n\t\t},\n\n\t\tPriExp_paren(_open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()})`;\n\t\t},\n\t\tPriExp_pos(_op: Node, e: Node) {\n\t\t\treturn `+${e.eval()}`;\n\t\t},\n\t\tPriExp_neg(_op: Node, e: Node) {\n\t\t\treturn `-${e.eval()}`;\n\t\t},\n\n\t\tStrCmpExp_eq(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} === ${b.eval()})`;\n\t\t},\n\t\tStrCmpExp_ne(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} !== ${b.eval()})`;\n\t\t},\n\t\tStrCmpExp_lt(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} < ${b.eval()})`;\n\t\t},\n\t\tStrCmpExp_le(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} <= ${b.eval()})`;\n\t\t},\n\t\tStrCmpExp_gt(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} > ${b.eval()})`;\n\t\t},\n\t\tStrCmpExp_ge(a: Node, _op: Node, b: Node) {\n\t\t\treturn `-(${a.eval()} >= ${b.eval()})`;\n\t\t},\n\n\t\tStrAddExp_plus(a: Node, _op: Node, b: Node) {\n\t\t\treturn `${a.eval()} + ${b.eval()}`;\n\t\t},\n\n\t\tStrPriExp_paren(_open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `(${e.eval()})`;\n\t\t},\n\n\t\tArrayArgs(args: Node) {\n\t\t\treturn args.asIteration().children.map(c => String(c.eval()));\n\t\t},\n\n\t\tArrayIdent(ident: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `${ident.eval()}[${e.eval().join(\"][\")}]`;\n\t\t},\n\n\t\tStrArrayIdent(ident: Node, _open: Node, e: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `${ident.eval()}[${e.eval().join(\"][\")}]`;\n\t\t},\n\n\t\tDimArrayIdent(ident: Node, _open: Node, indices: Node, _close: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn [ident.eval(), ...indices.eval()];\n\t\t},\n\n\t\tdecimalValue(value: Node) {\n\t\t\treturn value.sourceString;\n\t\t},\n\n\t\thexValue(_prefix: Node, value: Node) {\n\t\t\treturn `0x${value.sourceString}`;\n\t\t},\n\n\t\tbinaryValue(_prefix: Node, value: Node) {\n\t\t\treturn `0b${value.sourceString}`;\n\t\t},\n\n\t\tsignedDecimal(sign: Node, value: Node) {\n\t\t\treturn `${sign.sourceString}${value.sourceString}`;\n\t\t},\n\n\t\tstring(_quote1: Node, e: Node, _quote2: Node) { // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\treturn `\"${e.sourceString}\"`;\n\t\t},\n\n\t\tident(ident: Node) {\n\t\t\tconst name = ident.sourceString;\n\t\t\treturn semanticsHelper.getVariable(name);\n\t\t},\n\n\t\tfnIdent(fn: Node, ident: Node) {\n\t\t\tconst name = fn.sourceString + ident.sourceString;\n\t\t\treturn semanticsHelper.getVariable(name);\n\t\t},\n\n\t\tstrIdent(ident: Node, typeSuffix: Node) {\n\t\t\tconst name = ident.sourceString + typeSuffix.sourceString;\n\t\t\treturn semanticsHelper.getVariable(name);\n\t\t},\n\n\t\tstrFnIdent(fn: Node, ident: Node, typeSuffix: Node) {\n\t\t\tconst name = fn.sourceString + ident.sourceString + typeSuffix.sourceString;\n\t\t\treturn semanticsHelper.getVariable(name);\n\t\t}\n\t};\n\treturn semantics;\n}\n\n\nexport class Semantics {\n\tprivate lineIndex = 0;\n\n\tprivate indent = 0;\n\tprivate indentAdd = 0;\n\n\tprivate readonly variables: Record<string, number> = {};\n\n\tprivate readonly definedLabels: DefinedLabelEntryType[] = [];\n\tprivate readonly gosubLabels: Record<string, GosubLabelEntryType> = {};\n\n\tprivate readonly dataList: (string | number)[] = [];\n\tprivate dataIndex = 0;\n\tprivate readonly restoreMap: Record<string, number> = {};\n\n\tprivate static readonly reJsKeyword = /^(arguments|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/;\n\n\tprivate readonly instrMap: Record<string, number> = {};\n\n\tprivate isDeg = false;\n\tprivate isDefContext = false;\n\n\tprivate addIndent(num: number) {\n\t\tif (num < 0) {\n\t\t\tthis.applyNextIndent();\n\t\t}\n\t\tthis.indent += num;\n\t\treturn this.indent;\n\t}\n\n\tprivate setIndent(indent: number) {\n\t\tthis.indent = indent;\n\t}\n\n\tprivate getIndent() {\n\t\treturn this.indent;\n\t}\n\n\tprivate getIndentStr() {\n\t\tif (this.indent < 0) {\n\t\t\tconsole.error(\"getIndentStr: lineIndex=\", this.lineIndex, \", indent=\", this.indent);\n\t\t\treturn \"\";\n\t\t}\n\t\treturn \" \".repeat(this.indent);\n\t}\n\n\tprivate applyNextIndent() {\n\t\tthis.indent += this.indentAdd;\n\t\tthis.indentAdd = 0;\n\t}\n\n\tprivate nextIndentAdd(num: number) {\n\t\tthis.indentAdd += num;\n\t}\n\n\tprivate addDataIndex(count: number) {\n\t\treturn this.dataIndex += count;\n\t}\n\n\tprivate getDataIndex() {\n\t\treturn this.dataIndex;\n\t}\n\n\tprivate addDefinedLabel(label: string, line: number) {\n\t\tthis.definedLabels.push({\n\t\t\tlabel,\n\t\t\tfirst: line,\n\t\t\tlast: -1,\n\t\t\tdataIndex: -1\n\t\t});\n\t}\n\n\tprivate getDefinedLabels() {\n\t\treturn this.definedLabels;\n\t}\n\n\tprivate addGosubLabel(label: string) {\n\t\tthis.gosubLabels[label] = this.gosubLabels[label] || {\n\t\t\tcount: 0\n\t\t};\n\t\tthis.gosubLabels[label].count = (this.gosubLabels[label].count || 0) + 1;\n\t}\n\n\tprivate getGosubLabels() {\n\t\treturn this.gosubLabels;\n\t}\n\n\tprivate getInstrMap() {\n\t\treturn this.instrMap;\n\t}\n\n\tprivate addInstr(name: string) {\n\t\tthis.instrMap[name] = (this.instrMap[name] || 0) + 1;\n\t\treturn this.instrMap[name];\n\t}\n\n\tprivate getVariables() {\n\t\treturn Object.keys(this.variables);\n\t}\n\n\tprivate getVariable(name: string) {\n\t\tname = name.toLowerCase();\n\t\tif (Semantics.reJsKeyword.test(name)) {\n\t\t\tname = `_${name}`;\n\t\t}\n\n\t\tif (!this.isDefContext) {\n\t\t\tthis.variables[name] = (this.variables[name] || 0) + 1;\n\t\t}\n\t\treturn name;\n\t}\n\n\tprivate setDefContext(isDef: boolean) {\n\t\tthis.isDefContext = isDef;\n\t}\n\n\tprivate static deleteAllItems(items: Record<string, unknown>) {\n\t\tfor (const name in items) {\n\t\t\tdelete items[name];\n\t\t}\n\t}\n\n\tprivate incrementLineIndex() {\n\t\tthis.lineIndex += 1;\n\t\treturn this.lineIndex;\n\t}\n\n\tprivate getRestoreMap() {\n\t\treturn this.restoreMap;\n\t}\n\n\tprivate addRestoreLabel(label: string) {\n\t\tthis.restoreMap[label] = -1;\n\t}\n\n\tprivate getDataList() {\n\t\treturn this.dataList;\n\t}\n\n\tpublic resetParser() {\n\t\tthis.lineIndex = 0;\n\t\tthis.indent = 0;\n\t\tthis.indentAdd = 0;\n\t\tSemantics.deleteAllItems(this.variables);\n\t\tthis.definedLabels.length = 0;\n\t\tSemantics.deleteAllItems(this.gosubLabels);\n\t\tthis.dataList.length = 0;\n\t\tthis.dataIndex = 0;\n\t\tSemantics.deleteAllItems(this.restoreMap);\n\t\tSemantics.deleteAllItems(this.instrMap);\n\t\tthis.isDeg = false;\n\t\tthis.isDefContext = false;\n\t}\n\n\tpublic getSemantics() {\n\t\tconst semanticsHelper: SemanticsHelper = {\n\t\t\taddDataIndex: (count: number) => this.addDataIndex(count),\n\t\t\taddDefinedLabel: (label: string, line: number) => this.addDefinedLabel(label, line),\n\t\t\taddGosubLabel: (label: string) => this.addGosubLabel(label),\n\t\t\taddIndent: (num: number) => this.addIndent(num),\n\t\t\taddInstr: (name: string) => this.addInstr(name),\n\t\t\taddRestoreLabel: (label: string) => this.addRestoreLabel(label),\n\t\t\tapplyNextIndent: () => this.applyNextIndent(),\n\t\t\tgetDataIndex: () => this.getDataIndex(),\n\t\t\tgetDataList: () => this.getDataList(),\n\t\t\tgetDefinedLabels: () => this.getDefinedLabels(),\n\t\t\tgetGosubLabels: () => this.getGosubLabels(),\n\t\t\tgetIndent: () => this.getIndent(),\n\t\t\tgetIndentStr: () => this.getIndentStr(),\n\t\t\tgetInstrMap: () => this.getInstrMap(),\n\t\t\tgetRestoreMap: () => this.getRestoreMap(),\n\t\t\tgetVariable: (name: string) => this.getVariable(name),\n\t\t\tgetVariables: () => this.getVariables(),\n\t\t\tincrementLineIndex: () => this.incrementLineIndex(),\n\t\t\tnextIndentAdd: (num: number) => this.nextIndentAdd(num),\n\t\t\tsetIndent: (indent: number) => this.setIndent(indent),\n\t\t\tsetDeg: (isDeg: boolean) => this.isDeg = isDeg,\n\t\t\tgetDeg: () => this.isDeg,\n\t\t\tsetDefContext: (isDef: boolean) => this.setDefContext(isDef)\n\t\t};\n\t\treturn getSemantics(semanticsHelper);\n\t}\n}\n","// Core.ts\n\nimport type { ConfigEntryType, ConfigType, ICore, IVm, IVmAdmin } from \"./Interfaces\";\nimport { Parser } from \"./Parser\";\nimport { arithmetic } from \"./arithmetic\";\nimport { Semantics } from \"./Semantics\";\n\nfunction fnHereDoc(fn: () => void) {\n\treturn String(fn).replace(/^[^/]+\\/\\*\\S*/, \"\").replace(/\\*\\/[^/]+$/, \"\");\n}\n\nexport class Core implements ICore {\n\tprivate config: ConfigType;\n\tprivate vm?: IVmAdmin;\n\tprivate readonly semantics = new Semantics();\n\n\tprivate readonly examples: Record<string, string> = {};\n\n\tprivate arithmeticParser: Parser | undefined;\n\n\tconstructor(defaultConfig: ConfigType) {\n\t\tthis.config = defaultConfig;\n\t}\n\n\tpublic setVm(vm: IVmAdmin) {\n\t\tthis.vm = vm;\n\t}\n\n\tprivate onCheckSyntax = async (_s: string) => \"\"; // eslint-disable-line @typescript-eslint/no-unused-vars\n\n\tpublic getConfigObject() {\n\t\treturn this.config;\n\t}\n\n\t/*\n\tpublic getConfigAsMap() {\n\t\treturn this.config as Record<string, ConfigEntryType>;\n\t}\n\t*/\n\n\tpublic getExampleObject() {\n\t\treturn this.examples;\n\t}\n\n\tpublic setExample(name: string, script: string) {\n\t\tthis.examples[name] = script;\n\t}\n\n\tpublic getExample(name: string) {\n\t\treturn this.examples[name];\n\t}\n\n\tpublic setOnCheckSyntax(fn: (s: string) => Promise<string>) {\n\t\tthis.onCheckSyntax = fn;\n\t}\n\n\n\tpublic compileScript(script: string) {\n\t\tif (!this.arithmeticParser) {\n\t\t\tconst semantics = this.semantics.getSemantics();\n\t\t\tif (this.config.grammar === \"strict\") {\n\t\t\t\tconst basicParser = new Parser(arithmetic.basicGrammar, semantics);\n\t\t\t\tthis.arithmeticParser = new Parser(arithmetic.strictGrammar, semantics, basicParser);\n\t\t\t} else {\n\t\t\t\tthis.arithmeticParser = new Parser(arithmetic.basicGrammar, semantics);\n\t\t\t}\n\t\t}\n\t\tthis.semantics.resetParser();\n\n\t\treturn this.arithmeticParser.parseAndEval(script);\n\t}\n\n\tasync executeScript(compiledScript: string) {\n\t\tthis.vm?.setOutput(\"\");\n\n\t\tif (compiledScript.startsWith(\"ERROR\")) {\n\t\t\treturn \"ERROR\";\n\t\t}\n\n\t\tconst syntaxError = await this.onCheckSyntax(compiledScript);\n\t\tif (syntaxError) {\n\t\t\tthis.vm?.cls();\n\t\t\treturn \"ERROR: \" + syntaxError;\n\t\t}\n\n\t\ttry {\n\t\t\tconst fnScript = new Function(\"_o\", compiledScript);\n\t\t\tconst result = fnScript(this.vm as IVm) || \"\";\n\n\t\t\tlet output: string;\n\t\t\tif (result instanceof Promise) {\n\t\t\t\toutput = await result;\n\t\t\t\tthis.vm?.flush();\n\t\t\t\toutput = this.vm?.getOutput() || \"\";\n\t\t\t} else {\n\t\t\t\tthis.vm?.flush();\n\t\t\t\toutput = this.vm?.getOutput() || \"\";\n\t\t\t}\n\t\t\treturn output;\n\t\t} catch (error) {\n\t\t\tlet errorMessage = \"ERROR: \";\n\t\t\tif (error instanceof Error) {\n\t\t\t\terrorMessage += this.vm?.getOutput() + \"\\n\" + String(error);\n\n\t\t\t\tconst anyErr = error as unknown as Record<string, number>;\n\t\t\t\tconst lineNumber = anyErr.lineNumber; // only on FireFox\n\t\t\t\tconst columnNumber = anyErr.columnNumber; // only on FireFox\n\n\t\t\t\tif (lineNumber || columnNumber) {\n\t\t\t\t\tconst errLine = lineNumber - 2; // lineNumber -2 because of anonymous function added by new Function() constructor\n\t\t\t\t\terrorMessage += ` (Line ${errLine}, column ${columnNumber})`;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terrorMessage += \"unknown\";\n\t\t\t}\n\t\t\treturn errorMessage;\n\t\t}\n\t}\n\n\tpublic addItem = (key: string, input: (string | (() => void))) => { // need property function becase we need bound \"this\"\n\t\tlet inputString = (typeof input !== \"string\") ? fnHereDoc(input) : input;\n\t\tinputString = inputString.replace(/^\\n/, \"\").replace(/\\n$/, \"\"); // remove preceding and trailing newlines\n\t\t// beware of data files ending with newlines! (do not use trimEnd)\n\t\n\t\tif (!key) { // maybe \"\"\n\t\t\tconst firstLine = inputString.slice(0, inputString.indexOf(\"\\n\"));\n\t\t\tconst matches = firstLine.match(/^\\s*\\d*\\s*(?:REM|rem|')\\s*(\\w+)/);\n\t\t\tkey = matches ? matches[1] : \"unknown\";\n\t\t}\n\t\n\t\tthis.setExample(key, inputString);\n\t};\n\t\n\tpublic parseArgs(args: string[], config: Record<string, ConfigEntryType>) {\n\t\tfor (let i = 0; i < args.length; i += 1) {\n\t\t\tconst [name, ...valueParts] = args[i].split(\"=\"),\n\t\t\t\tnameType = typeof config[name];\n\t\n\t\t\tlet value: ConfigEntryType = valueParts.join(\"=\");\n\t\t\tif (value !== undefined) {\n\t\t\t\tif (nameType === \"boolean\") {\n\t\t\t\t\tvalue = (value === \"true\");\n\t\t\t\t} else if (nameType === \"number\") {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t}\n\t\t\t\tconfig[name] = value;\n\t\t\t}\n\t\t}\n\t\treturn config;\n\t}\n}\n","// NodeParts.ts\n// node.js specific parts\n\nimport { ICore, IVm } from \"./Interfaces\";\n\ninterface NodeFs {\n    promises: {\n        readFile(name: string, encoding: string): Promise<string>\n    };\n}\n\ninterface NodeVm {\n    runInNewContext: (code: string) => string;\n}\n\ndeclare function require(name: string): NodeModule | NodeFs | NodeVm;\n\n\ninterface DummyVm extends IVm {\n\t_output: string;\n\tdebug(...args: (string | number)[]): void;\n  }\n\n// The functions from dummyVm will be stringified in the putScriptInFrame function\nconst dummyVm: DummyVm = {\n\t_output: \"\",\n\tdebug(..._args: (string | number)[]) { /* console.debug(...args); */ }, // eslint-disable-line @typescript-eslint/no-unused-vars\n\tcls() {},\n\tdrawMovePlot(type: string, x: number, y: number) { this.debug(\"drawMovePlot:\", type, x, y); },\t\n\tflush() { if (this._output) { console.log(this._output); this._output = \"\"; } },\n\tgraphicsPen(num: number) { this.debug(\"graphicsPen:\", num); },\n\tmode(num: number) { this.debug(\"mode:\", num); },\n\tpaper(num: number) { this.debug(\"paper:\", num); },\n\tpen(num: number) { this.debug(\"pen:\", num); },\n\tprint(...args: (string | number)[]) { this._output += args.join(''); },\n\tprompt(msg: string) { console.log(msg); return \"\"; }\n};\n\nexport class NodeParts {\n\tprivate core: ICore;\n    private nodeFs?: NodeFs;\n    private modulePath: string;\n    private nodeVm?: NodeVm;\n\n    constructor(core: ICore) {\n\t\tthis.core = core;\n        this.modulePath = \"\";\n    }\n\n    private async nodeReadFile(name: string): Promise<string> {\n        if (!this.nodeFs) {\n            this.nodeFs = require(\"fs\") as NodeFs;\n        }\n\n        if (!module) {\n            const module = require(\"module\") as NodeModule;\n            this.modulePath = module.path || \"\";\n\n            if (!this.modulePath) {\n                console.warn(\"nodeReadFile: Cannot determine module path\");\n            }\n        }\n        try {\n            return await this.nodeFs.promises.readFile(name, \"utf8\");\n        } catch (error) {\n            console.error(`Error reading file ${name}:`, String(error));\n            throw error;\n        }\n    }\n\n    private keepRunning(fn: () => void, timeout: number) {\n        const timerId = setTimeout(() => { }, timeout);\n        return (async () => {\n            fn();\n            clearTimeout(timerId);\n        })();\n    }\n\n    private putScriptInFrame(script: string) {\n\t\tconst dummyFunctions = Object.values(dummyVm).filter((value) => value).map((value) => `${value}`).join(\",\\n  \");\n\t\tconst result =\n`(function(_o) {\n\t${script}\n})({\n\t_output: \"\",\n\t${dummyFunctions}\n});`\n\t\treturn result;\n\t}\n\n    private nodeCheckSyntax(script: string) {\n        if (!this.nodeVm) {\n            this.nodeVm = require(\"vm\") as NodeVm;\n        }\n\n        const describeError = (stack: string) => {\n            const match = stack.match(/^\\D+(\\d+)\\n(.+\\n( *)\\^+)\\n\\n(SyntaxError.+)/);\n            if (!match) {\n                return \"\"; // parse successful?\n            }\n            const [, linenoPlusOne, caretString, colSpaces, message] = match;\n            const lineno = Number(linenoPlusOne) - 1;\n            const colno = colSpaces.length + 1;\n            return `Syntax error thrown at: Line ${lineno}, col: ${colno}\\n${caretString}\\n${message}`;\n        };\n        let output = \"\";\n\n        try {\n            const scriptInFrame = this.putScriptInFrame(script);\n            this.nodeVm.runInNewContext(`throw new Error();\\n${scriptInFrame}`);\n        }\n        catch (err) { // Error-like object\n            const stack = (err as Error).stack;\n            if (stack) {\n                output = describeError(stack);\n            }\n        }\n        return output;\n    }\n\n    private start(input: string) {\n\t\tconst core = this.core\n        const actionConfig = core.getConfigObject().action;\n        if (input !== \"\") {\n            core.setOnCheckSyntax((s: string) => Promise.resolve(this.nodeCheckSyntax(s)));\n\n            const compiledScript = actionConfig.includes(\"compile\") ? core.compileScript(input) : input;\n\n            if (compiledScript.startsWith(\"ERROR:\")) {\n                console.error(compiledScript);\n                return;\n            }\n\n            if (actionConfig.includes(\"run\")) {\n                return this.keepRunning(async () => {\n                    const output = await core.executeScript(compiledScript);\n                    console.log(output.replace(/\\n$/, \"\"));\n                }, 5000);\n            } else {\n                const inFrame = this.putScriptInFrame(compiledScript);\n                console.log(inFrame);\n            }\n        } else {\n            console.log(\"No input\");\n        }\n    }\n\n    public async nodeMain() {\n        const core = this.core;\n\n        const config = this.core.getConfigObject();\n        let input = config.input || \"\";\n\n        if (config.fileName) {\n            return this.keepRunning(async () => {\n                input = await this.nodeReadFile(config.fileName);\n                this.start(input);\n            }, 5000);\n        } else {\n            if (config.example) {\n                return this.keepRunning(async () => {\n                    const jsFile = await this.nodeReadFile(\"./dist/examples/examples.js\");\n                    const fnScript = new Function(\"cpcBasic\", jsFile);\n                    fnScript({\n                        addItem: core.addItem\n                    });\n\n                    const exampleScript = this.core.getExample(config.example);\n                    if (!exampleScript) {\n                        console.error(`ERROR: Example '${config.example}' not found.`);\n                        return;\n                    }\n                    input = exampleScript;\n                    this.start(input);\n                }, 5000);\n            }\n            this.start(input);\n        }\n    }\n}\n","// BasicVmCore.ts\n\nimport type { IVmAdmin } from \"./Interfaces\";\n\nconst colorsForPens: string[] = [\n    \"#000080\", \"#FFFF00\", \"#00FFFF\", \"#FF0000\", \"#FFFFFF\", \"#000000\", \"#0000FF\", \"#FF00FF\",\n    \"#008080\", \"#808000\", \"#8080FF\", \"#FF8080\", \"#00FF00\", \"#80FF80\", \"#000080\", \"#FF8080\", \"#000080\"\n];\n  \nconst strokeWidthForMode: number[] = [4, 2, 1, 1];\n  \n\nexport class BasicVmCore implements IVmAdmin {\n    private output = \"\";\n    private currPaper = -1;\n    private currPen = -1;\n    private currMode = 2;\n    private graphicsBuffer: string[] = [];\n    private graphicsPathBuffer: string[] = [];\n    private currGraphicsPen = 1;\n    private graphicsX = 0;\n    private graphicsY = 0;\n\n    protected fnOnCls() {\n        // override\n    }\n\n    protected fnOnPrint(_msg: string) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        // override\n    }\n\n    protected fnOnPrompt(_msg: string): string | null { // eslint-disable-line @typescript-eslint/no-unused-vars\n        // override\n        return \"\";\n    }\n\n    protected fnGetPenColor(_num: number) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        // override\n        return \"\";\n    }\n\n    protected fnGetPaperColor(_num: number) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        // override\n        return \"\";\n    }\n\n    protected getColorsForPens() {\n        return colorsForPens;\n    }\n\n    public cls() {\n        this.output = \"\";\n        this.currPaper = -1;\n        this.currPen = -1;\n        this.graphicsBuffer.length = 0;\n        this.graphicsPathBuffer.length = 0;\n        this.currGraphicsPen = -1;\n        this.graphicsX = 0;\n        this.graphicsY = 0;\n        this.fnOnCls();\n    }\n\n\tpublic drawMovePlot(type: string, x: number, y: number) {\n\t\tx = Math.round(x);\n\t\ty = Math.round(y);\n\t\n\t\tconst isAbsolute = type === type.toUpperCase();\n\t\n\t\ty = isAbsolute ? 399 - y : -y;\n\n\t\tconst isPlot = type.toLowerCase() === \"p\";\n\n\t\tconst svgPathCmd = isPlot\n        ? `${isAbsolute ? \"M\" : \"m\"}${x} ${y}h1v1h-1v-1`\n        : `${type}${x} ${y}`;\n\t\n\t\tif (!this.graphicsPathBuffer.length && svgPathCmd[0].toLowerCase() !== \"m\") {\n\t\t\tthis.graphicsPathBuffer.push(`M${this.graphicsX} ${this.graphicsY}`);\n\t\t}\n\t\tthis.graphicsPathBuffer.push(svgPathCmd);\n\n\t\tif (isAbsolute) {\n\t\t\tthis.graphicsX = x;\n\t\t\tthis.graphicsY = y;\n\t\t} else {\n\t\t\tthis.graphicsX += x;\n\t\t\tthis.graphicsY += y;\n\t\t}\n\t}\n\n    private flushGraphicsPath() {\n        if (this.graphicsPathBuffer.length) {\n            this.graphicsBuffer.push(`<path stroke=\"${colorsForPens[this.currGraphicsPen]}\" d=\"${this.graphicsPathBuffer.join(\"\")}\" />`);\n            this.graphicsPathBuffer.length = 0;\n        }\n    }\n\n    public flush() {\n        this.flushGraphicsPath();\n        if (this.graphicsBuffer.length) {\n            this.output += `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 640 400\" stroke-width=\"${strokeWidthForMode[this.currMode]}px\" stroke=\"currentColor\">\\n${this.graphicsBuffer.join(\"\\n\")}\"\\n</svg>\\n`;\n            this.graphicsBuffer.length = 0;\n        }\n        if (this.output) {\n            this.fnOnPrint(this.output);\n            this.output = \"\";\n        }\n    }\n\n    public graphicsPen(num: number) {\n        if (num === this.currGraphicsPen) {\n            return;\n        }\n        this.flushGraphicsPath();\n        this.currGraphicsPen = num;\n    }\n\n    public mode(num: number) {\n        this.currMode = num;\n        this.cls();\n    }\n\n    public paper(n: number) {\n        if (n !== this.currPaper) {\n            this.output += this.fnGetPaperColor(n);\n            this.currPaper = n;\n        }\n    };\n\n    public pen(n: number) {\n        if (n !== this.currPen) {\n            this.output += this.fnGetPenColor(n);\n            this.currPen = n;\n        }\n    }\n\n    public print(...args: string[]) {\n        this.output += args.join('');\n    }\n\n    public prompt(msg: string) {\n        this.flush();\n        return this.fnOnPrompt(msg);\n    };\n\n    public getOutput() {\n\t\treturn this.output;\n\t}\n    public setOutput(str: string) {\n\t\tthis.output = str;\n\t}\n}\n","// BasicVmBrowser.ts\n\nimport { IUI } from \"./Interfaces\";\nimport { BasicVmCore } from \"./BasicVmCore\";\n\nexport class BasicVmBrowser extends BasicVmCore {\n    private readonly ui: IUI;\n    private readonly penColors: string[];\n    private readonly paperColors: string[];\n\n    constructor(ui: IUI) {\n        super();\n        this.ui = ui;\n        const colorsForPens = this.getColorsForPens();\n        this.penColors = ui.getPenColors(colorsForPens);\n        this.paperColors = ui.getPaperColors(colorsForPens);\n    }\n\n    public fnOnCls() {\n        this.ui.setOutputText(\"\");\n    }\n\n    public fnOnPrint(msg: string) {\n        this.ui.addOutputText(msg);\n    }\n\n    public fnOnPrompt(msg: string) {\n        const input = this.ui.prompt(msg)\n        return input;\n    }\n\n    public fnGetPenColor(num: number) {\n        return this.penColors[num];\n    }\n\n    public fnGetPaperColor(num: number) {\n        return this.paperColors[num];\n    }\n}\n","// BasicVmNode.ts\n\nimport { BasicVmCore } from \"./BasicVmCore\";\n\nfunction getAnsiColorsForPens() {\n    return [\n        \"\\x1b[34m\", // Navy\n        \"\\x1b[93m\", // Bright Yellow\n        \"\\x1b[96m\", // Bright Cyan\n        \"\\x1b[91m\", // Bright Red\n        \"\\x1b[97m\", // Bright White\n        \"\\x1b[30m\", // Black\n        \"\\x1b[94m\", // Bright Blue\n        \"\\x1b[95m\", // Bright Magenta\n        \"\\x1b[36m\", // Cyan\n        \"\\x1b[33m\", // Yellow\n        \"\\x1b[94m\", // Pastel Blue (Bright Blue)\n        \"\\x1b[95m\", // Pink (Bright Magenta)\n        \"\\x1b[92m\", // Bright Green\n        \"\\x1b[92m\", // Pastel Green (Bright Green)\n        \"\\x1b[34m\", // Navy (repeated)\n        \"\\x1b[95m\", // Pink (repeated)\n        \"\\x1b[34m\"  // Navy (repeated)\n    ];\n}\n\nfunction getAnsiColorsForPapers() {\n    return [\n        \"\\x1b[44m\", // Navy\n        \"\\x1b[103m\", // Bright Yellow\n        \"\\x1b[106m\", // Bright Cyan\n        \"\\x1b[101m\", // Bright Red\n        \"\\x1b[107m\", // Bright White\n        \"\\x1b[40m\", // Black\n        \"\\x1b[104m\", // Bright Blue\n        \"\\x1b[105m\", // Bright Magenta\n        \"\\x1b[46m\", // Cyan\n        \"\\x1b[43m\", // Yellow\n        \"\\x1b[104m\", // Pastel Blue (Bright Blue)\n        \"\\x1b[105m\", // Pink (Bright Magenta)\n        \"\\x1b[102m\", // Bright Green\n        \"\\x1b[102m\", // Pastel Green (Bright Green)\n        \"\\x1b[44m\", // Navy (repeated)\n        \"\\x1b[105m\", // Pink (repeated)\n        \"\\x1b[44m\"  // Navy (repeated)\n    ];\n}\n\nexport class BasicVmNode extends BasicVmCore {\n    private readonly penColors: string[] = getAnsiColorsForPens();\n    private readonly paperColors: string[] = getAnsiColorsForPapers();\n\n    constructor() {\n        super();\n    }\n\n    public fnOnCls() {\n        console.clear();\n    }\n\n    public fnOnPrint(msg: string) {\n        console.log(msg.replace(/\\n$/, \"\"));\n    }\n\n    public fnOnPrompt(msg: string) { // eslint-disable-line @typescript-eslint/no-unused-vars\n        console.log(msg);\n        return \"\";\n    }\n\n    public fnGetPenColor(num: number) {\n        return this.penColors[num];\n    }\n\n    public fnGetPaperColor(num: number) {\n        return this.paperColors[num];\n    }\n}\n","// main.ts\n//\n// Usage:\n// node dist/locobasic.js [action='compile,run'] [input=<statements>] [example=<name>] [fileName=<file>] [grammar=<name>] [debug=0] [debounceCompile=800] [debounceExecute=400]\n//\n// - Examples for compile and run:\n// node dist/locobasic.js input='PRINT \"Hello!\"'\n// npx ts-node dist/locobasic.js input='PRINT \"Hello!\"'\n// node dist/locobasic.js input=\"?3 + 5 * (2 - 8)\"\n// node dist/locobasic.js example=euler\n// node dist/locobasic.js fileName=dist/examples/example.bas\n// node dist/locobasic.js grammar=\"strict\" input='a$=\"Bob\":PRINT \"Hello \";a$;\"!\"'\n//\n// - Example for compile only:\n// node dist/locobasic.js action='compile' input='PRINT \"Hello!\"' > hello1.js\n//   [Windows: Use node.exe when redirecting into a file; or npx ts-node ...]\n// node hello1.js\n// [When using async functions like FRAME or INPUT, redirect to hello1.mjs]\n//\n\nimport type { ICore, IUI } from \"./Interfaces\";\nimport { Core } from \"./Core\";\nimport { NodeParts } from \"./NodeParts\";\nimport { BasicVmBrowser } from \"./BasicVmBrowser\";\nimport { BasicVmNode } from \"./BasicVmNode\";\n\ninterface WindowProperties {\n\tcpcBasic: {\n\t\taddItem: (key: string, input: string | (() => void)) => void\n\t};\n\tlocation: {\n\t\tsearch: string\n\t};\n\tlocobasicUI: {\n\t\tUI: {\n\t\t\tnew(core: ICore): IUI\n\t\t}\n\t};\n\tonload: (event: Event) => void;\n\tprompt: (msg: string) => string;\n}\n\ndeclare const window: WindowProperties | undefined;\n\nconst core: ICore = new Core({\n\taction: \"compile,run\",\n\tdebug: 0,\n\texample: \"\",\n\tfileName: \"\",\n\tgrammar: \"basic\", // basic or strict\n\tinput: \"\",\n\tdebounceCompile: 800,\n\tdebounceExecute: 400\n});\n\nif (typeof window !== \"undefined\") {\n\twindow.cpcBasic = { addItem: core.addItem };\n\twindow.onload = () => {\n\t\tconst UI = window.locobasicUI.UI; // we expaect that it is already loaded in the html page\n\t\tconst ui = new UI(core);\n\t\tcore.setVm(new BasicVmBrowser(ui));\n\n\t\tconst config = core.getConfigObject();\n\t\tconst args = ui.parseUri(window.location.search.substring(1), config);\n\t\tcore.parseArgs(args, config);\n\n\t\tcore.setOnCheckSyntax((s: string) => Promise.resolve(ui.checkSyntax(s)));\n\t\tui.onWindowLoad(new Event(\"onload\"));\n\t}\n\n} else { // node.js\n\tcore.setVm(new BasicVmNode());\n\tcore.parseArgs(global.process.argv.slice(2), core.getConfigObject());\n\tconst nodeParts = new NodeParts(core);\n\tnodeParts.nodeMain();\n}\n"],"names":["grammar"],"mappings":"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"}