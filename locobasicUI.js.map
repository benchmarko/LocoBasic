{"version":3,"file":"locobasicUI.js","sources":["../src/UI/LocoBasicMode.ts","../src/UI/UI.ts"],"sourcesContent":["import type { Mode, StringStream } from 'codemirror';\n\n// Codemirror Mode defining syntax highlighting for Loco-BASIC \n\ninterface State {\n    tokenize: ((stream: StringStream, state: State) => string | null) | null;\n}\n\nexport class LocoBasicMode {\n    public static getMode(): Mode<State> {\n        function words(array: string[]) {\n            const keys: Record<string, boolean> = {};\n            for (let i = 0; i < array.length; i += 1) {\n                keys[array[i]] = true;\n            }\n            return keys;\n        }\n\n        const keywords = [\n            \"ABS\", \"AFTER\", \"AND\", \"ASC\", \"ATN\", \"AUTO\", \"BIN$\", \"BORDER\", \"BREAK\", \"CALL\", \"CAT\", \"CHAIN\", \"CHR$\", \"CINT\", \"CLEAR\", \"CLG\", \"CLOSEIN\",\n            \"CLOSEOUT\", \"CLS\", \"CONT\", \"COPYCHR$\", \"COS\", \"CREAL\", \"CURSOR\", \"DATA\", \"DEC$\", \"DEF\", \"DEFINT\", \"DEFREAL\", \"DEFSTR\", \"DEG\", \"DELETE\",\n            \"DERR\", \"DI\", \"DIM\", \"DRAW\", \"DRAWR\", \"EDIT\", \"EI\", \"ELSE\", \"END\", \"ENT\", \"ENV\", \"EOF\", \"ERASE\", \"ERL\", \"ERR\", \"ERROR\", \"EVERY\", \"EXP\",\n            \"FILL\", \"FIX\", \"FN\", \"FOR\", \"FRAME\", \"FRE\", \"GOSUB\", \"GOTO\", \"GRAPHICS\", \"HEX$\", \"HIMEM\", \"IF\", \"INK\", \"INKEY\", \"INKEY$\", \"INP\", \"INPUT\",\n            \"INSTR\", \"INT\", \"JOY\", \"KEY\", \"LEFT$\", \"LEN\", \"LET\", \"LINE\", \"LIST\", \"LOAD\", \"LOCATE\", \"LOG\", \"LOG10\", \"LOWER$\", \"MASK\", \"MAX\", \"MEMORY\",\n            \"MERGE\", \"MID$\", \"MIN\", \"MOD\", \"MODE\", \"MOVE\", \"MOVER\", \"NEW\", \"NEXT\", \"NOT\", \"ON\", \"OPENIN\", \"OPENOUT\", \"OR\", \"ORIGIN\", \"OUT\", \"PAPER\",\n            \"PEEK\", \"PEN\", \"PI\", \"PLOT\", \"PLOTR\", \"POKE\", \"POS\", \"PRINT\", \"RAD\", \"RANDOMIZE\", \"READ\", \"RELEASE\", \"REM\", \"REMAIN\", \"RENUM\", \"RESTORE\",\n            \"RESUME\", \"RETURN\", \"RIGHT$\", \"RND\", \"ROUND\", \"RUN\", \"SAVE\", \"SGN\", \"SIN\", \"SOUND\", \"SPACE$\", \"SPC\", \"SPEED\", \"SQ\", \"SQR\", \"STEP\", \"STOP\",\n            \"STR$\", \"STRING$\", \"SWAP\", \"SYMBOL\", \"TAB\", \"TAG\", \"TAGOFF\", \"TAN\", \"TEST\", \"TESTR\", \"THEN\", \"TIME\", \"TO\", \"TROFF\", \"TRON\", \"UNT\", \"UPPER$\",\n            \"USING\", \"VAL\", \"VPOS\", \"WAIT\", \"WEND\", \"WHILE\", \"WIDTH\", \"WINDOW\", \"WRITE\", \"XOR\", \"XPOS\", \"YPOS\", \"ZONE\"\n        ];\n\n        const keywordMap = words([...keywords, ...keywords.map((word) => word.toLowerCase())]);\n\n        const isOperatorChar = /[+\\-*=<>^\\\\@/]/;\n\n        function tokenString() {\n            return function (stream: StringStream, state: State) {\n                stream.eatWhile(/[^\"]/);\n                stream.next();\n                state.tokenize = null;\n                return \"string\";\n            };\n        }\n\n        function tokenBase(stream: StringStream, state: State) {\n            const ch = stream.next();\n            if (ch === null) {\n                return null;\n            }\n\n            if (ch === \":\" || ch === \";\") { // ; e.g. in print\n                return null;\n            }\n\n            if (ch === \"'\") {\n                stream.skipToEnd();\n                return \"comment\";\n            }\n            if (ch === '\"') {\n                state.tokenize = tokenString();\n                return state.tokenize(stream, state);\n            }\n\n            if (/[[\\](),]/.test(ch)) {\n                return null;\n            }\n\n            if (ch === \".\" && stream.match(/^\\d\\d*(?:[eE][+-]?\\d+)?/)) {\n                return \"number\";\n            } else if (ch === \"&\" && stream.match(/^(?:[\\dA-Fa-f]+|[Xx][01]+)/)) {\n                return \"number\";\n            } else if (/\\d/.test(ch)) {\n                stream.match(/^\\d*(?:n|(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?/);\n                return \"number\"\n            }\n\n            if (isOperatorChar.test(ch)) {\n                stream.eatWhile(isOperatorChar);\n                return \"operator\";\n            }\n\n            if (ch === \"?\") {\n                return \"keyword\";\n            }\n\n            if (ch === \"F\" && stream.eat(\"N\") || ch === \"f\" && stream.eat(\"n\")) {\n                return \"keyword\";\n            }\n\n            stream.eatWhile(/[\\w]/);\n            stream.eat(\"$\");\n\n            const word = stream.current();\n            if (word === \"REM\" || word === \"rem\") {\n                stream.skipToEnd();\n                return \"comment\";\n            }\n\n            if (Object.prototype.hasOwnProperty.call(keywordMap, word)) {\n                return \"keyword\";\n            }\n\n            return \"variable\";\n        }\n\n        // Interface\n        return {\n            startState: function () {\n                return {\n                    tokenize: null\n                };\n            },\n\n            token: function (stream: StringStream, state: State): string | null {\n                if (stream.eatSpace()) {\n                    return null;\n                }\n                const style = (state.tokenize || tokenBase)(stream, state);\n                return style;\n            }\n        } as Mode<State>;\n    }\n}\n","import type { Editor } from \"codemirror\";\nimport type { ConfigEntryType, DatabaseMapType, DatabaseType, ExampleMapType, ExampleType, ICore, IUI, IVmAdmin } from \"../Interfaces\";\nimport { LocoBasicMode } from \"./LocoBasicMode\";\n\n// Worker:\ntype PlainErrorEventType = {\n    lineno: number,\n    colno: number,\n    message: string\n};\n\ntype ProcessingQueueType = {\n    resolve: (value: PlainErrorEventType) => void,\n    jsText: string\n};\n\n// Worker function to handle JavaScript evaluation and error reporting\nconst workerFn = (): void => {\n    const doEvalAndReply = (jsText: string) => {\n        self.addEventListener(\n            \"error\",\n            (errorEvent) => {\n                errorEvent.preventDefault();\n                const { lineno, colno, message } = errorEvent;\n                const plainErrorEventObj: PlainErrorEventType = { lineno, colno, message };\n                self.postMessage(JSON.stringify(plainErrorEventObj));\n            },\n            { once: true }\n        );\n        new Function(\"_o\", jsText);\n        const plainErrorEventObj: PlainErrorEventType = {\n            lineno: -1,\n            colno: -1,\n            message: \"No Error: Parsing successful!\"\n        };\n        self.postMessage(JSON.stringify(plainErrorEventObj));\n    };\n\n    self.addEventListener(\"message\", (e) => {\n        doEvalAndReply(e.data);\n    });\n};\n\nexport class UI implements IUI {\n    private core?: ICore;\n    private vm?: IVmAdmin;\n    private basicCm?: Editor;\n    private compiledCm?: Editor;\n    private readonly keyBuffer: string[] = []; // buffered pressed keys\n    private escape = false;\n    private fnOnKeyPressHandler: (event: KeyboardEvent) => void;\n\n    private static getErrorEvent?: (s: string) => Promise<PlainErrorEventType>;\n\n    constructor() {\n        this.fnOnKeyPressHandler = (event: KeyboardEvent) => this.onOutputTextKeydown(event);\n    }\n\n    private debounce<T extends (...args: unknown[]) => void | Promise<void>>(func: T, fngetDelay: () => number): (...args: Parameters<T>) => void {\n        let timeoutId: ReturnType<typeof setTimeout>;\n        return function (this: unknown, ...args: Parameters<T>) {\n            // use delay 0 when change comes from \"SetValue\" (ant not form \"+input\")\n            const delay = (args as any)?.[1]?.[0]?.origin === \"setValue\" ? 0 : fngetDelay();\n            clearTimeout(timeoutId);\n            timeoutId = setTimeout(() => {\n                func.apply(this, args); // we expect \"this\" to be null\n            }, delay);\n        };\n    }\n\n    private static asyncDelay(fn: () => void, timeout: number): Promise<number> {\n        return (async () => {\n            const timerId = window.setTimeout(fn, timeout);\n            return timerId;\n        })();\n    }\n\n    private getCore() {\n        if (!this.core) {\n            throw new Error(\"Core not initialized\");\n        }\n        return this.core;\n    }\n\n    public getEscape() {\n        return this.escape;\n    }\n\n    private async fnLoadScriptOrStyle(script: HTMLScriptElement | HTMLLinkElement): Promise<string> {\n        return new Promise((resolve, reject) => {\n            const onScriptLoad = function (event: Event) {\n                const type = event.type; // \"load\" or \"error\"\n                const node = event.currentTarget as HTMLScriptElement | HTMLLinkElement;\n                const key = node.getAttribute(\"data-key\") as string;\n\n                node.removeEventListener(\"load\", onScriptLoad, false);\n                node.removeEventListener(\"error\", onScriptLoad, false);\n\n                if (type === \"load\") {\n                    resolve(key);\n                } else {\n                    reject(key);\n                }\n            };\n            script.addEventListener(\"load\", onScriptLoad, false);\n            script.addEventListener(\"error\", onScriptLoad, false);\n            document.getElementsByTagName(\"head\")[0].appendChild(script);\n        });\n    }\n\n    private async loadScript(url: string, key: string): Promise<string> {\n        const script = document.createElement(\"script\");\n\n        script.type = \"text/javascript\";\n        script.async = true;\n        script.src = url;\n\n        script.setAttribute(\"data-key\", key);\n\n        return this.fnLoadScriptOrStyle(script);\n    }\n\n    public getCurrentDataKey(): string {\n        return document.currentScript && document.currentScript.getAttribute(\"data-key\") || \"\";\n    }\n\n    public addOutputText(value: string): void {\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        outputText.innerHTML += value;\n        if (value.startsWith(\"<svg xmlns=\")) {\n            this.setButtonDisabled(\"exportSvgButton\", false);\n        }\n    }\n\n    public setOutputText(value: string): void {\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        outputText.innerText = value;\n        this.setButtonDisabled(\"exportSvgButton\", true);\n    }\n\n    public getColor(color: string, background: boolean): string {\n        return `<span style=\"${background ? 'background-color' : 'color'}: ${color}\">`;\n    }\n\n    /**\n     * Prompts the user with a message and returns the input.\n     * @param msg - The message to prompt.\n     * @returns A promise that resolves to the user input or null if canceled.\n     */\n    public prompt(msg: string): string | null {\n        const input = window.prompt(msg);\n        return input;\n    }\n\n    public async speak(text: string, pitch: number): Promise<void> {\n        // wait for user interaction to start sound (how to?)\n\n        return new Promise<void>((resolve, reject) => {\n            if (!window.speechSynthesis) {\n                reject(new Error(\"Speech synthesis is not supported in this browser.\"));\n                return;\n            }\n\n            const msg = new SpeechSynthesisUtterance(text);\n            msg.pitch = pitch; //0 to 2\n            msg.onend = () => resolve();\n            msg.onerror = (event) => {\n                if (event.error === \"not-allowed\") {\n                    // Chrome needs user interaction\n                    window.addEventListener(\"click\", () => {\n                        window.speechSynthesis.speak(msg);\n                    }\n                    , { once: true });\n                } else {\n                    reject(new Error(`Speech synthesis error: ${event.error}`));\n                }\n            }\n            window.speechSynthesis.speak(msg);\n        })\n    }\n\n    private updateConfigParameter(name: string, value: string | boolean) {\n        const core = this.getCore();\n        const configAsRecord = core.getConfigMap() as Record<string, unknown>;\n        const defaultConfigAsRecord = core.getDefaultConfigMap() as Record<string, unknown>;\n\n        configAsRecord[name] = value;\n\n        const url = new URL(window.location.href);\n        if (configAsRecord[name] !== defaultConfigAsRecord[name]) {\n            url.searchParams.set(name, String(value));\n        } else {\n            url.searchParams.delete(name);\n        }\n        history.pushState({}, \"\", url.href);\n    }\n\n    private setButtonDisabled(id: string, disabled: boolean) {\n        const button = window.document.getElementById(id) as HTMLButtonElement;\n        button.disabled = disabled;\n    }\n\n    private setSelectDisabled(id: string, disabled: boolean) {\n        const element = window.document.getElementById(id) as HTMLSelectElement;\n        element.disabled = disabled;\n    }\n\n    private hasCompiledError() {\n        const compiledScript = this.compiledCm ? this.compiledCm.getValue() : \"\";\n        const hasError = compiledScript.startsWith(\"ERROR:\");\n        this.setOutputText(hasError ? compiledScript : \"\");\n        return hasError;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onExecuteButtonClick = async (_event: Event): Promise<void> => { // bound this\n        const core = this.getCore();\n        if (!this.vm || this.hasCompiledError()) {\n            return;\n        }\n        \n        this.setAreaHidden(\"convertArea\"); // to be sure for execute; TODO: hide area if clicked anywhere outside \n\n        this.setButtonDisabled(\"executeButton\", true);\n        this.setButtonDisabled(\"stopButton\", false);\n        this.setButtonDisabled(\"convertButton\", true);\n        this.setSelectDisabled(\"databaseSelect\", true);\n        this.setSelectDisabled(\"exampleSelect\", true);\n        this.escape = false;\n        this.keyBuffer.length = 0;\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        outputText.addEventListener(\"keydown\", this.fnOnKeyPressHandler, false);\n        const compiledScript = this.compiledCm ? this.compiledCm.getValue() : \"\";\n        const output = await core.executeScript(compiledScript, this.vm) || \"\";\n        outputText.removeEventListener(\"keydown\", this.fnOnKeyPressHandler, false);\n        this.setButtonDisabled(\"executeButton\", false);\n        this.setButtonDisabled(\"stopButton\", true);\n        this.setButtonDisabled(\"convertButton\", false);\n        this.setSelectDisabled(\"databaseSelect\", false);\n        this.setSelectDisabled(\"exampleSelect\", false);\n        this.addOutputText(output + (output.endsWith(\"\\n\") ? \"\" : \"\\n\"));\n    }\n\n    private onCompiledTextChange = (): void => { // bound this\n        if (this.hasCompiledError()) {\n            return;\n        }\n        const autoExecuteInput = document.getElementById(\"autoExecuteInput\") as HTMLInputElement;\n        if (autoExecuteInput.checked) {\n            const executeButton = window.document.getElementById(\"executeButton\") as HTMLButtonElement;\n            if (!executeButton.disabled) {\n                executeButton.dispatchEvent(new Event(\"click\"));\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onCompileButtonClick = (_event: Event): void => { // bound this\n        const core = this.getCore();\n        this.setButtonDisabled(\"compileButton\", true);\n        const input = this.basicCm ? this.basicCm.getValue() : \"\";\n        UI.asyncDelay(() => {\n            const compiledScript = core.compileScript(input) || \"\";\n\n            if (this.compiledCm) {\n                this.compiledCm.setValue(compiledScript);\n            }\n            this.setButtonDisabled(\"compileButton\", false);\n            if (!compiledScript.startsWith(\"ERROR:\")) {\n                this.setButtonDisabled(\"labelRemoveButton\", false);\n            }\n        }, 1);\n    }\n\n    private onAutoCompileInputChange = (event: Event): void => { // bound this\n        const autoCompileInput = event.target as HTMLInputElement;\n\n        this.updateConfigParameter(\"autoCompile\", autoCompileInput.checked);\n    }\n\n    private onAutoExecuteInputChange = (event: Event): void => { // bound this\n        const autoExecuteInput = event.target as HTMLInputElement;\n\n        this.updateConfigParameter(\"autoExecute\", autoExecuteInput.checked);\n    }\n\n    private toggleAreaHidden(id: string, editor?: Editor): boolean {\n        const area = document.getElementById(id) as HTMLElement;\n        area.hidden = !area.hidden;\n        if (!area.hidden && editor) {\n            editor.refresh();\n        }\n        return !area.hidden;\n    }\n\n    private setAreaHidden(id: string): boolean {\n        const area = document.getElementById(id) as HTMLElement;\n        if (!area.hidden) {\n            area.hidden = true;\n        }\n        return area.hidden;\n    }\n\n    private onShowOutputInputChange = (event: Event): void => { // bound this\n        const showOutputInput = event.target as HTMLInputElement;\n        this.toggleAreaHidden(\"outputArea\");\n\n        this.updateConfigParameter(\"showOutput\", showOutputInput.checked);\n    }\n\n    private onShowBasicInputChange = (event: Event): void => { // bound this\n        const showBasicInput = event.target as HTMLInputElement;\n        this.toggleAreaHidden(\"basicArea\", this.basicCm);\n\n        this.updateConfigParameter(\"showBasic\", showBasicInput.checked);\n    }\n\n    private onShowCompiledInputChange = (event: Event): void => { // bound this\n        const showCompiledInput = event.target as HTMLInputElement;\n        this.toggleAreaHidden(\"compiledArea\", this.compiledCm);\n\n        this.updateConfigParameter(\"showCompiled\", showCompiledInput.checked);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onStopButtonClick = (_event: Event): void => { // bound this\n        this.escape = true;\n        this.setButtonDisabled(\"stopButton\", true);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onConvertButtonClick = (_event: Event): void => { // bound this\n        this.toggleAreaHidden(\"convertArea\");\n    }\n\n    private static addLabels(input: string) {\n\t\tconst lineParts = input.split(\"\\n\");\n\t\tlet lastLine = 0;\n\n\t\tfor (let i = 0; i < lineParts.length; i += 1) {\n\t\t\tlet lineNum = parseInt(lineParts[i], 10);\n\n\t\t\tif (isNaN(lineNum)) {\n\t\t\t\tlineNum = lastLine + 1;\n\t\t\t\tlineParts[i] = `${lineNum} ${lineParts[i]}`;\n\t\t\t}\n\t\t\tlastLine = lineNum;\n\t\t}\n\t\treturn lineParts.join(\"\\n\");\n\t}\n\n    private static removeUnusedLabels(input: string, usedLabels: Record<string, unknown>) {\n        const lineParts = input.split(\"\\n\");\n\t\tfor (let i = 0; i < lineParts.length; i += 1) {\n\t\t\tconst lineNum = parseInt(lineParts[i], 10);\n\n\t\t\tif (!isNaN(lineNum) && !usedLabels[lineNum]) {\n\t\t\t\tlineParts[i] = lineParts[i].replace(/^\\d+\\s/, \"\");\n\t\t\t}\n\t\t}\n\t\treturn lineParts.join(\"\\n\");\n\t}\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onLabelAddButtonClick = (_event: Event): void => { // bound this\n        const input = this.basicCm!.getValue();\n        const output = input ? UI.addLabels(input) : \"\";\n\n        if (output && output !== input) {\n            this.basicCm!.setValue(output);\n        }\n    }\n    \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onLabelRemoveButtonClick = (_event: Event): void => { // bound this\n        const input = this.basicCm!.getValue();\n\n        const core = this.getCore();\n        const semanticsHelper = core.getSemanticsHelper();\n        const usedLabels = semanticsHelper.getUsedLabels();\n       \n        const allUsedLabels: Record<string, boolean> = {};\n        for (const type of Object.keys(usedLabels)) {\n            for (const label of Object.keys(usedLabels[type])) {\n                allUsedLabels[label] = true;\n            }\n        }\n\n        const output = UI.removeUnusedLabels(input, allUsedLabels);\n\n        if (output && output !== input) {\n            this.basicCm!.setValue(output);\n        }\n\n\n    }\n\n    private onBasicTextChange = async (): Promise<void> => { // bound this\n        this.setButtonDisabled(\"labelRemoveButton\", true);\n        const autoCompileInput = document.getElementById(\"autoCompileInput\") as HTMLInputElement;\n        if (autoCompileInput.checked) {\n            const compileButton = window.document.getElementById(\"compileButton\") as HTMLButtonElement;\n            if (!compileButton.disabled) {\n                compileButton.dispatchEvent(new Event(\"click\"));\n            }\n        }\n    }\n\n    private async getExampleScript(example: ExampleType) {\n        if (example.script !== undefined) {\n            return example.script;\n        }\n        const core = this.getCore();\n        const database = core.getDatabase();\n        const scriptName = database.source + \"/\" + example.key + \".js\";\n        try {\n            await this.loadScript(scriptName, example.key);\n        } catch (error) {\n            console.error(\"Load Example\", scriptName, error);\n        }\n        return example.script || \"\";\n    }\n\n    private onExampleSelectChange = async (event: Event): Promise<void> => { // bound this\n        const core = this.getCore();\n\n        this.setOutputText(\"\");\n\n        const exampleSelect = event.target as HTMLSelectElement;\n        const exampleName = exampleSelect.value;\n        const example = core.getExample(exampleName); //.script || \"\";\n\n        if (example) {\n            this.updateConfigParameter(\"example\", exampleName);\n\n            const script = await this.getExampleScript(example);\n\n            if (this.basicCm) {\n                this.basicCm.setValue(script);\n            }\n        } else {\n            console.warn(\"onExampleSelectChange: example not found:\", exampleName);\n        }\n    }\n\n    private setExampleSelectOptions(exampleMap: ExampleMapType, exampleKey: string): void {\n        const maxTitleLength = 160;\n        const maxTextLength = 60; // (32 visible?)\n        const exampleSelect = document.getElementById(\"exampleSelect\") as HTMLSelectElement;\n        exampleSelect.options.length = 0;\n\n        for (const key of Object.keys(exampleMap)) {\n            const example = exampleMap[key];\n\n            if (example.meta !== \"D\") { // skip data files\n                const title = (key + \": \" + example.title).substring(0, maxTitleLength);\n                const option = window.document.createElement(\"option\");\n                option.value = key;\n                option.text = title.substring(0, maxTextLength);\n                option.title = title;\n                option.selected = key === exampleKey;\n                exampleSelect.add(option);\n            }\n        }\n    }\n\n    private async getExampleMap(databaseItem: DatabaseType) {\n        if (databaseItem.exampleMap) {\n            return databaseItem.exampleMap;\n        }\n        databaseItem.exampleMap = {};\n        const scriptName = databaseItem.source + \"/0index.js\";\n        try {\n            await this.loadScript(scriptName, \"0index\");\n        } catch (error) {\n            console.error(\"Load Example Map \", scriptName, error);\n        }\n        return databaseItem.exampleMap;\n    }\n\n    private onDatabaseSelectChange = async (event: Event): Promise<void> => { // bound this\n        const core = this.getCore();\n        const databaseSelect = event.target as HTMLSelectElement;\n\n        const database = databaseSelect.value;\n        const config = core.getConfigMap();\n        config.database = database;\n\n        const databaseMap = core.getDatabaseMap();\n        const databaseItem = databaseMap[database];\n        if (databaseItem) {\n            this.updateConfigParameter(\"database\", database);\n        }\n\n        const exampleMap = await this.getExampleMap(databaseItem);\n\n        this.setExampleSelectOptions(exampleMap, config.example);\n\n        const exampleSelect = window.document.getElementById(\"exampleSelect\") as HTMLSelectElement;\n        exampleSelect.dispatchEvent(new Event(\"change\"));\n    }\n\n    private setDatabaseSelectOptions(databaseMap: DatabaseMapType, database: string): void {\n        const databaseSelect = document.getElementById(\"databaseSelect\") as HTMLSelectElement;\n        databaseSelect.options.length = 0;\n\n        for (const key of Object.keys(databaseMap)) {\n            const example = databaseMap[key];\n\n            const option = window.document.createElement(\"option\");\n            option.value = key;\n            option.text = key;\n            option.title = example.source;\n            option.selected = key === database;\n            databaseSelect.add(option);\n        }\n    }\n\n    private onHelpButtonClick = (): void => { // bound this\n        window.open(\"https://github.com/benchmarko/LocoBasic/#readme\");\n    }\n\n    private static fnDownloadBlob(blob: Blob, filename: string): void {\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        const clickHandler = function () {\n            setTimeout(function () {\n                URL.revokeObjectURL(url);\n                a.removeEventListener(\"click\", clickHandler);\n            }, 150);\n        };\n\n        a.href = url;\n        a.download = filename;\n        a.addEventListener(\"click\", clickHandler, false);\n        a.click();\n    }\n\n    private getExampleName(): string {\n        const input = this.basicCm ? this.basicCm.getValue() : \"\";\n        const firstLine = input.slice(0, input.indexOf(\"\\n\"));\n        const matches = firstLine.match(/^\\s*\\d*\\s*(?:REM|rem|')\\s*(\\w+)/);\n        const name = matches ? matches[1] : this.getCore().getConfigMap().example || \"locobasic\";\n        return name;\n    }\n\n    private onExportSvgButtonClick = (): void => { // bound this\n        const outputText = window.document.getElementById(\"outputText\") as HTMLElement;\n        const svgElements = outputText.getElementsByTagName(\"svg\");\n        if (!svgElements.length) {\n            console.warn(\"onExportSvgButtonClick: No SVG found.\");\n            return;\n        }\n        const svgElement = svgElements[0];\n        const svgData = svgElement.outerHTML;\n        const preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n        const svgBlob = new Blob([preface, svgData], {\n            type: \"image/svg+xml;charset=utf-8\"\n        });\n\n        const example = this.getExampleName();\n        const filename = `${example}.svg`;\n        UI.fnDownloadBlob(svgBlob, filename);\n    }\n\n    public getKeyFromBuffer(): string {\n        const key = this.keyBuffer.length ? this.keyBuffer.shift() as string : \"\";\n        return key;\n    }\n\n    private putKeyInBuffer(key: string): void {\n        this.keyBuffer.push(key);\n    }\n\n    private onOutputTextKeydown(event: KeyboardEvent): void {\n        const key = event.key;\n        if (key === \"Escape\") {\n            this.escape = true;\n        } else if (key === \"Enter\") {\n            this.putKeyInBuffer(\"\\x0d\");\n            event.preventDefault();\n        } else if (key.length === 1 && event.ctrlKey === false && event.altKey === false) {\n            this.putKeyInBuffer(key);\n            event.preventDefault();\n        }\n    }\n\n    private static getErrorEventFn(): (s: string) => Promise<PlainErrorEventType> {\n        if (UI.getErrorEvent) {\n            return UI.getErrorEvent;\n        }\n\n        const blob = new Blob(\n            [`(${workerFn})();`],\n            { type: \"text/javascript\" }\n        );\n\n        const worker = new Worker(window.URL.createObjectURL(blob));\n        const processingQueue: ProcessingQueueType[] = [];\n        let isProcessing = false;\n\n        const processNext = () => {\n            isProcessing = true;\n            const { resolve, jsText } = processingQueue.shift() as ProcessingQueueType;\n            worker.addEventListener(\n                \"message\",\n                ({ data }) => {\n                    resolve(JSON.parse(data));\n                    if (processingQueue.length) {\n                        processNext();\n                    } else {\n                        isProcessing = false;\n                    }\n                },\n                { once: true }\n            );\n            worker.postMessage(jsText);\n        };\n\n        const getErrorEvent = (jsText: string): Promise<PlainErrorEventType> => {\n            return new Promise<PlainErrorEventType>((resolve) => {\n                processingQueue.push({ resolve, jsText });\n                if (!isProcessing) {\n                    processNext();\n                }\n            });\n        };\n\n        UI.getErrorEvent = getErrorEvent;\n        return getErrorEvent;\n    }\n\n    private static describeError(stringToEval: string, lineno: number, colno: number): string {\n        const lines = stringToEval.split(\"\\n\");\n        const line = lines[lineno - 1];\n        return `${line}\\n${\" \".repeat(colno - 1) + \"^\"}`;\n    }\n\n    public async checkSyntax(str: string): Promise<string> {\n        const getErrorEvent = UI.getErrorEventFn();\n\n        let output = \"\";\n        const { lineno, colno, message } = await getErrorEvent(str);\n        if (message === \"No Error: Parsing successful!\") {\n            return \"\";\n        }\n        output += `Syntax error thrown at: Line ${lineno - 2}, col: ${colno}\\n`;\n        output += UI.describeError(str, lineno - 2, colno) + \"\\n\";\n        output += message;\n        return output;\n    }\n\n    private fnDecodeUri(s: string): string {\n        let decoded = \"\";\n\n        try {\n            decoded = decodeURIComponent(s.replace(/\\+/g, \" \"));\n        } catch (err) {\n            if (err instanceof Error) {\n                err.message += \": \" + s;\n            }\n            console.error(err);\n        }\n        return decoded;\n    }\n\n    private parseUri(config: Record<string, ConfigEntryType>): string[] {\n        const urlQuery = window.location.search.substring(1);\n        const rSearch = /([^&=]+)=?([^&]*)/g;\n        const args: string[] = [];\n        let match: RegExpExecArray | null;\n\n        while ((match = rSearch.exec(urlQuery)) !== null) {\n            const name = this.fnDecodeUri(match[1]);\n            const value = this.fnDecodeUri(match[2]);\n\n            if (value !== null && config[name] !== undefined) {\n                args.push(name + \"=\" + value);\n            }\n        }\n        return args;\n    }\n\n    public onWindowLoadContinue(core: ICore, vm: IVmAdmin): void {\n        this.core = core;\n        this.vm = vm;\n        const config = core.getConfigMap();\n        const args = this.parseUri(config);\n        core.parseArgs(args, config);\n        core.setOnCheckSyntax((s: string) => Promise.resolve(this.checkSyntax(s)));\n\n        const compileButton = window.document.getElementById(\"compileButton\") as HTMLButtonElement;\n        compileButton.addEventListener(\"click\", this.onCompileButtonClick, false);\n\n        const executeButton = window.document.getElementById(\"executeButton\") as HTMLButtonElement;\n        executeButton.addEventListener(\"click\", this.onExecuteButtonClick, false);\n\n        const stopButton = window.document.getElementById(\"stopButton\") as HTMLButtonElement;\n        stopButton.addEventListener(\"click\", this.onStopButtonClick, false);\n\n        const convertButton = window.document.getElementById(\"convertButton\") as HTMLButtonElement;\n        convertButton.addEventListener(\"click\", this.onConvertButtonClick, false);\n\n        const labelAddButton = window.document.getElementById(\"labelAddButton\") as HTMLButtonElement;\n        labelAddButton.addEventListener(\"click\", this.onLabelAddButtonClick, false);\n        \n        const labelRemoveButton = window.document.getElementById(\"labelRemoveButton\") as HTMLButtonElement;\n        labelRemoveButton.addEventListener(\"click\", this.onLabelRemoveButtonClick, false);\n        \n        const autoCompileInput = window.document.getElementById(\"autoCompileInput\") as HTMLInputElement;\n        autoCompileInput.addEventListener(\"change\", this.onAutoCompileInputChange, false);\n\n        const autoExecuteInput = window.document.getElementById(\"autoExecuteInput\") as HTMLInputElement;\n        autoExecuteInput.addEventListener(\"change\", this.onAutoExecuteInputChange, false);\n\n        const showOutputInput = window.document.getElementById(\"showOutputInput\") as HTMLInputElement;\n        showOutputInput.addEventListener(\"change\", this.onShowOutputInputChange, false);\n\n        const showBasicInput = window.document.getElementById(\"showBasicInput\") as HTMLInputElement;\n        showBasicInput.addEventListener(\"change\", this.onShowBasicInputChange, false);\n\n        const showCompiledInput = window.document.getElementById(\"showCompiledInput\") as HTMLInputElement;\n        showCompiledInput.addEventListener(\"change\", this.onShowCompiledInputChange, false);\n\n        const databaseSelect = window.document.getElementById(\"databaseSelect\") as HTMLSelectElement;\n        databaseSelect.addEventListener(\"change\", this.onDatabaseSelectChange);\n\n        const exampleSelect = window.document.getElementById(\"exampleSelect\") as HTMLSelectElement;\n        exampleSelect.addEventListener(\"change\", this.onExampleSelectChange);\n\n        const helpButton = window.document.getElementById(\"helpButton\") as HTMLButtonElement;\n        helpButton.addEventListener(\"click\", this.onHelpButtonClick);\n\n        const exportSvgButton = window.document.getElementById(\"exportSvgButton\") as HTMLButtonElement;\n        exportSvgButton.addEventListener(\"click\", this.onExportSvgButtonClick);\n\n        const WinCodeMirror = window.CodeMirror;\n        if (WinCodeMirror) {\n            const getModeFn = LocoBasicMode.getMode;\n            WinCodeMirror.defineMode(\"lbasic\", getModeFn);\n\n            const basicEditor = window.document.getElementById(\"basicEditor\") as HTMLElement;\n            this.basicCm = WinCodeMirror(basicEditor, {\n                lineNumbers: true,\n                mode: \"lbasic\"\n            });\n            this.basicCm.on(\"changes\", this.debounce(this.onBasicTextChange, () => config.debounceCompile));\n\n            const compiledEditor = window.document.getElementById(\"compiledEditor\") as HTMLElement;\n            this.compiledCm = WinCodeMirror(compiledEditor, {\n                lineNumbers: true,\n                mode: \"javascript\"\n            });\n            this.compiledCm.on(\"changes\", this.debounce(this.onCompiledTextChange, () => config.debounceExecute));\n        }\n\n        // if the user navigate back...\n        window.addEventListener(\"popstate\", (event: PopStateEvent) => {\n            if (event.state) {\n                Object.assign(config, core.getDefaultConfigMap); // load defaults\n                const args = this.parseUri(config);\n                core.parseArgs(args, config);\n                databaseSelect.dispatchEvent(new Event(\"change\"));\n            }\n        });\n\n        if (showOutputInput.checked !== config.showOutput) {\n            showOutputInput.checked = config.showOutput;\n            showOutputInput.dispatchEvent(new Event(\"change\"));\n        }\n\n        if (showBasicInput.checked !== config.showBasic) {\n            showBasicInput.checked = config.showBasic;\n            showBasicInput.dispatchEvent(new Event(\"change\"));\n        }\n\n        if (showCompiledInput.checked !== config.showCompiled) {\n            showCompiledInput.checked = config.showCompiled;\n            showCompiledInput.dispatchEvent(new Event(\"change\"));\n        }\n\n        if (autoCompileInput.checked !== config.autoCompile) {\n            autoCompileInput.checked = config.autoCompile;\n            autoCompileInput.dispatchEvent(new Event(\"change\"));\n        }\n\n        if (autoExecuteInput.checked !== config.autoExecute) {\n            autoExecuteInput.checked = config.autoExecute;\n            autoExecuteInput.dispatchEvent(new Event(\"change\"));\n        }\n\n        UI.asyncDelay(() => {\n            const databaseMap = core.initDatabaseMap();\n            this.setDatabaseSelectOptions(databaseMap, config.database);\n            const url = window.location.href;\n            history.replaceState({}, \"\", url);\n            databaseSelect.dispatchEvent(new Event(\"change\"));\n        }, 10);\n    }\n}\n"],"names":[],"mappings":"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"}