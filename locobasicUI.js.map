{"version":3,"file":"locobasicUI.js","sources":["../src/UI/LocoBasicMode.ts","../src/Constants.ts","../src/VmMessageHandler.ts","../src/UI/VmMain.ts","../src/UI/UI.ts"],"sourcesContent":["import type { Mode, StringStream } from 'codemirror';\n\n// Codemirror Mode defining syntax highlighting for Loco-BASIC \n\ninterface State {\n    tokenize: ((stream: StringStream, state: State) => string | null) | null;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport class LocoBasicMode {\n    public static getMode(): Mode<State> {\n        function words(array: string[]) {\n            const keys: Record<string, boolean> = {};\n            for (let i = 0; i < array.length; i += 1) {\n                keys[array[i]] = true;\n            }\n            return keys;\n        }\n\n        const keywords = [\n            \"ABS\", \"AFTER\", \"AND\", \"ASC\", \"ATN\", \"AUTO\", \"BIN$\", \"BORDER\", \"BREAK\", \"CALL\", \"CAT\", \"CHAIN\", \"CHR$\", \"CINT\", \"CLEAR\", \"CLG\", \"CLOSEIN\",\n            \"CLOSEOUT\", \"CLS\", \"CONT\", \"COPYCHR$\", \"COS\", \"CREAL\", \"CURSOR\", \"DATA\", \"DEC$\", \"DEF\", \"DEFINT\", \"DEFREAL\", \"DEFSTR\", \"DEG\", \"DELETE\",\n            \"DERR\", \"DI\", \"DIM\", \"DRAW\", \"DRAWR\", \"EDIT\", \"EI\", \"ELSE\", \"END\", \"ENT\", \"ENV\", \"EOF\", \"ERASE\", \"ERL\", \"ERR\", \"ERROR\", \"EVERY\", \"EXP\",\n            \"FILL\", \"FIX\", \"FN\", \"FOR\", \"FRAME\", \"FRE\", \"GOSUB\", \"GOTO\", \"GRAPHICS\", \"HEX$\", \"HIMEM\", \"IF\", \"INK\", \"INKEY\", \"INKEY$\", \"INP\", \"INPUT\",\n            \"INSTR\", \"INT\", \"JOY\", \"KEY\", \"LEFT$\", \"LEN\", \"LET\", \"LINE\", \"LIST\", \"LOAD\", \"LOCATE\", \"LOG\", \"LOG10\", \"LOWER$\", \"MASK\", \"MAX\", \"MEMORY\",\n            \"MERGE\", \"MID$\", \"MIN\", \"MOD\", \"MODE\", \"MOVE\", \"MOVER\", \"NEW\", \"NEXT\", \"NOT\", \"ON\", \"OPENIN\", \"OPENOUT\", \"OR\", \"ORIGIN\", \"OUT\", \"PAPER\",\n            \"PEEK\", \"PEN\", \"PI\", \"PLOT\", \"PLOTR\", \"POKE\", \"POS\", \"PRINT\", \"RAD\", \"RANDOMIZE\", \"READ\", \"RELEASE\", \"REM\", \"REMAIN\", \"RENUM\", \"RESTORE\",\n            \"RESUME\", \"RETURN\", \"RIGHT$\", \"RND\", \"ROUND\", \"RUN\", \"SAVE\", \"SGN\", \"SIN\", \"SOUND\", \"SPACE$\", \"SPC\", \"SPEED\", \"SQ\", \"SQR\", \"STEP\", \"STOP\",\n            \"STR$\", \"STRING$\", \"SWAP\", \"SYMBOL\", \"TAB\", \"TAG\", \"TAGOFF\", \"TAN\", \"TEST\", \"TESTR\", \"THEN\", \"TIME\", \"TO\", \"TROFF\", \"TRON\", \"UNT\", \"UPPER$\",\n            \"USING\", \"VAL\", \"VPOS\", \"WAIT\", \"WEND\", \"WHILE\", \"WIDTH\", \"WINDOW\", \"WRITE\", \"XOR\", \"XPOS\", \"YPOS\", \"ZONE\"\n        ];\n\n        const keywordMap = words([...keywords, ...keywords.map((word) => word.toLowerCase())]);\n\n        const isOperatorChar = /[+\\-*=<>^\\\\@/]/;\n\n        function tokenString() {\n            return function (stream: StringStream, state: State) {\n                stream.eatWhile(/[^\"]/);\n                stream.next();\n                state.tokenize = null;\n                return \"string\";\n            };\n        }\n\n        function tokenBase(stream: StringStream, state: State) {\n            const ch = stream.next();\n            if (ch === null) {\n                return null;\n            }\n\n            if (ch === \":\" || ch === \";\") { // ; e.g. in print\n                return null;\n            }\n\n            if (ch === \"'\") {\n                stream.skipToEnd();\n                return \"comment\";\n            }\n            if (ch === '\"') {\n                state.tokenize = tokenString();\n                return state.tokenize(stream, state);\n            }\n\n            if (/[[\\](),]/.test(ch)) {\n                return null;\n            }\n\n            if (ch === \".\" && stream.match(/^\\d\\d*(?:[eE][+-]?\\d+)?/)) {\n                return \"number\";\n            } else if (ch === \"&\" && stream.match(/^(?:[\\dA-Fa-f]+|[Xx][01]+)/)) {\n                return \"number\";\n            } else if (/\\d/.test(ch)) {\n                stream.match(/^\\d*(?:n|(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?/);\n                return \"number\"\n            }\n\n            if (isOperatorChar.test(ch)) {\n                stream.eatWhile(isOperatorChar);\n                return \"operator\";\n            }\n\n            if (ch === \"?\") {\n                return \"keyword\";\n            }\n\n            if (ch === \"F\" && stream.eat(\"N\") || ch === \"f\" && stream.eat(\"n\")) {\n                return \"keyword\";\n            }\n\n            stream.eatWhile(/[\\w]/);\n            stream.eat(\"$\");\n\n            const word = stream.current();\n            if (word === \"REM\" || word === \"rem\") {\n                stream.skipToEnd();\n                return \"comment\";\n            }\n\n            if (Object.prototype.hasOwnProperty.call(keywordMap, word)) {\n                return \"keyword\";\n            }\n\n            return \"variable\";\n        }\n\n        // Interface\n        return {\n            startState: function () {\n                return {\n                    tokenize: null\n                };\n            },\n\n            token: function (stream: StringStream, state: State): string | null {\n                if (stream.eatSpace()) {\n                    return null;\n                }\n                const style = (state.tokenize || tokenBase)(stream, state);\n                return style;\n            }\n        } as Mode<State>;\n    }\n}\n","export const CommaOpChar = \"\\u2192\"; // Unicode arrow right\nexport const TabOpChar = \"\\u21d2\"; // Unicode double arrow right\n\nexport const basicErrors = [\n    \"Improper argument\", // 0\n    \"Unexpected NEXT\", // 1\n    \"Syntax Error\", // 2\n    \"Unexpected RETURN\", // 3\n    \"DATA exhausted\", // 4\n    \"Improper argument\", // 5\n    \"Overflow\", // 6\n    \"Memory full\", // 7\n    \"Line does not exist\", // 8\n    \"Subscript out of range\", // 9\n    \"Array already dimensioned\", // 10\n    \"Division by zero\", // 11\n    \"Invalid direct command\", // 12\n    \"Type mismatch\", // 13\n    \"String space full\", // 14\n    \"String too long\", // 15\n    \"String expression too complex\", // 16\n    \"Cannot CONTinue\", // 17\n    \"Unknown user function\", // 18\n    \"RESUME missing\", // 19\n    \"Unexpected RESUME\", // 20\n    \"Direct command found\", // 21\n    \"Operand missing\", // 22\n    \"Line too long\", // 23\n    \"EOF met\", // 24\n    \"File type error\", // 25\n    \"NEXT missing\", // 26\n    \"File already open\", // 27\n    \"Unknown command\", // 28\n    \"WEND missing\", // 29\n    \"Unexpected WEND\", // 30\n    \"File not open\", // 31,\n    \"Broken\", // 32 \"Broken in\" (derr=146: xxx not found)\n    \"Unknown error\" // 33...\n];\n","import type { MessageFromWorker, MessageToWorker } from \"./Interfaces\";\nimport { basicErrors } from \"./Constants\";\n\nexport interface VmMessageHandlerCallbacks {\n    onFlush(message: string, needCls?: boolean, hasGraphics?: boolean): void;\n    onInput(prompt: string): Promise<string | null>;\n    onGeolocation(): Promise<string>;\n    onSpeak(message: string, pitch: number): Promise<void>;\n    onKeyDef(codes: number[]): void;\n}\n\nexport class VmMessageHandler {\n    private readonly callbacks: VmMessageHandlerCallbacks;\n    private readonly postMessage: (message: MessageToWorker) => void;\n    private code = \"\";\n    private finishedResolverFn?: ((msg: string) => void);\n\n    constructor(callbacks: VmMessageHandlerCallbacks, postMessage: (message: MessageToWorker) => void) {\n        this.callbacks = callbacks;\n        this.postMessage = postMessage;\n    }\n\n    public setCode(code: string): void {\n        this.code = code;\n    }\n\n    public setFinishedResolver(finishedResolverFn: (msg: string) => void) {\n        this.finishedResolverFn = finishedResolverFn;\n    }\n\n    public onResultResolved(message = \"\") {\n        if (this.finishedResolverFn) {\n            this.finishedResolverFn(message);\n            this.finishedResolverFn = undefined;\n        }\n    }\n\n    private static describeError(stringToEval: string, lineno: number, colno: number): string {\n        const lines = stringToEval.split(\"\\n\");\n        const line = lines[lineno - 1];\n        return `${line}\\n${\" \".repeat(colno - 1) + \"^\"}`;\n    }\n\n    public async handleMessage(data: MessageFromWorker): Promise<void> {\n        switch (data.type) {\n            case 'flush':\n                this.callbacks.onFlush(data.message, data.needCls, data.hasGraphics);\n                break;\n            case 'geolocation': {\n                try {\n                    const result = await this.callbacks.onGeolocation();\n                    this.postMessage({ type: 'continue', result });\n                } catch (msg) {\n                    console.error(msg);\n                    this.postMessage({ type: 'stop' });\n                    this.postMessage({ type: 'continue', result: '' });\n                }\n                break;\n            }\n            case 'input': {\n                setTimeout(async () => {\n                    const input = await this.callbacks.onInput(data.prompt);\n                    this.postMessage({ type: 'input', input });\n                }, 50); // 50ms delay to allow UI update\n                break;\n            }\n            case 'keyDef':\n                this.callbacks.onKeyDef(data.codes);\n                break;\n            case 'result': {\n                let res = data.result || \"\";\n\n                if (res.startsWith(\"{\")) {\n                    const json = JSON.parse(res);\n                    const { lineno, colno, message } = json;\n                    if (message === \"No Error: Parsing successful!\") {\n                        res = \"\";\n                    } else {\n                        res = `Syntax error thrown at: Line ${lineno - 2}, col: ${colno}\\n`\n                            + VmMessageHandler.describeError(this.code, lineno - 2, colno) + \"\\n\"\n                            + message;\n                    }\n                } else if (res === \"Error: INFO: Program stopped\") {\n                    res = \"\";\n                } else {\n                    const match1 = res.match(/^Error: (\\d+)$/);\n                    if (match1) {\n                        res += \": \" + basicErrors[Number(match1[1])];\n                    }\n                }\n                this.onResultResolved(res);\n                break;\n            }\n            case 'speak': {\n                try {\n                    await this.callbacks.onSpeak(data.message, data.pitch);\n                    this.postMessage({ type: 'continue', result: '' });\n                } catch (msg) {\n                    console.log(msg);\n                    this.postMessage({ type: 'stop' });\n                    this.postMessage({ type: 'continue', result: '' });\n                }\n                break;\n            }\n            default:\n                console.error(\"VmMessageHandler: Unknown message type:\", data);\n                break;\n        }\n    }\n}\n","import type { MessageFromWorker, MessageToWorker } from \"../Interfaces\";\nimport { VmMessageHandler, type VmMessageHandlerCallbacks } from \"../VmMessageHandler\";\n\nexport class VmMain {\n    private readonly messageHandler: VmMessageHandler;\n    private readonly createWebWorker: () => Promise<Worker>;\n    private worker?: Worker;\n\n    constructor(callbacks: VmMessageHandlerCallbacks, createWebWorker: () => Promise<Worker>) {\n        this.messageHandler = new VmMessageHandler(callbacks, (message: MessageToWorker) => this.postMessage(message));\n        this.createWebWorker = createWebWorker;\n\n        window.addEventListener('beforeunload', this.handleBeforeUnload, { once: true });\n    }\n\n    private postMessage(message: MessageToWorker) {\n        if (this.worker) {\n            this.worker.postMessage(message);\n        }\n    }\n\n    private workerOnMessageHandler = (event: MessageEvent): void => {\n        const data = event.data as MessageFromWorker;\n        this.messageHandler.handleMessage(data);\n    };\n\n    private handleBeforeUnload = () => { // bound this\n        this.worker?.terminate();\n    }\n\n    private async getOrCreateWorker(): Promise<Worker> {\n        if (!this.worker) {\n            this.worker = await this.createWebWorker();\n            this.worker.onmessage = this.workerOnMessageHandler;\n            // this.postMessage({ type: 'config', isTerminal: false }); // is default: isTerminal: false\n        }\n        return this.worker;\n    }\n\n    public async run(code: string) {\n        if (!code.endsWith(\"\\n\")) {\n            code += \"\\n\"; // make sure the script ends with a new line (needed for line comment in last line)\n        }\n        this.messageHandler.setCode(code); // for error message\n        await this.getOrCreateWorker();\n\n        const finishedPromise = new Promise<string>((resolve) => {\n            this.messageHandler.setFinishedResolver(resolve);\n        });\n\n        this.postMessage({ type: 'run', code });\n        return finishedPromise;\n    }\n\n    public frameTime(time: number) {\n        this.postMessage({ type: 'frameTime', time });\n    }\n\n    public stop() {\n        console.log(\"stop: Stop requested.\");\n        this.postMessage({ type: 'stop' });\n    }\n\n    public reset() {\n        if (this.worker) {\n            this.worker.terminate();\n            this.worker = undefined;\n        }\n        this.messageHandler.onResultResolved(\"terminated.\");\n    }\n\n    public putKeys(keys: string) {\n        this.postMessage({ type: 'putKeys', keys });\n    }\n}\n","import type { Editor } from \"codemirror\";\nimport type { ConfigEntryType, DatabaseMapType, DatabaseType, ExampleMapType, ExampleType, ICore, IUI, NodeWorkerFnType } from \"../Interfaces\";\nimport { LocoBasicMode } from \"./LocoBasicMode\";\nimport { VmMain } from \"./VmMain\";\nimport { VmMessageHandlerCallbacks } from \"../VmMessageHandler\";\n\ndeclare global {\n    interface Window {\n        locoVmWorker: NodeWorkerFnType\n    }\n}\n\nconst escapeText = (str: string) => str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\");\n\ntype CodeMirrorCallbackType = (value: string, e: Event) => void;\n\nexport class UI implements IUI {\n    private core?: ICore;\n    private vmMain?: VmMain;\n    private basicCm?: Editor;\n    private compiledCm?: Editor;\n    private compiledMessages: string[] = [];\n    private initialUserAction = false;\n    private readonly fnOnKeyPressHandler: (event: KeyboardEvent) => void;\n    private readonly fnOnClickHandler: (event: MouseEvent) => void;\n    private readonly fnOnUserKeyClickHandler: (event: MouseEvent) => void;\n    private speechSynthesisUtterance?: SpeechSynthesisUtterance;\n    private locoVmWorkerName = \"\";\n\n    constructor() {\n        this.fnOnKeyPressHandler = (event: KeyboardEvent) => this.onOutputTextKeydown(event);\n        this.fnOnClickHandler = (event: MouseEvent) => this.onOutputTextClick(event);\n        this.fnOnUserKeyClickHandler = (event: MouseEvent) => this.onUserKeyClick(event);\n    }\n\n    private debounce<T extends (...args: unknown[]) => void | Promise<void>>(func: T, fngetDelay: () => number): (...args: Parameters<T>) => void {\n        let timeoutId: ReturnType<typeof setTimeout>;\n        return function (this: unknown, ...args: Parameters<T>) {\n            // Fast hack for CodeMittor changes: Use delay 0 when change comes from \"setValue\" (and not from CodeMirror \"+input\")\n            const delay = (args as any)?.[1]?.[0]?.origin === \"setValue\" ? 0 : fngetDelay();\n            clearTimeout(timeoutId);\n            timeoutId = setTimeout(() => {\n                func.apply(this, args); // we expect \"this\" to be null\n            }, delay);\n        };\n    }\n\n    private static asyncDelay(fn: () => void, timeout: number): Promise<number> {\n        return (async () => {\n            const timerId = window.setTimeout(fn, timeout);\n            return timerId;\n        })();\n    }\n\n    private getCore() {\n        return this.core as ICore;\n    }\n\n    private getVmMain() {\n        return this.vmMain as VmMain;\n    }\n\n    private getBasicCm() {\n        return this.basicCm as Editor;\n    }\n\n    private getCompiledCm() {\n        return this.compiledCm as Editor;\n    }\n\n    private cancelSpeech() {\n        if (this.speechSynthesisUtterance && this.speechSynthesisUtterance.text) {\n            window.speechSynthesis.cancel();\n        }\n    }\n\n    private toggleElementHidden(id: string, editor?: Editor): boolean {\n        const element = document.getElementById(id) as HTMLElement;\n        element.hidden = !element.hidden;\n        if (!element.hidden && editor) {\n            editor.refresh();\n        }\n        return !element.hidden;\n    }\n\n    private setElementHidden(id: string, hidden: boolean): boolean {\n        const element = document.getElementById(id) as HTMLElement;\n        if (element.hidden !== hidden) {\n            element.hidden = hidden;\n        }\n        return element.hidden;\n    }\n\n    private setButtonOrSelectDisabled(id: string, disabled: boolean) {\n        const element = window.document.getElementById(id) as HTMLButtonElement | HTMLSelectElement;\n        element.disabled = disabled;\n    }\n\n    private async fnLoadScriptOrStyle(script: HTMLScriptElement | HTMLLinkElement): Promise<string> {\n        return new Promise((resolve, reject) => {\n            const onScriptLoad = function (event: Event) {\n                const type = event.type; // \"load\" or \"error\"\n                const node = event.currentTarget as HTMLScriptElement | HTMLLinkElement;\n                const key = node.getAttribute(\"data-key\") as string;\n\n                node.removeEventListener(\"load\", onScriptLoad, false);\n                node.removeEventListener(\"error\", onScriptLoad, false);\n\n                if (type === \"load\") {\n                    resolve(key);\n                } else {\n                    reject(key);\n                }\n            };\n            script.addEventListener(\"load\", onScriptLoad, false);\n            script.addEventListener(\"error\", onScriptLoad, false);\n            document.getElementsByTagName(\"head\")[0].appendChild(script);\n        });\n    }\n\n    private async loadScript(url: string, key: string): Promise<string> {\n        const script = document.createElement(\"script\");\n\n        script.type = \"text/javascript\";\n        script.async = true;\n        script.src = url;\n\n        script.setAttribute(\"data-key\", key);\n\n        return this.fnLoadScriptOrStyle(script);\n    }\n\n    public getCurrentDataKey(): string {\n        return document.currentScript && document.currentScript.getAttribute(\"data-key\") || \"\";\n    }\n\n    private scrollToBottom(id: string): void {\n        const element = document.getElementById(id) as HTMLElement;\n        element.scrollTop = element.scrollHeight;\n    }\n\n    addOutputText = (str: string, needCls?: boolean, hasGraphics?: boolean) => { // bound this\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        if (needCls) {\n            outputText.innerHTML = str;\n            if (!hasGraphics) {\n                this.setButtonOrSelectDisabled(\"exportSvgButton\", true);\n            }\n        } else {\n            outputText.innerHTML += str;\n        }\n        if (hasGraphics) {\n            this.setButtonOrSelectDisabled(\"exportSvgButton\", false);\n        } else {\n            this.scrollToBottom(\"outputText\");\n        }\n    }\n\n    private onUserKeyClick(event: Event) {\n        const target = event.target as HTMLButtonElement;\n        const dataKey = target.getAttribute(\"data-key\");\n        this.putKeysInBuffer(String.fromCharCode(Number(dataKey)));\n    }\n\n    private onSetUiKeys = (codes: number[]): void => { // bound this\n        if (codes.length) {\n            const code = codes[0];\n            const userKeys = document.getElementById(\"userKeys\") as HTMLSpanElement;\n            if (code) {\n                const char = String.fromCharCode(code);\n                const buttonStr = `<button data-key=\"${code}\" title=\"${char}\">${char}</button>`;\n                userKeys.innerHTML += buttonStr;\n            } else {\n                userKeys.innerHTML = \"\";\n            }\n        }\n    }\n\n    private async waitForVoices(callback: () => void): Promise<void> {\n        return new Promise<void>((resolve) => {\n            window.speechSynthesis.addEventListener(\"voiceschanged\", () => {\n                callback();\n                resolve();\n            }, { once: true });\n\n            if (window.speechSynthesis.getVoices().length) {\n                callback();\n                resolve();\n            }\n        });\n    }\n\n    private async waitForUserInteraction(buttonId: string): Promise<void> {\n        this.toggleElementHidden(buttonId);\n        const button = document.getElementById(buttonId) as HTMLButtonElement;\n\n        return new Promise<void>((resolve) => {\n            button.addEventListener(\"click\", () => {\n                this.setElementHidden(buttonId, true);\n                resolve();\n            }, { once: true });\n        });\n    }\n\n    private logVoiceDebugInfo(selectedVoice?: SpeechSynthesisVoice): void {\n        const debug = this.getCore().getConfigMap().debug;\n        if (debug > 1) {\n            const voicesString = window.speechSynthesis.getVoices().map((v, i) => `${i}: ${v.lang}: ${v.name}`).join(\"\\n \");\n            const msg = `getSpeechSynthesisUtterance: voice=${selectedVoice?.lang}: ${selectedVoice?.name}, voices:\\n ${voicesString}`;\n            console.log(msg);\n            if (debug >= 16) {\n                this.addOutputText(msg + \"\\n\");\n            }\n        }\n    }\n\n    private async getSpeechSynthesisUtterance(): Promise<SpeechSynthesisUtterance> {\n        if (this.speechSynthesisUtterance) {\n            return this.speechSynthesisUtterance;\n        }\n\n        if (!window.speechSynthesis) {\n            throw new Error(\"Speech Synthesis API is not supported in this browser.\");\n        }\n\n        this.speechSynthesisUtterance = new SpeechSynthesisUtterance();\n        const utterance = this.speechSynthesisUtterance;\n        utterance.lang = document.documentElement.lang || \"en\";\n\n        const selectVoice = (): SpeechSynthesisVoice | undefined => {\n            const voices = window.speechSynthesis.getVoices();\n            return voices.find((voice) => voice.lang === \"en-GB\" && voice.name === \"Daniel\");\n        };\n\n        const onVoicesChanged = (): void => {\n            const selectedVoice = selectVoice();\n            if (selectedVoice) {\n                utterance.voice = selectedVoice;\n            }\n            this.logVoiceDebugInfo(selectedVoice);\n        };\n\n        await this.waitForVoices(onVoicesChanged);\n\n        if (!this.initialUserAction) {\n            await this.waitForUserInteraction(\"startSpeechButton\");\n        }\n\n        return utterance;\n    }\n\n    private onGeolocation = async (): Promise<string> => { // bound this\n        if (navigator.geolocation) {\n            return new Promise<string>((resolve, reject) => {\n                const positionCallback: PositionCallback = (position) => {\n                    const { latitude, longitude } = position.coords;\n                    const json = {\n                        latitude,\n                        longitude\n                    }\n                    resolve(JSON.stringify(json));\n                };\n                const options = {\n                    enableHighAccuracy: true,\n                    timeout: 5000,\n                    maximumAge: 0\n                };\n                navigator.geolocation.getCurrentPosition(positionCallback, reject, options);\n            });\n        }\n        return Promise.reject(\"ERROR: Geolocation is not supported by this browser.\");\n    }\n\n    private onSpeak = async (text: string, pitch: number): Promise<void> => { // bound this\n        const debug = this.getCore().getConfigMap().debug;\n        if (debug) {\n            console.log(\"onSpeak: \", text, pitch);\n        }\n\n        const msg = await this.getSpeechSynthesisUtterance();\n        const stopButton = window.document.getElementById(\"stopButton\") as HTMLButtonElement;\n        if (stopButton.disabled) { // Stop button inactive, program already stopped?\n            return Promise.reject(\"Speech canceled.\");\n        }\n\n        msg.text = text;\n        msg.pitch = pitch; // 0 to 2\n\n        return new Promise<void>((resolve, reject) => {\n            msg.onend = () => resolve();\n            msg.onerror = (event) => {\n                reject(new Error(`Speech synthesis: ${event.error}`));\n            };\n\n            window.speechSynthesis.speak(msg);\n        });\n    }\n\n    private updateConfigParameter(name: string, value: string | boolean) {\n        const core = this.getCore();\n        const configAsRecord = core.getConfigMap() as Record<string, unknown>;\n        const defaultConfigAsRecord = core.getDefaultConfigMap() as Record<string, unknown>;\n\n        configAsRecord[name] = value;\n\n        const url = new URL(window.location.href);\n        if (configAsRecord[name] !== defaultConfigAsRecord[name]) {\n            url.searchParams.set(name, String(value));\n        } else {\n            url.searchParams.delete(name);\n        }\n        history.pushState({}, \"\", url.href);\n    }\n\n    private hasCompiledError() {\n        const compiledScript = this.getCompiledCm().getValue();\n        const hasError = compiledScript.startsWith(\"ERROR:\");\n        this.addOutputText(hasError ? escapeText(compiledScript) : \"\", true);\n        return hasError;\n    }\n\n    // Helper function to update button states\n    private updateButtonStates(states: Record<string, boolean>): void {\n        Object.entries(states).forEach(([id, disabled]) => {\n            this.setButtonOrSelectDisabled(id, disabled);\n        });\n    }\n\n    private beforeExecute() {\n        this.setElementHidden(\"convertArea\", true);\n\n        const buttonStates = {\n            enterButton: false,\n            executeButton: true,\n            stopButton: false,\n            convertButton: true,\n            databaseSelect: true,\n            exampleSelect: true\n        };\n        this.updateButtonStates(buttonStates);\n\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        //outputText.setAttribute(\"contenteditable\", \"false\");\n        outputText.addEventListener(\"keydown\", this.fnOnKeyPressHandler, false);\n        outputText.addEventListener(\"click\", this.fnOnClickHandler, false);\n\n        const userKeys = document.getElementById(\"userKeys\") as HTMLSpanElement;\n        userKeys.addEventListener(\"click\", this.fnOnUserKeyClickHandler, false);\n    }\n\n    private afterExecute() {\n        const outputText = document.getElementById(\"outputText\") as HTMLPreElement;\n        outputText.removeEventListener(\"keydown\", this.fnOnKeyPressHandler, false);\n        outputText.removeEventListener(\"click\", this.fnOnClickHandler, false);\n        // do not change after rendering: outputText.setAttribute(\"contenteditable\", \"true\");\n        this.onSetUiKeys([0]); // remove user keys\n\n        this.updateButtonStates({\n            enterButton: true,\n            executeButton: false,\n            stopButton: true,\n            convertButton: false,\n            databaseSelect: false,\n            exampleSelect: false\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onExecuteButtonClick = async (_event: Event): Promise<void> => {\n        if (this.hasCompiledError()) {\n            return;\n        }\n        this.beforeExecute();\n\n        const compiledScript = this.getCompiledCm().getValue(); // Execute the compiled script\n        const output = await this.getVmMain().run(compiledScript);\n        if (output) { // some remaining output?\n            this.addOutputText(output);\n        }\n        if (this.compiledMessages.length) { // compile warning messages?\n            const messageString = escapeText(this.compiledMessages.join(\"\\n\"));\n            this.addOutputText(`<hr><details><summary>Compile warning messages: ${this.compiledMessages.length}</summary>${messageString}</details>`);\n        }\n        this.afterExecute();\n    };\n\n    private onCompiledTextChange = (): void => { // bound this\n        if (this.hasCompiledError()) {\n            return;\n        }\n        const autoExecuteInput = document.getElementById(\"autoExecuteInput\") as HTMLInputElement;\n        if (autoExecuteInput.checked) {\n            const executeButton = window.document.getElementById(\"executeButton\") as HTMLButtonElement;\n            if (!executeButton.disabled) {\n                executeButton.dispatchEvent(new Event(\"click\"));\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onCompileButtonClick = (_event: Event): void => { // bound this\n        const core = this.getCore();\n        this.setButtonOrSelectDisabled(\"compileButton\", true);\n        const input = this.getBasicCm().getValue();\n        UI.asyncDelay(() => {\n            const { compiledScript, messages } = core.compileScript(input);\n\n            this.compiledMessages = messages;\n            this.getCompiledCm().setValue(compiledScript);\n            this.setButtonOrSelectDisabled(\"compileButton\", false);\n            if (!compiledScript.startsWith(\"ERROR:\")) {\n                this.setButtonOrSelectDisabled(\"labelRemoveButton\", false);\n            }\n        }, 1);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onEnterButtonClick = (_event: Event): void => { // bound this\n        this.putKeysInBuffer(\"\\x0d\");\n        this.clickStartSpeechButton(); // we just did a user interaction\n    }\n\n    private onAutoCompileInputChange = (event: Event): void => { // bound this\n        const autoCompileInput = event.target as HTMLInputElement;\n\n        this.updateConfigParameter(\"autoCompile\", autoCompileInput.checked);\n    }\n\n    private onAutoExecuteInputChange = (event: Event): void => { // bound this\n        const autoExecuteInput = event.target as HTMLInputElement;\n\n        this.updateConfigParameter(\"autoExecute\", autoExecuteInput.checked);\n    }\n\n    private onShowOutputInputChange = (event: Event): void => { // bound this\n        const showOutputInput = event.target as HTMLInputElement;\n        this.toggleElementHidden(\"outputArea\");\n\n        this.updateConfigParameter(\"showOutput\", showOutputInput.checked);\n    }\n\n    private onShowBasicInputChange = (event: Event): void => { // bound this\n        const showBasicInput = event.target as HTMLInputElement;\n        this.toggleElementHidden(\"basicArea\", this.basicCm);\n\n        this.updateConfigParameter(\"showBasic\", showBasicInput.checked);\n    }\n\n    private onShowCompiledInputChange = (event: Event): void => { // bound this\n        const showCompiledInput = event.target as HTMLInputElement;\n        this.toggleElementHidden(\"compiledArea\", this.compiledCm);\n\n        this.updateConfigParameter(\"showCompiled\", showCompiledInput.checked);\n    }\n\n    private clickStartSpeechButton() {\n        const startSpeechButton = window.document.getElementById(\"startSpeechButton\") as HTMLButtonElement;\n        if (!startSpeechButton.hidden) { // if the startSpeech button is visible, activate it to allow speech\n            startSpeechButton.dispatchEvent(new Event(\"click\"));\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onStopButtonClick = (_event: Event): void => { // bound this\n        this.cancelSpeech(); // maybe a speech was waiting\n        this.clickStartSpeechButton(); // we just did a user interaction\n        this.setButtonOrSelectDisabled(\"stopButton\", true);\n        this.getVmMain().stop();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onResetButtonClick = (_event: Event): void => { // bound this\n        this.cancelSpeech();\n        this.clickStartSpeechButton(); // we just did a user interaction\n        this.getVmMain().reset();\n\n        const frameInput = window.document.getElementById(\"frameInput\") as HTMLInputElement;\n        if (Number(frameInput.value) !== 50) {\n            frameInput.value = \"50\"; // default frame rate\n            frameInput.dispatchEvent(new Event(\"change\"));\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onConvertButtonClick = (_event: Event): void => { // bound this\n        this.toggleElementHidden(\"convertArea\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicReplaceButtonClick = (_event: Event): void => { // bound this\n        this.getBasicCm().execCommand(\"replace\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicReplaceAllButtonClick = (_event: Event): void => { // bound this\n        this.getBasicCm().execCommand(\"replaceAll\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicSearchButtonClick = (_event: Event): void => { // bound this\n        if (!this.toggleElementHidden(\"basicSearchArea\")) {\n            this.getBasicCm().execCommand(\"clearSearch\");\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicSearchNextButtonClick = (_event: Event): void => { // bound this\n        this.getBasicCm().execCommand(\"findNext\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicSearchPrevButtonClick = (_event: Event): void => { // bound this\n        this.getBasicCm().execCommand(\"findPrev\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onBasicSearchInputChange = (_event: Event): void => { // bound this\n        this.getBasicCm().execCommand(\"clearSearch\");\n    }\n\n    private onFrameInputChange = (event: Event): void => { // bound this\n        const frameInput = event.target as HTMLInputElement;\n        const value = Number(frameInput.value);\n        this.getVmMain().frameTime(value);\n\n        const frameInputLabel = window.document.getElementById(\"frameInputLabel\") as HTMLLabelElement;\n        frameInputLabel.innerText = `Frame ${frameInput.value} ms`;\n    }\n\n    private static addLabels(input: string) {\n        const lineParts = input.split(\"\\n\");\n        let lastLine = 0;\n\n        for (let i = 0; i < lineParts.length; i += 1) {\n            let lineNum = parseInt(lineParts[i], 10);\n\n            if (isNaN(lineNum)) {\n                lineNum = lastLine + 1;\n                lineParts[i] = `${lineNum} ${lineParts[i]}`;\n            }\n            lastLine = lineNum;\n        }\n        return lineParts.join(\"\\n\");\n    }\n\n    private static removeUnusedLabels(input: string, usedLabels: Record<string, unknown>) {\n        const lineParts = input.split(\"\\n\");\n        for (let i = 0; i < lineParts.length; i += 1) {\n            const lineNum = parseInt(lineParts[i], 10);\n\n            if (!isNaN(lineNum) && !usedLabels[lineNum]) {\n                lineParts[i] = lineParts[i].replace(/^\\d+\\s/, \"\");\n            }\n        }\n        return lineParts.join(\"\\n\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onLabelAddButtonClick = (_event: Event): void => { // bound this\n        const input = this.getBasicCm().getValue();\n        const output = input ? UI.addLabels(input) : \"\";\n\n        if (output && output !== input) {\n            this.getBasicCm().setValue(output);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onLabelRemoveButtonClick = (_event: Event): void => { // bound this\n        const input = this.getBasicCm().getValue();\n\n        const core = this.getCore();\n        const semantics = core.getSemantics();\n        const usedLabels = semantics.getUsedLabels();\n\n        const allUsedLabels: Record<string, boolean> = {};\n        for (const type of Object.keys(usedLabels)) {\n            for (const label of Object.keys(usedLabels[type])) {\n                allUsedLabels[label] = true;\n            }\n        }\n\n        const output = UI.removeUnusedLabels(input, allUsedLabels);\n\n        if (output && output !== input) {\n            this.getBasicCm().setValue(output);\n        }\n    }\n\n    private onBasicTextChange = async (): Promise<void> => { // bound this\n        this.setButtonOrSelectDisabled(\"labelRemoveButton\", true);\n        const autoCompileInput = document.getElementById(\"autoCompileInput\") as HTMLInputElement;\n        if (autoCompileInput.checked) {\n            const compileButton = window.document.getElementById(\"compileButton\") as HTMLButtonElement;\n            if (!compileButton.disabled) {\n                compileButton.dispatchEvent(new Event(\"click\"));\n            }\n        }\n    }\n\n    private async getExampleScript(example: ExampleType) {\n        if (example.script !== undefined) {\n            return example.script;\n        }\n        const core = this.getCore();\n        const database = core.getDatabase();\n        const scriptName = database.source + \"/\" + example.key + \".js\";\n        try {\n            await this.loadScript(scriptName, example.key);\n        } catch (error) {\n            console.error(\"Load Example\", scriptName, error);\n        }\n        return example.script || \"\";\n    }\n\n    private onExampleSelectChange = async (event: Event): Promise<void> => { // bound this\n        const core = this.getCore();\n\n        this.addOutputText(\"\", true); // clear output\n\n        const exampleSelect = event.target as HTMLSelectElement;\n        const exampleName = exampleSelect.value;\n        const example = core.getExample(exampleName); //.script || \"\";\n\n        if (example) {\n            this.updateConfigParameter(\"example\", exampleName);\n\n            const script = await this.getExampleScript(example);\n            this.getBasicCm().setValue(script);\n        } else {\n            console.warn(\"onExampleSelectChange: example not found:\", exampleName);\n        }\n    }\n\n    private setExampleSelectOptions(exampleMap: ExampleMapType, exampleKey: string): void {\n        const maxTitleLength = 160;\n        const maxTextLength = 60; // (32 visible?)\n        const exampleSelect = document.getElementById(\"exampleSelect\") as HTMLSelectElement;\n        exampleSelect.options.length = 0;\n\n        for (const key of Object.keys(exampleMap)) {\n            const example = exampleMap[key];\n\n            if (example.meta !== \"D\") { // skip data files\n                const title = (key + \": \" + example.title).substring(0, maxTitleLength);\n                const option = window.document.createElement(\"option\");\n                option.value = key;\n                option.text = title.substring(0, maxTextLength);\n                option.title = title;\n                option.selected = key === exampleKey;\n                exampleSelect.add(option);\n            }\n        }\n    }\n\n    private async getExampleMap(databaseItem: DatabaseType) {\n        if (databaseItem.exampleMap) {\n            return databaseItem.exampleMap;\n        }\n        databaseItem.exampleMap = {};\n        const scriptName = databaseItem.source + \"/0index.js\";\n        try {\n            await this.loadScript(scriptName, \"0index\");\n        } catch (error) {\n            console.error(\"Load Example Map \", scriptName, error);\n        }\n        return databaseItem.exampleMap;\n    }\n\n    private onDatabaseSelectChange = async (event: Event): Promise<void> => { // bound this\n        const core = this.getCore();\n        const databaseSelect = event.target as HTMLSelectElement;\n\n        const database = databaseSelect.value;\n        const config = core.getConfigMap();\n        config.database = database;\n\n        const databaseMap = core.getDatabaseMap();\n        const databaseItem = databaseMap[database];\n        if (databaseItem) {\n            this.updateConfigParameter(\"database\", database);\n        }\n\n        const exampleMap = await this.getExampleMap(databaseItem);\n\n        this.setExampleSelectOptions(exampleMap, config.example);\n\n        const exampleSelect = window.document.getElementById(\"exampleSelect\") as HTMLSelectElement;\n        exampleSelect.dispatchEvent(new Event(\"change\"));\n    }\n\n    private setDatabaseSelectOptions(databaseMap: DatabaseMapType, database: string): void {\n        const databaseSelect = document.getElementById(\"databaseSelect\") as HTMLSelectElement;\n        databaseSelect.options.length = 0;\n\n        for (const key of Object.keys(databaseMap)) {\n            const example = databaseMap[key];\n\n            const option = window.document.createElement(\"option\");\n            option.value = key;\n            option.text = key;\n            option.title = example.source;\n            option.selected = key === database;\n            databaseSelect.add(option);\n        }\n    }\n\n    private onHelpButtonClick = (): void => { // bound this\n        window.open(\"https://github.com/benchmarko/LocoBasic/#readme\");\n    }\n\n    private static fnDownloadBlob(blob: Blob, filename: string): void {\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        const clickHandler = function () {\n            setTimeout(function () {\n                URL.revokeObjectURL(url);\n                a.removeEventListener(\"click\", clickHandler);\n            }, 150);\n        };\n\n        a.href = url;\n        a.download = filename;\n        a.addEventListener(\"click\", clickHandler, false);\n        a.click();\n    }\n\n    private getExampleName(): string {\n        const input = this.getBasicCm().getValue();\n        const firstLine = input.slice(0, input.indexOf(\"\\n\"));\n        const matches = firstLine.match(/^\\s*\\d*\\s*(?:REM|rem|')\\s*(\\w+)/);\n        const name = matches ? matches[1] : this.getCore().getConfigMap().example || \"locobasic\";\n        return name;\n    }\n\n    private onExportSvgButtonClick = (): void => { // bound this\n        const outputText = window.document.getElementById(\"outputText\") as HTMLElement;\n        const svgElements = outputText.getElementsByTagName(\"svg\");\n        if (!svgElements.length) {\n            console.warn(\"onExportSvgButtonClick: No SVG found.\");\n            return;\n        }\n        const svgElement = svgElements[0];\n        const svgData = svgElement.outerHTML;\n        const preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n        const svgBlob = new Blob([preface, svgData], {\n            type: \"image/svg+xml;charset=utf-8\"\n        });\n\n        const example = this.getExampleName();\n        const filename = `${example}.svg`;\n        UI.fnDownloadBlob(svgBlob, filename);\n    }\n\n    private onStandaloneButtonClick = async () => { // bound this\n        const locoVmWorker = await this.getLocoVmWorker();\n        const core = this.getCore();\n        const compiledScript = this.getCompiledCm().getValue();\n        const usedInstrMap = core.getSemantics().getHelper().getInstrMap();\n        const output = core.createStandaloneScript(locoVmWorker, compiledScript, Object.keys(usedInstrMap));\n\n        const blob = new Blob([output], { type: \"text/javascript\" });\n        const objectURL = window.URL.createObjectURL(blob);\n        const win = window.open(objectURL, \"Standalone Script\", \"width=640,height=300,resizable=yes,scrollbars=yes,dependent=yes\");\n        if (win && win.focus) {\n            win.focus();\n        }\n        window.URL.revokeObjectURL(objectURL);\n    }\n\n    private putKeysInBuffer(keys: string): void {\n        if (this.getCore().getConfigMap().debug) {\n            console.log(\"putKeysInBuffer:\", keys);\n        }\n        this.getVmMain().putKeys(keys);\n    }\n\n    private onOutputTextKeydown(event: KeyboardEvent): void {\n        const key = event.key;\n        if (key === \"Escape\") {\n            this.cancelSpeech();\n            this.getVmMain().stop(); // request stop\n        } else if (key === \"Enter\") {\n            this.putKeysInBuffer(\"\\x0d\");\n            event.preventDefault();\n        } else if (key.length === 1 && event.ctrlKey === false && event.altKey === false) {\n            this.putKeysInBuffer(key);\n            event.preventDefault();\n        }\n    }\n\n    private getClickedKey(e: MouseEvent): string | undefined {\n        let textNode: Node | null = null;\n        let offset: number;\n\n        if (document.caretPositionFromPoint) {\n            const caretPosition = document.caretPositionFromPoint(e.clientX, e.clientY);\n            if (!caretPosition) {\n                return;\n            }\n            textNode = caretPosition.offsetNode;\n            offset = caretPosition.offset;\n        } else if (document.caretRangeFromPoint) {\n            // Use WebKit-proprietary fallback method\n            const range = document.caretRangeFromPoint(e.clientX, e.clientY);\n            if (!range) {\n                return;\n            }\n            textNode = range.startContainer;\n            offset = range.startOffset;\n        } else {\n            return;\n        }\n\n        if (textNode?.nodeType === 3) { // Check if the node is a text node\n            const textContent = textNode.textContent;\n            return textContent ? textContent.charAt(offset) : \"\";\n        }\n    }\n\n    private onOutputTextClick(event: MouseEvent): void {\n        const key = this.getClickedKey(event);\n        if (key) {\n            this.putKeysInBuffer(key);\n            event.preventDefault(); // Prevent default action if needed\n        }\n    }\n\n    private fnDecodeUri(s: string): string {\n        let decoded = \"\";\n\n        try {\n            decoded = decodeURIComponent(s.replace(/\\+/g, \" \"));\n        } catch (err) {\n            if (err instanceof Error) {\n                err.message += \": \" + s;\n            }\n            console.error(err);\n        }\n        return decoded;\n    }\n\n    private parseUri(config: Record<string, ConfigEntryType>): string[] {\n        const urlQuery = window.location.search.substring(1);\n        const rSearch = /([^&=]+)=?([^&]*)/g;\n        const args: string[] = [];\n        let match: RegExpExecArray | null;\n\n        while ((match = rSearch.exec(urlQuery)) !== null) {\n            const name = this.fnDecodeUri(match[1]);\n            const value = this.fnDecodeUri(match[2]);\n\n            if (value !== null && config[name] !== undefined) {\n                args.push(name + \"=\" + value);\n            }\n        }\n        return args;\n    }\n\n    private initializeEditor(\n        editorId: string,\n        mode: string,\n        changeHandler: () => void,\n        debounceDelay: number\n    ): Editor {\n        const editorElement = window.document.getElementById(editorId) as HTMLElement;\n        const editor = window.CodeMirror(editorElement, {\n            lineNumbers: true,\n            mode,\n        });\n        editor.on(\"changes\", this.debounce(changeHandler, () => debounceDelay)); // changeHandler.bind(this)\n        return editor;\n    }\n\n    private syncInputState(inputId: string, configValue: boolean): void {\n        const input = window.document.getElementById(inputId) as HTMLInputElement;\n        if (input.checked !== configValue) {\n            input.checked = configValue;\n            input.dispatchEvent(new Event(\"change\"));\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onCodeMirrorOpenDialog = (_template: unknown, callback: CodeMirrorCallbackType, _options: unknown): void => { // bound this\n        // see: https://codemirror.net/5/addon/dialog/dialog.js\n        this.setElementHidden(\"basicSearchArea\", false);\n\n        const basicSearchInput = document.getElementById(\"basicSearchInput\") as HTMLInputElement;\n        if (basicSearchInput.value) {\n            callback(basicSearchInput.value, new Event(\"\"));\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private onCodeMirrorOpenConfirm = (_template: unknown, callbacks: CodeMirrorCallbackType[], _options: unknown): void => { // bound this\n        const callback = callbacks[0];\n        //TTT callback(\"bla\", new Event(\"\")); // we need to call the callback with some value, otherwise the dialog will not close\n        console.log(\"TTT\", callback);\n        /*\n        this.setElementHidden(\"basicSearchArea\", false);\n        \n        const basicSearchInput = document.getElementById(\"basicSearchInput\") as HTMLInputElement;\n        if (basicSearchInput.value) {\n            callback(basicSearchInput.value, new Event(\"\"));\n        }\n        */\n    }\n\n    private async getLocoVmWorker() {\n        if (!window.locoVmWorker) {\n            await this.loadScript(this.locoVmWorkerName, \"\");\n        }\n        return window.locoVmWorker;\n    }\n\n    public async createWebWorker() {\n        let worker: Worker;\n        // Detect if running on file:// protocol\n        const isFileProtocol = window.location.protocol === 'file:';\n        if (isFileProtocol) {\n            const locoVmWorker = await this.getLocoVmWorker();\n            const preparedWorkerFnString = String(locoVmWorker.workerFn);\n            const workerScript = `(${preparedWorkerFnString})(self);`;\n\n            // Use Blob for file:// protocol\n            const blob = new Blob([workerScript], { type: \"text/javascript\" });\n            const objectURL = window.URL.createObjectURL(blob);\n            worker = new Worker(objectURL);\n            window.URL.revokeObjectURL(objectURL);\n        } else {\n            // Use file-based worker for http/https\n            const workerUrl = new URL(this.locoVmWorkerName, window.location.href);\n            worker = new Worker(workerUrl);\n        }\n        return worker;\n    }\n\n    private createMessageHandlerCallbacks() {\n        const callbacks: VmMessageHandlerCallbacks = {\n            onFlush: (message: string, needCls?: boolean, hasGraphics?: boolean) => {\n                this.addOutputText(message, needCls, hasGraphics);\n            },\n            onInput: (prompt: string) => {\n                const input = window.prompt(prompt);\n                return Promise.resolve(input);\n            },\n            onGeolocation: () => this.onGeolocation(),\n            onSpeak: (message: string, pitch: number) => this.onSpeak(message, pitch),\n            onKeyDef: (codes: number[]) => {\n                this.onSetUiKeys(codes);\n            }\n        };\n        return callbacks;\n    }\n\n    public onWindowLoadContinue(core: ICore, locoVmWorkerName: string): void {\n        this.core = core;\n        const config = core.getConfigMap();\n        const args = this.parseUri(config);\n        core.parseArgs(args, config);\n        this.locoVmWorkerName = locoVmWorkerName;\n\n        // Map of element IDs to event handlers\n        const buttonHandlers: Record<string, EventListener> = {\n            compileButton: this.onCompileButtonClick,\n            enterButton: this.onEnterButtonClick,\n            executeButton: this.onExecuteButtonClick,\n            stopButton: this.onStopButtonClick,\n            resetButton: this.onResetButtonClick,\n            convertButton: this.onConvertButtonClick,\n            basicReplaceButton: this.onBasicReplaceButtonClick,\n            basicReplaceAllButton: this.onBasicReplaceAllButtonClick,\n            basicSearchButton: this.onBasicSearchButtonClick,\n            basicSearchNextButton: this.onBasicSearchNextButtonClick,\n            basicSearchPrevButton: this.onBasicSearchPrevButtonClick,\n            labelAddButton: this.onLabelAddButtonClick,\n            labelRemoveButton: this.onLabelRemoveButtonClick,\n            helpButton: this.onHelpButtonClick,\n            exportSvgButton: this.onExportSvgButtonClick,\n            standaloneButton: this.onStandaloneButtonClick\n        };\n\n        const inputAndSelectHandlers: Record<string, EventListener> = {\n            autoCompileInput: this.onAutoCompileInputChange,\n            autoExecuteInput: this.onAutoExecuteInputChange,\n            showOutputInput: this.onShowOutputInputChange,\n            showBasicInput: this.onShowBasicInputChange,\n            showCompiledInput: this.onShowCompiledInputChange,\n            databaseSelect: this.onDatabaseSelectChange,\n            exampleSelect: this.onExampleSelectChange,\n            basicSearchInput: this.onBasicSearchInputChange,\n            frameInput: this.onFrameInputChange,\n        };\n\n        // Attach event listeners for buttons\n        Object.entries(buttonHandlers).forEach(([id, handler]) => {\n            const element = window.document.getElementById(id) as HTMLButtonElement;\n            element.addEventListener(\"click\", handler, false);\n        });\n\n        // Attach event listeners for inputs or selects\n        Object.entries(inputAndSelectHandlers).forEach(([id, handler]) => {\n            const element = window.document.getElementById(id) as HTMLInputElement | HTMLSelectElement;\n            element.addEventListener(\"change\", handler, false); // handler.bind(this)\n        });\n\n        // Initialize CodeMirror editors\n        const WinCodeMirror = window.CodeMirror;\n        if (WinCodeMirror) {\n            const getModeFn = LocoBasicMode.getMode;\n            WinCodeMirror.defineMode(\"lbasic\", getModeFn);\n\n            this.basicCm = this.initializeEditor(\"basicEditor\", \"lbasic\", this.onBasicTextChange, config.debounceCompile);\n            this.compiledCm = this.initializeEditor(\"compiledEditor\", \"javascript\", this.onCompiledTextChange, config.debounceExecute);\n\n            WinCodeMirror.defineExtension(\"openDialog\", this.onCodeMirrorOpenDialog);\n            WinCodeMirror.defineExtension(\"openConfirm\", this.onCodeMirrorOpenConfirm);\n        }\n\n        // Handle browser navigation (popstate)\n        window.addEventListener(\"popstate\", (event: PopStateEvent) => {\n            if (event.state) {\n                Object.assign(config, core.getDefaultConfigMap()); // load defaults\n                const args = this.parseUri(config);\n                core.parseArgs(args, config);\n                const databaseSelect = window.document.getElementById(\"databaseSelect\") as HTMLSelectElement;\n                databaseSelect.dispatchEvent(new Event(\"change\"));\n            }\n        });\n\n        // Sync UI state with config\n        this.syncInputState(\"showOutputInput\", config.showOutput);\n        this.syncInputState(\"showBasicInput\", config.showBasic);\n        this.syncInputState(\"showCompiledInput\", config.showCompiled);\n        this.syncInputState(\"autoCompileInput\", config.autoCompile);\n        this.syncInputState(\"autoExecuteInput\", config.autoExecute);\n\n        window.document.addEventListener(\"click\", () => {\n            this.initialUserAction = true;\n        }, { once: true });\n\n        const messageHandlerCallbacks = this.createMessageHandlerCallbacks();\n        this.vmMain = new VmMain(messageHandlerCallbacks, () => this.createWebWorker());\n\n        // Initialize database and examples\n        UI.asyncDelay(() => {\n            const databaseMap = core.initDatabaseMap();\n            this.setDatabaseSelectOptions(databaseMap, config.database);\n            const url = window.location.href;\n            history.replaceState({}, \"\", url);\n            const databaseSelect = window.document.getElementById(\"databaseSelect\") as HTMLSelectElement;\n            databaseSelect.dispatchEvent(new Event(\"change\"));\n        }, 10);\n    }\n}\n"],"names":[],"mappings":"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"}