{"version":3,"file":"locoVmWorker.js","sources":["../src/vm/VmWorker.ts"],"sourcesContent":["import type { BrowserWorkerThreadsType, MessageFromWorker, MessageToWorker, NodeWorkerThreadsType } from \"../Interfaces\";\n//import { CommaOpChar, TabOpChar } from \"../Constants\";\n\ndeclare function require(name: string): NodeWorkerThreadsType;\n\ntype RecursiveArray<T> = T | RecursiveArray<T>[];\ntype RestoreMapType = Record<string, number>;\ntype MessageEventType = {\n    data: MessageToWorker;\n};\n\nexport const workerFn = (parentPort: NodeWorkerThreadsType[\"parentPort\"] | BrowserWorkerThreadsType[\"parentPort\"]) => {\n    const isNodeParentPort = 'on' in parentPort;\n\n    // The vm object will be passed to the worker's code as `_o`. (Make sure you use arrow style:  fn: [async] (...) =>  { ... } )\n    const vm = {\n        _commaOpChar: \"\\u2192\", // Unicode arrow right (Constants.CommaOpChar)\n        _tabOpChar: \"\\u21d2\", // Unicode double arrow right (Constants.TabOpChar)\n\n        // Color codes for terminal (foreground). `\\x1b[${code + add}m`, e.g. Navy: pen: \"\\x1b[34m\" or paper: \"\\x1b[44m\"\n        _ansiColorCodes: [\n            30, //  0 Black\n            34, //  1 Blue\n            94, //  2 Bright Blue\n            31, //  3 Red\n            35, //  4 Magenta (Purple?)\n            35, //  5 Mauve ???\n            91, //  6 Bright Red\n            35, //  7 Purple\n            95, //  8 Bright Magenta ?\n            32, //  9 Green\n            36, // 10 Cyan\n            94, // 11 Sky Blue ?\n            33, // 12 Yellow\n            37, // 13 White\n            94, // 14 Pastel Blue ?\n            91, // 15 Orange ?\n            95, // 16 Pink (Bright Magenta?)\n            95, // 17 Pastel Magenta?\n            92, // 18 Bright Green\n            92, // 19 Sea Green\n            96, // 20 Bright Cyan\n            96, // 21 Lime ?\n            92, // 22 Pastel Green (Bright Green)\n            96, // 23 Pastel Cyan ?\n            93, // 24 Bright Yellow\n            93, // 25 Pastel Yellow\n            37, // 26 Bright White\n            37, // 27 White (same as 13)\n            95, // 28 Bright Magenta (same as 8)\n            93, // 29 Pastel Yellow (same as 25)\n            34, // 30 Blue (same as 1)\n            92 //  31 Sea Green (same as 19)\n        ],\n        _cpcColors: [ // browser\n            \"#000000\", //  0 Black\n            \"#000080\", //  1 Blue\n            \"#0000FF\", //  2 Bright Blue\n            \"#800000\", //  3 Red\n            \"#800080\", //  4 Magenta\n            \"#8000FF\", //  5 Mauve\n            \"#FF0000\", //  6 Bright Red\n            \"#FF0080\", //  7 Purple\n            \"#FF00FF\", //  8 Bright Magenta\n            \"#008000\", //  9 Green\n            \"#008080\", // 10 Cyan\n            \"#0080FF\", // 11 Sky Blue\n            \"#808000\", // 12 Yellow\n            \"#808080\", // 13 White\n            \"#8080FF\", // 14 Pastel Blue\n            \"#FF8000\", // 15 Orange\n            \"#FF8080\", // 16 Pink\n            \"#FF80FF\", // 17 Pastel Magenta\n            \"#00FF00\", // 18 Bright Green\n            \"#00FF80\", // 19 Sea Green\n            \"#00FFFF\", // 20 Bright Cyan\n            \"#80FF00\", // 21 Lime\n            \"#80FF80\", // 22 Pastel Green\n            \"#80FFFF\", // 23 Pastel Cyan\n            \"#FFFF00\", // 24 Bright Yellow\n            \"#FFFF80\", // 25 Pastel Yellow\n            \"#FFFFFF\", // 26 Bright White\n            \"#808080\", // 27 White (same as 13)\n            \"#FF00FF\", // 28 Bright Magenta (same as 8)\n            \"#FFFF80\", // 29 Pastel Yellow (same as 25)\n            \"#000080\", // 30 Blue (same as 1)\n            \"#00FF80\" //  31 Sea Green (same as 19)\n        ],\n        _cpcDefaultColorsForPens: [\n        1, 24, 20, 6, 26, 0, 2, 8, 10, 12, 14, 16, 18, 22, 1, 16, 1\n        ],\n        _cpcStrokeWidthForMode: [4, 2, 1, 1],\n\n        _isTerminal: false, // output for terminal\n\n        _data: [] as (string | number)[],\n        _dataPtr: 0,\n\n        _graBackgroundColor: \"\",\n        _graColorsForPens: [] as number[], // make sure to initialize with resetAll (or resetGra)\n        _graCurrGraphicsPen: -1,\n        _graCurrMode: 1,\n        _graOriginX: 0,\n        _graOriginY: 0,\n        _graGraphicsBuffer: [] as string[],\n        _graGraphicsPathBuffer: [] as string[],\n        _graGraphicsX: 0,\n        _graGraphicsY: 0,\n        _graOutputGraphicsIndex: -1,\n\n        _keyCharBufferString: \"\",\n        _needCls: false,\n        _output: \"\",\n        _paperSpanPos: -1,\n        _paperValue: -1,\n        _penSpanPos: -1,\n        _penValue: -1,\n        _pos: 0,\n        _restoreMap: {} as RestoreMapType,\n        _rsxPitch: 1,\n        _startTime: 0,\n        _stopRequested: false,\n        _tag: false,\n        _timerMap: {} as Record<number, (number | NodeJS.Timeout)>,\n        _vpos: 0,\n        _zone: 13,\n\n        _inputResolvedFn: null as ((value: string | null) => void) | null,\n        _waitResolvedFn: null as ((value: string) => void) | null,\n\n        deleteAllItems: (items: Record<string, unknown>): void => {\n            Object.keys(items).forEach(key => delete items[key]); // eslint-disable-line @typescript-eslint/no-dynamic-delete\n        },\n\n        postMessage: (message: MessageFromWorker) => {\n            parentPort.postMessage(message);\n        },\n\n        resetAll: () => {\n            vm._rsxPitch = 1;\n            vm.resetGra();\n            vm.cls();\n            vm._data.length = 0;\n            vm._dataPtr = 0;\n            vm._keyCharBufferString = \"\";\n            vm.deleteAllItems(vm._restoreMap);\n            vm._startTime = Date.now();\n            vm._stopRequested = false;\n            vm.remainAll();\n        },\n\n        resetGra: () => {\n            vm._graColorsForPens.length = 0;\n            vm._graColorsForPens.push(...vm._cpcDefaultColorsForPens);\n            vm._graBackgroundColor = \"\";\n            vm.graCls();\n        },\n\n        abs: (num: number) => {\n            return Math.abs(num);\n        },\n\n        after: (timeout: number, timer: number, fn: () => void) => {\n            vm.remain(timer);\n            vm._timerMap[timer] = setTimeout(() => fn(), timeout * 20);\n        },\n\n        asc: (str: string) => {\n            return str.charCodeAt(0);\n        },\n\n        atn: (num: number) => {\n            return Math.atan(num);\n        },\n\n        bin$: (num: number, pad: number = 0): string => {\n            return num.toString(2).toUpperCase().padStart(pad, \"0\");\n        },\n\n        chr$: (num: number) => {\n            return String.fromCharCode(num);\n        },\n\n        cint: (num: number) => {\n            return Math.round(num)\n        },\n\n        clearInput: () => {\n            vm._keyCharBufferString = \"\";\n        },\n\n        cls: () => {\n            vm._output = \"\";\n            vm._paperSpanPos = -1;\n            vm._paperValue = -1;\n            vm._penSpanPos = -1;\n            vm._penValue = -1;\n            vm._pos = 0;\n            vm._tag = false;\n            vm._vpos = 0;\n            vm._zone = 13;\n\n            vm.graCls();\n            vm._needCls = true;\n        },\n\n        cos: (num: number) => {\n            return Math.cos(num);\n        },\n\n        creal: (num: number) => {\n            return num; // nothing\n        },\n\n        dec$: (num: number, format: string) => {\n            const decimals = (format.split(\".\")[1] || \"\").length;\n            const str = num.toFixed(decimals);\n            const pad = \" \".repeat(Math.max(0, format.length - str.length));\n            return pad + str;\n        },\n\n        dim: (dims: number[], value: string | number = 0) => {\n            const createRecursiveArray = (depth: number): RecursiveArray<string | number> => {\n                const length = dims[depth] + 1;\n                const array: RecursiveArray<string | number> = new Array(length);\n                depth += 1;\n                if (depth < dims.length) {\n                    for (let i = 0; i < length; i += 1) {\n                        array[i] = createRecursiveArray(depth);\n                    }\n                } else {\n                    array.fill(value);\n                }\n                return array;\n            };\n            return createRecursiveArray(0);\n        },\n\n        dim1: (dim: number, value: number = 0): number[] => {\n            return new Array(dim + 1).fill(value);\n        },\n\n        draw: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"L\", x, y, pen);\n        },\n        drawr: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"l\", x, y, pen);\n        },\n        end: () => {\n            vm.frame();\n            return \"\";\n        },\n\n        escapeText: (str: string): string => {\n            return str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\");\n        },\n\n        every: (timeout: number, timer: number, fn: () => void) => {\n            vm.remain(timer);\n            vm._timerMap[timer] = setInterval(() => fn(), timeout * 20);\n        },\n\n        exp: (num: number) => {\n            return Math.exp(num);\n        },\n\n        fix: (num: number) => {\n            return Math.trunc(num);\n        },\n\n        frame: async () => {\n            if (vm._stopRequested) {\n                throw new Error(\"INFO: Program stopped\");\n            }\n            const message = vm.getFlushedTextandGraphics();\n            if (message) {\n                const hasGraphics = vm._graOutputGraphicsIndex >= 0;\n                vm.postMessage({ type: 'frame', message, hasGraphics, needCls: vm._needCls });\n                vm._needCls = false;\n            }\n            return new Promise<void>(resolve => setTimeout(() => resolve(), Date.now() % 50));\n        },\n\n        getAnsiColorCodeForPen: (pen: number) => {\n            return vm._ansiColorCodes[vm._graColorsForPens[pen]];\n        },\n\n        getFlushedText: () => {\n            const output = vm._output;\n            vm._output = \"\";\n            return output;\n        },\n\n        graAddGraphicsElement: (element: string): void => {\n            vm.graSetOutputGraphicsIndex();\n            vm.graFlushGraphicsPath(); // maybe a path is open\n            vm._graGraphicsBuffer.push(element);\n        },\n\n        graCls: (): void => {\n            vm._graGraphicsBuffer.length = 0;\n            vm._graGraphicsPathBuffer.length = 0;\n            vm._graCurrGraphicsPen = -1;\n            vm._graGraphicsX = 0;\n            vm._graGraphicsY = 0;\n            vm._graOutputGraphicsIndex = -1;\n        },\n\n        // type: M | m | P | p | L | l\n        graDrawMovePlot: (type: string, x: number, y: number, pen?: number): void => {\n            vm.graSetOutputGraphicsIndex();\n            if (pen !== undefined) {\n                vm.graphicsPen(pen);\n            }\n            x = Math.round(x);\n            y = Math.round(y);\n\n            if (!vm._graGraphicsPathBuffer.length && type !== \"M\" && type !== \"P\") { // path must start with an absolute move\n                vm._graGraphicsPathBuffer.push(`M${vm._graGraphicsX + vm._graOriginX} ${399 - vm._graGraphicsY - vm._graOriginY}`);\n            }\n\n            const isAbsolute = type === type.toUpperCase();\n            if (isAbsolute) {\n                vm._graGraphicsX = x;\n                vm._graGraphicsY = y;\n                x = vm._graGraphicsX + vm._graOriginX;\n                y = 399 - vm._graGraphicsY - vm._graOriginY;\n            } else {\n                vm._graGraphicsX += x;\n                vm._graGraphicsY += y;\n                y = -y;\n            }\n\n            const svgPathCmd = (type === \"P\" || type === \"p\")\n                ? `${isAbsolute ? \"M\" : \"m\"}${x} ${y}h1v1h-1v-1`\n                : `${type}${x} ${y}`;\n\n            vm._graGraphicsPathBuffer.push(svgPathCmd);\n        },\n\n        graFlushGraphicsPath: (): void => {\n            if (vm._graGraphicsPathBuffer.length) {\n                const strokeStr = vm._graCurrGraphicsPen >= 0 ? `stroke=\"${vm.graGetRgbColorStringForPen(vm._graCurrGraphicsPen)}\" ` : \"\";\n                vm._graGraphicsBuffer.push(`<path ${strokeStr}d=\"${vm._graGraphicsPathBuffer.join(\"\")}\" />`);\n                vm._graGraphicsPathBuffer.length = 0;\n            }\n        },\n\n        graGetFlushedGraphics: (): string => {\n            vm.graFlushGraphicsPath();\n            if (vm._graGraphicsBuffer.length) {\n                const graphicsBufferStr = vm._graGraphicsBuffer.join(\"\\n\");\n                const strokeWith = vm._cpcStrokeWidthForMode[vm._graCurrMode] + \"px\";\n                vm._graGraphicsBuffer.length = 0;\n                return vm.graGetTagInSvg(graphicsBufferStr, strokeWith, vm._graBackgroundColor);\n            }\n            return \"\";\n        },\n\n        graGetStrokeAndFillStr: (fill: number): string => {\n            const currGraphicsPen = vm._graCurrGraphicsPen;\n            const strokeStr = currGraphicsPen >= 0 ? ` stroke=\"${vm.graGetRgbColorStringForPen(currGraphicsPen)}\"` : \"\";\n            const fillStr = fill >= 0 ? ` fill=\"${vm.graGetRgbColorStringForPen(fill)}\"` : \"\";\n            return `${strokeStr}${fillStr}`;\n        },\n\n        graGetTagInSvg: (content: string, strokeWidth: string, backgroundColor: string) => {\n            const backgroundColorStr = backgroundColor !== \"\" ? ` style=\"background-color:${backgroundColor}\"` : '';\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 640 400\" shape-rendering=\"optimizeSpeed\" stroke=\"currentColor\" stroke-width=\"${strokeWidth}\"${backgroundColorStr}>\\n${content}\\n</svg>\\n`;\n        },\n\n        graGetRgbColorStringForPen: (pen: number): string => {\n            return vm._cpcColors[vm._graColorsForPens[pen]];\n        },\n\n        graPrintGraphicsText: (text: string): void => {\n            const yOffset = 16;\n            const colorStyleStr = vm._graCurrGraphicsPen >= 0 ? `; color: ${vm.graGetRgbColorStringForPen(vm._graCurrGraphicsPen)}` : \"\";\n            vm.graAddGraphicsElement(`<text x=\"${vm._graGraphicsX + vm._graOriginX}\" y=\"${399 - vm._graGraphicsY - vm._graOriginY + yOffset}\" style=\"white-space: pre${colorStyleStr}\">${text}</text>`);\n            vm._graGraphicsX += text.length * 8; // assuming 8px width per character\n        },\n\n        graSetOutputGraphicsIndex: (): void => {\n            if (vm._graOutputGraphicsIndex < 0) {\n                vm._graOutputGraphicsIndex = vm._output.length;\n            }\n        },\n\n        handleTrailingNewline: (str: string) => {\n            return vm._isTerminal ? str.replace(/\\n$/, \"\") : str;\n        },\n\n        getFlushedTextandGraphics: () => {\n            const textOutput = vm.handleTrailingNewline(vm.getFlushedText());\n            const graphicsOutput = vm.handleTrailingNewline(vm.graGetFlushedGraphics());\n            const outputGraphicsIndex = vm._graOutputGraphicsIndex;\n            const hasGraphics = outputGraphicsIndex >= 0;\n            const output = hasGraphics ? textOutput.substring(0, outputGraphicsIndex) + graphicsOutput + textOutput.substring(outputGraphicsIndex) : textOutput;\n            return output;\n        },\n\n        graphicsPen: (num: number) => {\n            if (num !== vm._graCurrGraphicsPen) {\n                vm.graFlushGraphicsPath();\n                vm._graCurrGraphicsPen = num;\n            }\n        },\n\n        hex$: (num: number, pad?: number) => {\n            return num.toString(16).toUpperCase().padStart(pad || 0, \"0\");\n        },\n\n        ink: (num: number, col: number): void => {\n            vm._graColorsForPens[num] = col;\n            // we modify inks, so set default pens and papers\n            if (vm._graCurrGraphicsPen < 0) {\n                vm.graphicsPen(1);\n            }\n            if (num === 0) {\n                vm._graBackgroundColor = vm.graGetRgbColorStringForPen(0);\n            }\n        },\n\n        inkey$: async () => {\n            await vm.frame();\n            if (vm._keyCharBufferString.length) {\n                const key = vm._keyCharBufferString.charAt(0);\n                vm._keyCharBufferString = vm._keyCharBufferString.substring(1);\n                return key;\n            }\n            return \"\";\n        },\n\n        input: async (prompt: string, types: string): Promise<(string | number)[]> => {\n            const input = await vm.lineInput(prompt);\n            const parts = input.split(',');\n            if (parts.length < types.length) { // not enough parts\n                parts.push(...new Array(types.length - parts.length).fill(\"\"));\n            }\n            return parts.map((part, index) => {\n                return types.charAt(index) === 'n' ? Number(part) : part;\n            });\n        },\n\n        instr: (str: string, find: string, len: number) => {\n            return str.indexOf(find, len !== undefined ? len - 1 : len) + 1;\n        },\n\n        int: (num: number) => {\n            return Math.floor(num);\n        },\n\n        keyDef: (num: number, repeat: number, ...codes: number[]): void => {\n            if (num === 78 && repeat === 1) {\n                vm.postMessage({ type: 'keyDef', codes });\n            }\n        },\n        left$: (str: string, num: number) => {\n            return str.slice(0, num);\n        },\n\n        len: (str: string) => {\n            return str.length;\n        },\n\n        lineInput: async (prompt: string): Promise<string> => {\n            const inputPromise = new Promise<string | null>((resolve) => {\n                vm._inputResolvedFn = resolve;\n            });\n            await vm.frame();\n            vm.postMessage({ type: 'input', prompt });\n\n            const input = await inputPromise;\n            if (input === null) {\n                throw new Error(\"INFO: Input canceled\");\n            }\n            return input;\n        },\n\n        log: (num: number) => {\n            return Math.log(num);\n        },\n\n        log10: (num: number) => {\n            return Math.log10(num);\n        },\n\n        lower$: (str: string) => {\n            return str.toLowerCase();\n        },\n\n        max: (...nums: number[]) => {\n            return Math.max.apply(null, nums);\n        },\n\n        mid$: (str: string, pos: number, len?: number) => {\n            return str.substr(pos - 1, len);\n        },\n        mid$Assign: (s: string, start: number, newString: string, len?: number) => {\n            start -= 1;\n            len = Math.min(len ?? newString.length, newString.length, s.length - start);\n            return s.substring(0, start) + newString.substring(0, len) + s.substring(start + len);\n        },\n\n        min: (...nums: number[]) => {\n            return Math.min.apply(null, nums);\n        },\n\n        mode: (num: number) => {\n            vm._graCurrMode = num;\n            vm.origin(0, 0);\n            vm.cls();\n        },\n        move: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"M\", x, y, pen);\n        },\n        mover: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"m\", x, y, pen);\n        },\n        origin: (x: number, y: number): void => {\n            vm._graOriginX = x;\n            vm._graOriginY = y;\n        },\n\n        paper: (n: number): void => {\n            // Use a virtual stack to handle paper and pen spans\n            if (n !== vm._paperValue) {\n                vm._paperValue = n;\n                if (vm._isTerminal) {\n                    const backgroundAdd = 10;\n                    const ansicolorCode = vm.getAnsiColorCodeForPen(n) + backgroundAdd;\n                    vm._output += `\\x1b[${ansicolorCode}m`;\n                    return;\n                }\n\n                // paper for browser: close open paper first\n                if (vm._paperSpanPos >= 0) {\n                    if (vm._penSpanPos > vm._paperSpanPos) { // if pen inside paper is open, close it\n                        vm._output += \"</span>\";\n                        vm._penSpanPos = -1;\n                    }\n                    vm._output += \"</span>\";\n                    vm._paperSpanPos = -1;\n                }\n\n                // Open new paper span\n                vm._paperSpanPos = vm._penSpanPos + 1;\n                vm._output += `<span style=\"background-color: ${vm.graGetRgbColorStringForPen(n)}\">`;\n\n                // If pen was open before, reopen it inside\n                if (vm._penValue >= 0 && vm._penSpanPos === -1) {\n                    vm._penSpanPos = vm._paperSpanPos + 1;\n                    vm._output += `<span style=\"color: ${vm.graGetRgbColorStringForPen(vm._penValue)}\">`;\n                }\n            }\n        },\n\n        pen: (n: number): void => {\n            if (n !== vm._penValue) {\n                vm._penValue = n;\n                if (vm._isTerminal) {\n                    vm._output += `\\x1b[${vm.getAnsiColorCodeForPen(n)}m`;\n                    return;\n                }\n\n                // close open pen first\n                if (vm._penSpanPos >= 0) {\n                    if (vm._paperSpanPos > vm._penSpanPos) { // if paper inside pen is open, close it\n                        vm._output += \"</span>\";\n                        vm._paperSpanPos = -1;\n                    }\n                    vm._output += \"</span>\";\n                    vm._penSpanPos = -1;\n                }\n\n                // Open new pen span\n                vm._penSpanPos = vm._paperSpanPos + 1;\n                vm._output += `<span style=\"color: ${vm.graGetRgbColorStringForPen(n)}\">`;\n\n                // If paper was open before, reopen it inside\n                if (vm._paperValue >= 0 && vm._paperSpanPos === -1) {\n                    vm._paperSpanPos = vm._penSpanPos + 1;\n                    vm._output += `<span style=\"background-color: ${vm.graGetRgbColorStringForPen(vm._paperValue)}\">`;\n                }\n            }\n        },\n\n        pi: Math.PI, // a constant!\n\n        plot: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"P\", x, y, pen);\n        },\n        plotr: (x: number, y: number, pen?: number) => {\n            vm.graDrawMovePlot(\"p\", x, y, pen);\n        },\n        pos: () => {\n            return vm._pos + 1;\n        },\n\n        print: (...args: (string | number)[]) => {\n            const formatNumber = (arg: number) => (arg >= 0 ? ` ${arg} ` : `${arg} `);\n            const text = args.map((arg) => (typeof arg === \"number\") ? formatNumber(arg) : arg).join(\"\");\n            if (vm._tag) {\n                return vm.graPrintGraphicsText(vm.escapeText(text));\n            }\n            vm.printText(text);\n        },\n\n        printTab: (...args: (string | number)[]) => {\n            const formatNumber = (arg: number) => (arg >= 0 ? ` ${arg} ` : `${arg} `);\n            const strArgs = args.map((arg) => (typeof arg === \"number\") ? formatNumber(arg) : arg);\n            const formatCommaOrTab = (str: string) => {\n                if (str === vm._commaOpChar) {\n                    return \" \".repeat(vm._zone - (vm._pos % vm._zone));\n                } else if (str.charAt(0) === vm._tabOpChar) {\n                    const tabSize = Number(str.substring(1));\n                    if (isNaN(tabSize) || tabSize <= 0) {\n                        return \"\";\n                    }\n                    const len = tabSize - 1 - vm._pos;\n                    return len >= 0 ? \" \".repeat(len) : \"\\n\" + \" \".repeat(tabSize - 1);\n                }\n                return str;\n            };\n            if (vm._tag) {\n                return vm.graPrintGraphicsText(vm.escapeText(strArgs.map(arg => formatCommaOrTab(arg)).join(\"\")));\n                // For graphics output the text position does not change, so we can output all at once\n            }\n            for (const str of strArgs) {\n                vm.printText(formatCommaOrTab(str));\n            }\n        },\n        printText: (text: string) => {\n            vm._output += vm._isTerminal ? text : vm.escapeText(text); // for node.js we do not need to escape (non-graphics) text\n            const lines = text.split(\"\\n\");\n            if (lines.length > 1) {\n                vm._vpos += lines.length - 1;\n                vm._pos = lines[lines.length - 1].length;\n            } else {\n                vm._pos += text.length;\n            }\n        },\n        read: () => {\n            if (vm._dataPtr < vm._data.length) {\n                return vm._data[vm._dataPtr++];\n            } else {\n                throw new Error(\"4\"); // 4: DATA exhausted\n            }\n        },\n        remain: (timer: number) => {\n            const value = vm._timerMap[timer];\n            if (value !== undefined) {\n                clearTimeout(value);\n                delete vm._timerMap[timer]; // eslint-disable-line @typescript-eslint/no-dynamic-delete\n            }\n            return value; // not really the remaining time\n        },\n        remainAll: () => {\n            for (const timer in vm._timerMap) {\n                vm.remain(Number(timer));\n            }\n        },\n        restore: (label: string) => {\n            vm._dataPtr = vm._restoreMap[label];\n        },\n        right$: (str: string, num: number) => {\n            return str.substring(str.length - num);\n        },\n\n        rnd: () => {\n            return Math.random();\n        },\n\n        round1: (num: number) => {\n            return Math.round(num);\n        },\n\n        round: (num: number, dec: number) => {\n            return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);\n        },\n\n        rsxArc: (...args: number[]) => { // 9x number, number?\n            const [x, y, rx, ry, rotx, long, sweep, endx, endy, fill] = args.map((p) => Math.round(p as number));\n            const strokeAndFillStr = vm.graGetStrokeAndFillStr(fill);\n            const svgPathCmd = `M${x} ${399 - y} A${rx} ${ry} ${rotx} ${long} ${sweep} ${endx} ${399 - endy}`;\n            vm.graAddGraphicsElement(`<path d=\"${svgPathCmd}\"${strokeAndFillStr} />`);\n        },\n\n        rsxCircle: (...args: number[]) => { // 3x number, number?\n            const [cx, cy, r, fill] = args.map((p) => Math.round(p as number));\n            const strokeAndFillStr = vm.graGetStrokeAndFillStr(fill);\n            vm.graAddGraphicsElement(`<circle cx=\"${cx}\" cy=\"${399 - cy}\" r=\"${r}\"${strokeAndFillStr} />`);\n        },\n\n        rsxDate: (...args: string[]) => { // string\n            const date = new Date();\n            const dayOfWeek = (date.getDay() + 1) % 7;\n            const day = date.getDate();\n            const month = date.getMonth() + 1;\n            const year = date.getFullYear() % 100;\n            const dateStr = `${String(dayOfWeek).padStart(2, '0')} ${String(day).padStart(2, '0')} ${String(month).padStart(2, '0')} ${String(year).padStart(2, '0')}`;\n            args[0] = dateStr;\n            return args;\n        },\n\n        rsxEllipse: (...args: number[]) => {\n            const [cx, cy, rx, ry, fill] = args.map((p) => Math.round(p as number));\n            const strokeAndFillStr = vm.graGetStrokeAndFillStr(fill);\n            vm.graAddGraphicsElement(`<ellipse cx=\"${cx}\" cy=\"${399 - cy}\" rx=\"${rx}\" ry=\"${ry}\"${strokeAndFillStr} />`);\n        },\n\n        rsxGeolocation: (...args: string[]) => {\n            const promise = new Promise<string>((resolve) => {\n                vm._waitResolvedFn = resolve;\n            }).then((str: string) => {\n                if (str.startsWith(\"{\")) {\n                    const json = JSON.parse(str);\n                    args[0] = json.latitude;\n                    args[1] = json.longitude;\n                    return args;\n                }\n                return args;\n            });\n            vm.postMessage({ type: 'geolocation' });\n            return promise;\n        },\n\n        rsxPitch: (args: number[]) => {\n            vm._rsxPitch = args[0] / 10;\n        },\n\n        rsxRect: (...args: number[]) => { // 4x number, number?\n            const [x1, y1, x2, y2, fill] = args.map((p) => Math.round(p as number));\n            const x = Math.min(x1, x2);\n            const y = Math.max(y1, y2);\n            const width = Math.abs(x2 - x1);\n            const height = Math.abs(y2 - y1);\n            const strokeAndFillStr = vm.graGetStrokeAndFillStr(fill);\n            vm.graAddGraphicsElement(`<rect x=\"${x}\" y=\"${399 - y}\" width=\"${width}\" height=\"${height}\"${strokeAndFillStr} />`);\n        },\n\n        rsxSay: (...args: string[]) => {\n            const promise = new Promise<string>((resolve) => {\n                vm._waitResolvedFn = resolve;\n            });\n            const message = args[0];\n            vm.postMessage({ type: 'speak', message, pitch: vm._rsxPitch });\n            return promise;\n        },\n\n        rsxTime: (...args: string[]) => { // string\n            const date = new Date();\n            const hours = date.getHours();\n            const minutes = date.getMinutes();\n            const seconds = date.getSeconds();\n            const timeStr = `${String(hours).padStart(2, '0')} ${String(minutes).padStart(2, '0')} ${String(seconds).padStart(2, '0')}`;\n            args[0] = timeStr;\n            return args;\n        },\n\n        sgn: (num: number) => {\n            return Math.sign(num);\n        },\n\n        sin: (num: number) => {\n            return Math.sin(num);\n        },\n\n        space$: (num: number) => {\n            return \" \".repeat(num);\n        },\n\n        spc: (num: number) => { // same as space$\n            return \" \".repeat(num);\n        },\n\n        sqr: (num: number) => {\n            return Math.sqrt(num);\n        },\n\n        stop: () => {\n            vm.frame();\n            return \"\"; //\"stop\";\n        },\n        str$: (num: number) => {\n            return num >= 0 ? ` ${num}` : String(num);\n        },\n\n        string$Num: (len: number, num: number) => {\n            return String.fromCharCode(num).repeat(len);\n        },\n\n        string$Str: (len: number, str: string) => {\n            return str.repeat(len);\n        },\n\n        tag: () => {\n            vm._tag = true;\n        },\n\n        tagoff: () => {\n            vm._tag = false;\n        },\n\n        tan: (num: number) => {\n            return Math.tan(num);\n        },\n\n        time: () => {\n            return ((Date.now() - vm._startTime) * 3 / 10) | 0;\n        },\n\n        toDeg: (num: number) => {\n            return num * 180 / Math.PI;\n        },\n\n        toRad: (num: number) => {\n            return num * Math.PI / 180;\n        },\n\n        using: (format: string, ...args: number[]) => {\n            return args.map((arg) => vm.dec$(arg, format)).join('');\n        },\n\n        unt: (num: number) => {\n            return num;\n        },\n\n        upper$: (str: string) => {\n            return str.toUpperCase();\n        },\n\n        val1: (str: string) => {\n            return Number(str);\n        },\n\n        val: (str: string) => {\n            return Number(str.replace(\"&x\", \"0b\").replace(\"&\", \"0x\"));\n        },\n        vpos: () => {\n            return vm._vpos + 1;\n        },\n        write: (...args: (string | number)[]) => {\n            const text = args.map((arg) => (typeof arg === \"string\") ? `\"${arg}\"` : `${arg}`).join(\",\") + \"\\n\";\n            if (vm._tag) {\n                return vm.graPrintGraphicsText(vm.escapeText(text));\n            }\n            vm.printText(text);\n        },\n        xpos: (): number => {\n            return vm._graGraphicsX;\n        },\n\n        ypos: (): number => {\n            return vm._graGraphicsY;\n        },\n\n        zone: (num: number) => {\n            vm._zone = num;\n        },\n    };\n\n    // Get the error event with line number from an synchronous, uncatched error.\n    // It does not work for async functions with \"unhandledrejection\" event.\n    const errorEventHandler = (event: Event) => {\n        const errorEvent = event as ErrorEvent;\n        errorEvent.preventDefault();\n        const { lineno, colno, message } = errorEvent;\n        const plainErrorEventObj = { lineno, colno, message };\n        const result = JSON.stringify(plainErrorEventObj);\n        vm.remainAll();\n        vm.postMessage({ type: 'result', result });\n    };\n\n    // this function must not be async to generate synchronous error\n    const onMessageHandler = (data: MessageToWorker) => {\n        switch (data.type) {\n            case 'config':\n                vm._isTerminal = data.isTerminal;\n                break;\n            case 'continue':\n                if (vm._waitResolvedFn) {\n                    vm._waitResolvedFn(data.result);\n                    vm._waitResolvedFn = null;\n                }\n                break;\n\n            case 'input':\n                // resolve waiting input\n                if (vm._inputResolvedFn) {\n                    vm._inputResolvedFn(data.prompt);\n                    vm._inputResolvedFn = null;\n                }\n                break;\n\n            case 'putKeys':\n                vm._keyCharBufferString += data.keys;\n                break;\n\n            case 'run': {\n                vm.resetAll();\n\n                if (!isNodeParentPort) { // not for node.js\n                    parentPort.addEventListener(\"error\", errorEventHandler, { once: true } as EventListenerOptions);\n                }\n                const fnScript = new Function(\"_o\", `\"use strict\"; return (async () => { ${data.code} })();`); // compile\n                if (!isNodeParentPort) {\n                    parentPort.removeEventListener(\"error\", errorEventHandler);\n                }\n\n                fnScript(vm).then((result: string | undefined) => {\n                    vm.remainAll();\n                    const message = vm.getFlushedTextandGraphics();\n                    if (message) {\n                        const hasGraphics = vm._graOutputGraphicsIndex >= 0;\n                        vm.postMessage({ type: 'frame', message, hasGraphics, needCls: vm._needCls });\n                    }\n                    result = result ?? \"\";\n                    vm.postMessage({ type: 'result', result });\n                }).catch((err: unknown) => {\n                    vm.remainAll();\n                    console.warn(err instanceof Error ? err.stack : String(err));\n                    const result = String(err);\n                    const message = vm.getFlushedTextandGraphics();\n                    if (message) {\n                        const hasGraphics = vm._graOutputGraphicsIndex >= 0;\n                        vm.postMessage({ type: 'frame', message, hasGraphics, needCls: vm._needCls });\n                    }\n                    vm.postMessage({ type: 'result', result });\n                });\n                break;\n            }\n\n            case 'stop':\n                vm._stopRequested = true;\n                break;\n\n            default:\n                // Unknown message type\n                break;\n        }\n    };\n\n    if (isNodeParentPort) {\n        parentPort.on('message', onMessageHandler);\n    } else {\n        parentPort.addEventListener('message', (event: Event) => {\n            const data = (event as unknown as MessageEventType).data;\n            onMessageHandler(data);\n        });\n    }\n    return vm;\n};\n\nif (typeof require !== \"undefined\") { // node.js worker environment\n    (function callWithParentPort() {\n        const { parentPort } = require('worker_threads') as NodeWorkerThreadsType;\n        if (parentPort) { // is null in test environment\n            workerFn(parentPort);\n        }\n    })();\n} else if (typeof self !== \"undefined\" && typeof Window === \"undefined\") { // web worker environment\n    workerFn(self);\n}\n"],"names":[],"mappings":"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"}